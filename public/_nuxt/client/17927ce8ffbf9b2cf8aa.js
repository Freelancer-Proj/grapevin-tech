/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{10:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"i",(function(){return y})),n.d(t,"l",(function(){return v})),n.d(t,"h",(function(){return w})),n.d(t,"f",(function(){return T})),n.d(t,"m",(function(){return _})),n.d(t,"c",(function(){return C})),n.d(t,"p",(function(){return E})),n.d(t,"k",(function(){return x})),n.d(t,"j",(function(){return I})),n.d(t,"e",(function(){return A})),n.d(t,"o",(function(){return D})),n.d(t,"d",(function(){return N})),n.d(t,"n",(function(){return L}));n(41),n(27),n(71),n(30),n(57),n(58),n(22),n(52),n(120);var r=n(21),o=(n(129),n(59),n(173),n(44),n(18),n(7),n(29),n(11),n(42),n(0));function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return o.a.extend({name:n||e.replace(/__/g,"-"),functional:!0,render:function(n,r){var data=r.data,o=r.children;return data.staticClass="".concat(e," ").concat(data.staticClass||"").trim(),n(t,data,o)}})}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=function o(c){n(c),e.removeEventListener(t,o,r)};e.addEventListener(t,o,r)}var h=!1;try{if("undefined"!=typeof window){var d=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("testListener",d,d),window.removeEventListener("testListener",d,d)}}catch(e){console.warn(e)}function f(e,t,n,r){e.addEventListener(t,n,!!h&&r)}function m(e,path,t){var n=path.length-1;if(n<0)return void 0===e?t:e;for(var i=0;i<n;i++){if(null==e)return t;e=e[path[i]]}return null==e?t:void 0===e[path[n]]?t:e[path[n]]}function y(e,path,t){return null!=e&&path&&"string"==typeof path?void 0!==e[path]?e[path]:m(e,(path=(path=path.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),t):t}function v(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return 0;var t=+window.getComputedStyle(e).getPropertyValue("z-index");return t||v(e.parentNode)}function w(e,t){for(var n={},i=0;i<t.length;i++){var r=t[i];void 0!==e[r]&&(n[r]=e[r])}return n}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return null==e||""===e?void 0:isNaN(+e)?String(e):"".concat(Number(e)).concat(t)}function S(e){return null!==e&&"object"===Object(r.a)(e)}var _=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34});var k=/-(\w)/g,C=function(e){return e.replace(k,(function(e,t){return t?t.toUpperCase():""}))};function E(e){return e.charAt(0).toUpperCase()+e.slice(1)}function x(e,t,n){return e.$slots[t]&&e.$scopedSlots[t]&&e.$scopedSlots[t].name?n?"v-slot":"scoped":e.$slots[t]?"normal":e.$scopedSlots[t]?"scoped":void 0}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",data=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.$scopedSlots[t]?e.$scopedSlots[t](data instanceof Function?data():data):!e.$slots[t]||data&&!n?void 0:e.$slots[t]}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(t,Math.min(n,e))}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function N(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=0;r<e.length;)n.push(e.substr(r,t)),r+=t;return n}function L(){var source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var t in e){var n=source[t],r=e[t];S(n)&&S(r)?source[t]=L(n,r):source[t]=r}return source}},121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,c=n(72),l=n(90),component=n(122),h=n(123),d=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),f=new l.ErrorFactory("app","Firebase",d),m="@firebase/app",y=((o={})[m]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),v=new h.Logger("@firebase/app"),w=function(){function e(e,t,n){var r,o,h=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=l.deepCopy(e),this.container=new component.ComponentContainer(t.name),this._addComponent(new component.Component("app",(function(){return h}),"PUBLIC"));try{for(var d=c.__values(this.firebase_.INTERNAL.components.values()),f=d.next();!f.done;f=d.next()){var m=f.value;this._addComponent(m)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(component){try{this.container.addComponent(component)}catch(e){v.debug("Component "+component.name+" failed to register with FirebaseApp "+this.name,e)}},e.prototype._addOrOverwriteComponent=function(component){this.container.addOrOverwriteComponent(component)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw f.create("app-deleted",{appName:this.name_})},e}();w.prototype.name&&w.prototype.options||w.prototype.delete||console.log("dc");var T=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,o){void 0===o&&(o={});if("object"!=typeof o||null===o){o={name:o}}var c=o;void 0===c.name&&(c.name="[DEFAULT]");var h=c.name;if("string"!=typeof h||!h)throw f.create("bad-app-name",{appName:String(h)});if(l.contains(t,h))throw f.create("duplicate-app",{appName:h});var d=new e(n,c,r);return t[h]=d,d},app:o,registerVersion:function(e,t,n){var r,o=null!==(r=y[e])&&void 0!==r?r:e;n&&(o+="-"+n);var c=o.match(/\s|\//),l=t.match(/\s|\//);if(c||l){var d=['Unable to register library "'+o+'" with version "'+t+'":'];return c&&d.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),c&&l&&d.push("and"),l&&d.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void v.warn(d.join(" "))}h(new component.Component(o+"-version",(function(){return{library:o,version:t}}),"VERSION"))},apps:null,SDK_VERSION:"7.8.1",INTERNAL:{registerComponent:h,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function o(e){if(e=e||"[DEFAULT]",!l.contains(t,e))throw f.create("no-app",{appName:e});return t[e]}function h(component){var h,d,m=component.name;if(n.has(m))return v.debug("There were multiple attempts to register component "+m+"."),"PUBLIC"===component.type?r[m]:null;if(n.set(m,component),"PUBLIC"===component.type){var y=function(e){if(void 0===e&&(e=o()),"function"!=typeof e[m])throw f.create("invalid-app-argument",{appName:m});return e[m]()};void 0!==component.serviceProps&&l.deepExtend(y,component.serviceProps),r[m]=y,e.prototype[m]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,m);return n.apply(this,component.multipleInstances?e:[])}}try{for(var w=c.__values(Object.keys(t)),T=w.next();!T.done;T=w.next()){var S=T.value;t[S]._addComponent(component)}}catch(e){h={error:e}}finally{try{T&&!T.done&&(d=w.return)&&d.call(w)}finally{if(h)throw h.error}}return"PUBLIC"===component.type?r[m]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),o.App=e,r)}(w);return t.INTERNAL=c.__assign(c.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){l.deepExtend(t,e)},createSubscribe:l.createSubscribe,ErrorFactory:l.ErrorFactory,deepExtend:l.deepExtend}),t}(),S=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t,component=e.getComponent();return"VERSION"===(null===(t=component)||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(l.isBrowser()&&void 0!==self.firebase){v.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var _=self.firebase.SDK_VERSION;_&&_.indexOf("LITE")>=0&&v.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var k=T.initializeApp;T.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.isNode()&&v.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),k.apply(void 0,e)};var C=T;!function(e,t){e.INTERNAL.registerComponent(new component.Component("platform-logger",(function(e){return new S(e)}),"PRIVATE")),e.registerVersion(m,"0.5.4",t),e.registerVersion("fire-js","")}(C),t.default=C,t.firebase=C},122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(72),o=n(90),c=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),l=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new o.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:"[DEFAULT]",optional:!1},e),n=t.identifier,o=t.optional,c=this.normalizeInstanceIdentifier(n);try{var l=this.getOrInitializeService(c);if(!l){if(o)return null;throw Error("Service "+this.name+" is not available")}return l}catch(e){if(o)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(component){var e,t;if(component.name!==this.name)throw Error("Mismatching Component "+component.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=component,function(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService("[DEFAULT]")}catch(e){}try{for(var n=r.__values(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var c=r.__read(o.value,2),l=c[0],h=c[1],d=this.normalizeInstanceIdentifier(l);try{var f=this.getOrInitializeService(d);h.resolve(f)}catch(e){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e}();var h=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(component){var e=this.getProvider(component.name);if(e.isComponentSet())throw new Error("Component "+component.name+" has already been registered with "+this.name);e.setComponent(component)},e.prototype.addOrOverwriteComponent=function(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new l(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=c,t.ComponentContainer=h,t.Provider=l},123:function(e,t,n){"use strict";function r(){for(var s=0,i=0,e=arguments.length;i<e;i++)s+=arguments[i].length;var t=Array(s),n=0;for(i=0;i<e;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)t[n]=a[r];return t}n.r(t),n.d(t,"LogLevel",(function(){return o})),n.d(t,"Logger",(function(){return d})),n.d(t,"setLogLevel",(function(){return f}));var o,c=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var l=o.INFO,h=function(e,t){for(var n=[],c=2;c<arguments.length;c++)n[c-2]=arguments[c];if(!(t<e.logLevel)){var l=(new Date).toISOString();switch(t){case o.DEBUG:case o.VERBOSE:console.log.apply(console,r(["["+l+"]  "+e.name+":"],n));break;case o.INFO:console.info.apply(console,r(["["+l+"]  "+e.name+":"],n));break;case o.WARN:console.warn.apply(console,r(["["+l+"]  "+e.name+":"],n));break;case o.ERROR:console.error.apply(console,r(["["+l+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},d=function(){function e(e){this.name=e,this._logLevel=l,this._logHandler=h,c.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function f(e){c.forEach((function(t){t.logLevel=e}))}},124:function(e,t,n){"use strict";t.a=function(e,t){return t=t||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var c in s.open(t.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),u.push([t,n]),i[t]=i[t]?i[t]+","+n:n})),n(a())},s.onerror=r,s.withCredentials="include"==t.credentials,t.headers)s.setRequestHeader(c,t.headers[c]);s.send(t.body||null)}))}},127:function(e,t,n){"use strict";var r,o=(r=n(184))&&"object"==typeof r&&"default"in r?r.default:r,script={name:"VuePlyr",props:{options:{type:Object,required:!1,default:()=>({})},emit:{type:Array,required:!1,default:()=>[]}},data:()=>({player:{}}),computed:{opts(){const e=this.options;return this.options.hasOwnProperty("hideYouTubeDOMError")||(e.hideYouTubeDOMError=!0),e}},mounted(){this.player=new o(this.$el.firstChild,this.opts),this.emit.forEach(element=>{this.player.on(element,this.emitPlayerEvent)})},beforeDestroy(){try{this.player.destroy()}catch(e){this.opts.hideYouTubeDOMError&&"The YouTube player is not attached to the DOM."===e.message||console.error(e)}},methods:{emitPlayerEvent(e){this.$emit(e.type,e)}}};"undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function c(e){let t="";for(const n in e){const style=e[n];t+='<style data-vue-ssr-id="'+Array.from(style.ids).join(" ")+'"'+(style.media?' media="'+style.media+'"':"")+">"+style.css+"</style>"}return t}const l=script;var h=function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)};h._withStripped=!0;var d=function(template,style,script,e,t,n,r,o,c,l){"boolean"!=typeof r&&(c=o,o=r,r=!1);const h="function"==typeof script?script.options:script;let d;if(template&&template.render&&(h.render=template.render,h.staticRenderFns=template.staticRenderFns,h._compiled=!0,t&&(h.functional=!0)),e&&(h._scopeId=e),n?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),style&&style.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(n)},h._ssrRegister=d):style&&(d=r?function(e){style.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){style.call(this,o(e))}),d)if(h.functional){const e=h.render;h.render=function(t,n){return d.call(n),e(t,n)}}else{const e=h.beforeCreate;h.beforeCreate=e?[].concat(e,d):[d]}return script}({render:h,staticRenderFns:[]},(function(e){e&&e("data-v-91800632_0",{source:"@keyframes plyr-progress{to{background-position:25px 0}}@keyframes plyr-popup{0%{opacity:.5;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes plyr-fade-in{from{opacity:0}to{opacity:1}}.plyr{-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;direction:ltr;font-family:Avenir,\"Avenir Next\",\"Helvetica Neue\",\"Segoe UI\",Helvetica,Arial,sans-serif;font-variant-numeric:tabular-nums;font-weight:500;line-height:1.7;max-width:100%;min-width:200px;position:relative;text-shadow:none;transition:box-shadow .3s ease}.plyr audio,.plyr video{border-radius:inherit;height:auto;vertical-align:middle;width:100%}.plyr button{font:inherit;line-height:inherit;width:auto}.plyr:focus{outline:0}.plyr--full-ui{box-sizing:border-box}.plyr--full-ui *,.plyr--full-ui ::after,.plyr--full-ui ::before{box-sizing:inherit}.plyr--full-ui a,.plyr--full-ui button,.plyr--full-ui input,.plyr--full-ui label{touch-action:manipulation}.plyr__badge{background:#4a5764;border-radius:2px;color:#fff;font-size:9px;line-height:1;padding:3px 4px}.plyr--full-ui ::-webkit-media-text-track-container{display:none}.plyr__captions{animation:plyr-fade-in .3s ease;bottom:0;color:#fff;display:none;font-size:14px;left:0;padding:10px;position:absolute;text-align:center;transition:transform .4s ease-in-out;width:100%}.plyr__captions .plyr__caption{background:rgba(0,0,0,.8);border-radius:2px;-webkit-box-decoration-break:clone;box-decoration-break:clone;line-height:185%;padding:.2em .5em;white-space:pre-wrap}.plyr__captions .plyr__caption div{display:inline}.plyr__captions span:empty{display:none}@media (min-width:480px){.plyr__captions{font-size:16px;padding:20px}}@media (min-width:768px){.plyr__captions{font-size:18px}}.plyr--captions-active .plyr__captions{display:block}.plyr:not(.plyr--hide-controls) .plyr__controls:not(:empty)~.plyr__captions{transform:translateY(-40px)}.plyr__control{background:0 0;border:0;border-radius:3px;color:inherit;cursor:pointer;flex-shrink:0;overflow:visible;padding:7px;position:relative;transition:all .3s ease}.plyr__control svg{display:block;fill:currentColor;height:18px;pointer-events:none;width:18px}.plyr__control:focus{outline:0}.plyr__control.plyr__tab-focus{box-shadow:0 0 0 5px rgba(0,179,255,.5);outline:0}a.plyr__control{text-decoration:none}a.plyr__control::after,a.plyr__control::before{display:none}.plyr__control.plyr__control--pressed .icon--not-pressed,.plyr__control.plyr__control--pressed .label--not-pressed,.plyr__control:not(.plyr__control--pressed) .icon--pressed,.plyr__control:not(.plyr__control--pressed) .label--pressed{display:none}.plyr--audio .plyr__control.plyr__tab-focus,.plyr--audio .plyr__control:hover,.plyr--audio .plyr__control[aria-expanded=true]{background:#00b3ff;color:#fff}.plyr--video .plyr__control.plyr__tab-focus,.plyr--video .plyr__control:hover,.plyr--video .plyr__control[aria-expanded=true]{background:#00b3ff;color:#fff}.plyr__control--overlaid{background:rgba(0,179,255,.8);border:0;border-radius:100%;color:#fff;display:none;left:50%;padding:15px;position:absolute;top:50%;transform:translate(-50%,-50%);z-index:2}.plyr__control--overlaid svg{left:2px;position:relative}.plyr__control--overlaid:focus,.plyr__control--overlaid:hover{background:#00b3ff}.plyr--playing .plyr__control--overlaid{opacity:0;visibility:hidden}.plyr--full-ui.plyr--video .plyr__control--overlaid{display:block}.plyr--full-ui ::-webkit-media-controls{display:none}.plyr__controls{align-items:center;display:flex;justify-content:flex-end;text-align:center}.plyr__controls .plyr__progress__container{flex:1;min-width:0}.plyr__controls .plyr__controls__item{margin-left:2.5px}.plyr__controls .plyr__controls__item:first-child{margin-left:0;margin-right:auto}.plyr__controls .plyr__controls__item.plyr__progress__container{padding-left:2.5px}.plyr__controls .plyr__controls__item.plyr__time{padding:0 5px}.plyr__controls .plyr__controls__item.plyr__progress__container:first-child,.plyr__controls .plyr__controls__item.plyr__time+.plyr__time,.plyr__controls .plyr__controls__item.plyr__time:first-child{padding-left:0}.plyr__controls .plyr__controls__item.plyr__volume{padding-right:5px}.plyr__controls .plyr__controls__item.plyr__volume:first-child{padding-right:0}.plyr__controls:empty{display:none}.plyr--audio .plyr__controls{background:#fff;border-radius:inherit;color:#4a5764;padding:10px}.plyr--video .plyr__controls{background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.7));border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;bottom:0;color:#fff;left:0;padding:20px 5px 5px;position:absolute;right:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out;z-index:3}@media (min-width:480px){.plyr--video .plyr__controls{padding:35px 10px 10px}}.plyr--video.plyr--hide-controls .plyr__controls{opacity:0;pointer-events:none;transform:translateY(100%)}.plyr [data-plyr=airplay],.plyr [data-plyr=captions],.plyr [data-plyr=fullscreen],.plyr [data-plyr=pip]{display:none}.plyr--airplay-supported [data-plyr=airplay],.plyr--captions-enabled [data-plyr=captions],.plyr--fullscreen-enabled [data-plyr=fullscreen],.plyr--pip-supported [data-plyr=pip]{display:inline-block}.plyr__menu{display:flex;position:relative}.plyr__menu .plyr__control svg{transition:transform .3s ease}.plyr__menu .plyr__control[aria-expanded=true] svg{transform:rotate(90deg)}.plyr__menu .plyr__control[aria-expanded=true] .plyr__tooltip{display:none}.plyr__menu__container{animation:plyr-popup .2s ease;background:rgba(255,255,255,.9);border-radius:4px;bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);color:#4a5764;font-size:16px;margin-bottom:10px;position:absolute;right:-3px;text-align:left;white-space:nowrap;z-index:3}.plyr__menu__container>div{overflow:hidden;transition:height .35s cubic-bezier(.4,0,.2,1),width .35s cubic-bezier(.4,0,.2,1)}.plyr__menu__container::after{border:4px solid transparent;border-top-color:rgba(255,255,255,.9);content:'';height:0;position:absolute;right:15px;top:100%;width:0}.plyr__menu__container [role=menu]{padding:7px}.plyr__menu__container [role=menuitem],.plyr__menu__container [role=menuitemradio]{margin-top:2px}.plyr__menu__container [role=menuitem]:first-child,.plyr__menu__container [role=menuitemradio]:first-child{margin-top:0}.plyr__menu__container .plyr__control{align-items:center;color:#4a5764;display:flex;font-size:14px;padding:4px 11px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.plyr__menu__container .plyr__control>span{align-items:inherit;display:flex;width:100%}.plyr__menu__container .plyr__control::after{border:4px solid transparent;content:'';position:absolute;top:50%;transform:translateY(-50%)}.plyr__menu__container .plyr__control--forward{padding-right:28px}.plyr__menu__container .plyr__control--forward::after{border-left-color:rgba(74,87,100,.8);right:5px}.plyr__menu__container .plyr__control--forward.plyr__tab-focus::after,.plyr__menu__container .plyr__control--forward:hover::after{border-left-color:currentColor}.plyr__menu__container .plyr__control--back{font-weight:500;margin:7px;margin-bottom:3px;padding-left:28px;position:relative;width:calc(100% - 14px)}.plyr__menu__container .plyr__control--back::after{border-right-color:rgba(74,87,100,.8);left:7px}.plyr__menu__container .plyr__control--back::before{background:#c1c9d1;box-shadow:0 1px 0 #fff;content:'';height:1px;left:0;margin-top:4px;overflow:hidden;position:absolute;right:0;top:100%}.plyr__menu__container .plyr__control--back.plyr__tab-focus::after,.plyr__menu__container .plyr__control--back:hover::after{border-right-color:currentColor}.plyr__menu__container .plyr__control[role=menuitemradio]{padding-left:7px}.plyr__menu__container .plyr__control[role=menuitemradio]::after,.plyr__menu__container .plyr__control[role=menuitemradio]::before{border-radius:100%}.plyr__menu__container .plyr__control[role=menuitemradio]::before{background:rgba(0,0,0,.1);content:'';display:block;flex-shrink:0;height:16px;margin-right:10px;transition:all .3s ease;width:16px}.plyr__menu__container .plyr__control[role=menuitemradio]::after{background:#fff;border:0;height:6px;left:12px;opacity:0;top:50%;transform:translateY(-50%) scale(0);transition:transform .3s ease,opacity .3s ease;width:6px}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]::before{background:#00b3ff}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]::after{opacity:1;transform:translateY(-50%) scale(1)}.plyr__menu__container .plyr__control[role=menuitemradio].plyr__tab-focus::before,.plyr__menu__container .plyr__control[role=menuitemradio]:hover::before{background:rgba(0,0,0,.1)}.plyr__menu__container .plyr__menu__value{align-items:center;display:flex;margin-left:auto;margin-right:-5px;overflow:hidden;padding-left:25px;pointer-events:none}.plyr--full-ui input[type=range]{-webkit-appearance:none;background:0 0;border:0;border-radius:26px;color:#00b3ff;display:block;height:19px;margin:0;padding:0;transition:box-shadow .3s ease;width:100%}.plyr--full-ui input[type=range]::-webkit-slider-runnable-track{background:0 0;border:0;border-radius:2.5px;height:5px;transition:box-shadow .3s ease;-webkit-user-select:none;user-select:none;background-image:linear-gradient(to right,currentColor var(--value,0),transparent var(--value,0))}.plyr--full-ui input[type=range]::-webkit-slider-thumb{background:#fff;border:0;border-radius:100%;box-shadow:0 1px 1px rgba(0,0,0,.15),0 0 0 1px rgba(35,41,47,.2);height:13px;position:relative;transition:all .2s ease;width:13px;-webkit-appearance:none;margin-top:-4px}.plyr--full-ui input[type=range]::-moz-range-track{background:0 0;border:0;border-radius:2.5px;height:5px;transition:box-shadow .3s ease;-moz-user-select:none;user-select:none}.plyr--full-ui input[type=range]::-moz-range-thumb{background:#fff;border:0;border-radius:100%;box-shadow:0 1px 1px rgba(0,0,0,.15),0 0 0 1px rgba(35,41,47,.2);height:13px;position:relative;transition:all .2s ease;width:13px}.plyr--full-ui input[type=range]::-moz-range-progress{background:currentColor;border-radius:2.5px;height:5px}.plyr--full-ui input[type=range]::-ms-track{background:0 0;border:0;border-radius:2.5px;height:5px;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none;color:transparent}.plyr--full-ui input[type=range]::-ms-fill-upper{background:0 0;border:0;border-radius:2.5px;height:5px;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none}.plyr--full-ui input[type=range]::-ms-fill-lower{background:0 0;border:0;border-radius:2.5px;height:5px;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none;background:currentColor}.plyr--full-ui input[type=range]::-ms-thumb{background:#fff;border:0;border-radius:100%;box-shadow:0 1px 1px rgba(0,0,0,.15),0 0 0 1px rgba(35,41,47,.2);height:13px;position:relative;transition:all .2s ease;width:13px;margin-top:0}.plyr--full-ui input[type=range]::-ms-tooltip{display:none}.plyr--full-ui input[type=range]:focus{outline:0}.plyr--full-ui input[type=range]::-moz-focus-outer{border:0}.plyr--full-ui input[type=range].plyr__tab-focus::-webkit-slider-runnable-track{box-shadow:0 0 0 5px rgba(0,179,255,.5);outline:0}.plyr--full-ui input[type=range].plyr__tab-focus::-moz-range-track{box-shadow:0 0 0 5px rgba(0,179,255,.5);outline:0}.plyr--full-ui input[type=range].plyr__tab-focus::-ms-track{box-shadow:0 0 0 5px rgba(0,179,255,.5);outline:0}.plyr--full-ui.plyr--video input[type=range]::-webkit-slider-runnable-track{background-color:rgba(255,255,255,.25)}.plyr--full-ui.plyr--video input[type=range]::-moz-range-track{background-color:rgba(255,255,255,.25)}.plyr--full-ui.plyr--video input[type=range]::-ms-track{background-color:rgba(255,255,255,.25)}.plyr--full-ui.plyr--video input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px rgba(0,0,0,.15),0 0 0 1px rgba(35,41,47,.2),0 0 0 3px rgba(255,255,255,.5)}.plyr--full-ui.plyr--video input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px rgba(0,0,0,.15),0 0 0 1px rgba(35,41,47,.2),0 0 0 3px rgba(255,255,255,.5)}.plyr--full-ui.plyr--video input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px rgba(0,0,0,.15),0 0 0 1px rgba(35,41,47,.2),0 0 0 3px rgba(255,255,255,.5)}.plyr--full-ui.plyr--audio input[type=range]::-webkit-slider-runnable-track{background-color:rgba(193,201,209,.66)}.plyr--full-ui.plyr--audio input[type=range]::-moz-range-track{background-color:rgba(193,201,209,.66)}.plyr--full-ui.plyr--audio input[type=range]::-ms-track{background-color:rgba(193,201,209,.66)}.plyr--full-ui.plyr--audio input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px rgba(0,0,0,.15),0 0 0 1px rgba(35,41,47,.2),0 0 0 3px rgba(0,0,0,.1)}.plyr--full-ui.plyr--audio input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px rgba(0,0,0,.15),0 0 0 1px rgba(35,41,47,.2),0 0 0 3px rgba(0,0,0,.1)}.plyr--full-ui.plyr--audio input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px rgba(0,0,0,.15),0 0 0 1px rgba(35,41,47,.2),0 0 0 3px rgba(0,0,0,.1)}.plyr__poster{background-color:#000;background-position:50% 50%;background-repeat:no-repeat;background-size:contain;height:100%;left:0;opacity:0;position:absolute;top:0;transition:opacity .2s ease;width:100%;z-index:1}.plyr--stopped.plyr__poster-enabled .plyr__poster{opacity:1}.plyr__time{font-size:14px}.plyr__time+.plyr__time::before{content:'\\2044';margin-right:10px}@media (max-width:767px){.plyr__time+.plyr__time{display:none}}.plyr--video .plyr__time{text-shadow:0 1px 1px rgba(0,0,0,.15)}.plyr__tooltip{background:rgba(255,255,255,.9);border-radius:3px;bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);color:#4a5764;font-size:14px;font-weight:500;left:50%;line-height:1.3;margin-bottom:10px;opacity:0;padding:5px 7.5px;pointer-events:none;position:absolute;transform:translate(-50%,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s .1s ease,opacity .2s .1s ease;white-space:nowrap;z-index:2}.plyr__tooltip::before{border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid rgba(255,255,255,.9);bottom:-4px;content:'';height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;z-index:2}.plyr .plyr__control.plyr__tab-focus .plyr__tooltip,.plyr .plyr__control:hover .plyr__tooltip,.plyr__tooltip--visible{opacity:1;transform:translate(-50%,0) scale(1)}.plyr .plyr__control:hover .plyr__tooltip{z-index:3}.plyr__controls>.plyr__control:first-child .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip{left:0;transform:translate(0,10px) scale(.8);transform-origin:0 100%}.plyr__controls>.plyr__control:first-child .plyr__tooltip::before,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip::before{left:16px}.plyr__controls>.plyr__control:last-child .plyr__tooltip{left:auto;right:0;transform:translate(0,10px) scale(.8);transform-origin:100% 100%}.plyr__controls>.plyr__control:last-child .plyr__tooltip::before{left:auto;right:16px;transform:translateX(50%)}.plyr__controls>.plyr__control:first-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control:hover .plyr__tooltip,.plyr__controls>.plyr__control:first-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child:hover .plyr__tooltip,.plyr__controls>.plyr__control:last-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:last-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:last-child:hover .plyr__tooltip{transform:translate(0,0) scale(1)}.plyr--video{background:#000;overflow:hidden}.plyr--video.plyr--menu-open{overflow:visible}.plyr__video-wrapper{background:#000;border-radius:inherit;overflow:hidden;position:relative;z-index:0}.plyr__video-embed,.plyr__video-wrapper--fixed-ratio{height:0;padding-bottom:56.25%}.plyr__video-embed iframe,.plyr__video-wrapper--fixed-ratio video{border:0;height:100%;left:0;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.plyr--full-ui .plyr__video-embed>.plyr__video-embed__container{padding-bottom:240%;position:relative;transform:translateY(-38.28125%)}.plyr__progress{left:6.5px;margin-right:13px;position:relative}.plyr__progress input[type=range],.plyr__progress__buffer{margin-left:-6.5px;margin-right:-6.5px;width:calc(100% + 13px)}.plyr__progress input[type=range]{position:relative;z-index:2}.plyr__progress .plyr__tooltip{font-size:14px;left:0}.plyr__progress__buffer{-webkit-appearance:none;background:0 0;border:0;border-radius:100px;height:5px;left:0;margin-top:-2.5px;padding:0;position:absolute;top:50%}.plyr__progress__buffer::-webkit-progress-bar{background:0 0}.plyr__progress__buffer::-webkit-progress-value{background:currentColor;border-radius:100px;min-width:5px;transition:width .2s ease}.plyr__progress__buffer::-moz-progress-bar{background:currentColor;border-radius:100px;min-width:5px;transition:width .2s ease}.plyr__progress__buffer::-ms-fill{border-radius:100px;transition:width .2s ease}.plyr--video .plyr__progress__buffer{box-shadow:0 1px 1px rgba(0,0,0,.15);color:rgba(255,255,255,.25)}.plyr--audio .plyr__progress__buffer{color:rgba(193,201,209,.66)}.plyr--loading .plyr__progress__buffer{animation:plyr-progress 1s linear infinite;background-image:linear-gradient(-45deg,rgba(35,41,47,.6) 25%,transparent 25%,transparent 50%,rgba(35,41,47,.6) 50%,rgba(35,41,47,.6) 75%,transparent 75%,transparent);background-repeat:repeat-x;background-size:25px 25px;color:transparent}.plyr--video.plyr--loading .plyr__progress__buffer{background-color:rgba(255,255,255,.25)}.plyr--audio.plyr--loading .plyr__progress__buffer{background-color:rgba(193,201,209,.66)}.plyr__volume{align-items:center;display:flex;flex:1;position:relative}.plyr__volume input[type=range]{margin-left:5px;position:relative;z-index:2}@media (min-width:480px){.plyr__volume{max-width:90px}}@media (min-width:768px){.plyr__volume{max-width:110px}}.plyr--is-ios .plyr__volume{display:none!important}.plyr--is-ios.plyr--vimeo [data-plyr=mute]{display:none!important}.plyr:-webkit-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-ms-fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-webkit-full-screen video{height:100%}.plyr:-ms-fullscreen video{height:100%}.plyr:fullscreen video{height:100%}.plyr:-webkit-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-ms-fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:-webkit-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative;top:50%;transform:translateY(-50%)}.plyr:-ms-fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative;top:50%;transform:translateY(-50%)}.plyr:fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative;top:50%;transform:translateY(-50%)}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-webkit-full-screen.plyr--hide-controls{cursor:none}.plyr:-ms-fullscreen.plyr--hide-controls{cursor:none}.plyr:fullscreen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-webkit-full-screen .plyr__captions{font-size:21px}.plyr:-ms-fullscreen .plyr__captions{font-size:21px}.plyr:fullscreen .plyr__captions{font-size:21px}}.plyr:-webkit-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-webkit-full-screen video{height:100%}.plyr:-webkit-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-webkit-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative;top:50%;transform:translateY(-50%)}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-webkit-full-screen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-webkit-full-screen .plyr__captions{font-size:21px}}.plyr:-moz-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-moz-full-screen video{height:100%}.plyr:-moz-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-moz-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative;top:50%;transform:translateY(-50%)}.plyr:-moz-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-moz-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-moz-full-screen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-moz-full-screen .plyr__captions{font-size:21px}}.plyr:-ms-fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-ms-fullscreen video{height:100%}.plyr:-ms-fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:-ms-fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative;top:50%;transform:translateY(-50%)}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-ms-fullscreen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-ms-fullscreen .plyr__captions{font-size:21px}}.plyr--fullscreen-fallback{background:#000;border-radius:0!important;height:100%;margin:0;width:100%;bottom:0;left:0;position:fixed;right:0;top:0;z-index:10000000}.plyr--fullscreen-fallback video{height:100%}.plyr--fullscreen-fallback .plyr__video-wrapper{height:100%;position:static}.plyr--fullscreen-fallback.plyr--vimeo .plyr__video-wrapper{height:0;position:relative;top:50%;transform:translateY(-50%)}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen{display:block}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr--fullscreen-fallback.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr--fullscreen-fallback .plyr__captions{font-size:21px}}.plyr__ads{border-radius:inherit;bottom:0;cursor:pointer;left:0;overflow:hidden;position:absolute;right:0;top:0;z-index:-1}.plyr__ads>div,.plyr__ads>div iframe{height:100%;position:absolute;width:100%}.plyr__ads::after{background:rgba(35,41,47,.8);border-radius:2px;bottom:10px;color:#fff;content:attr(data-badge-text);font-size:11px;padding:2px 6px;pointer-events:none;position:absolute;right:10px;z-index:3}.plyr__ads::after:empty{display:none}.plyr__cues{background:currentColor;display:block;height:5px;left:0;margin:-2.5px 0 0;opacity:.8;position:absolute;top:50%;width:3px;z-index:3}.plyr__preview-thumb{background-color:rgba(255,255,255,.9);border-radius:3px;bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);margin-bottom:10px;opacity:0;padding:3px;pointer-events:none;position:absolute;transform:translate(0,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s .1s ease,opacity .2s .1s ease;z-index:2}.plyr__preview-thumb--is-shown{opacity:1;transform:translate(0,0) scale(1)}.plyr__preview-thumb::before{border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid rgba(255,255,255,.9);bottom:-4px;content:'';height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;z-index:2}.plyr__preview-thumb__image-container{background:#c1c9d1;border-radius:2px;overflow:hidden;position:relative;z-index:0}.plyr__preview-thumb__image-container img{height:100%;left:0;max-height:none;max-width:none;position:absolute;top:0;width:100%}.plyr__preview-thumb__time-container{bottom:6px;left:0;position:absolute;right:0;white-space:nowrap;z-index:3}.plyr__preview-thumb__time-container span{background-color:rgba(0,0,0,.55);border-radius:2px;color:#fff;font-size:14px;padding:3px 6px}.plyr__preview-scrubbing{bottom:0;filter:blur(1px);height:100%;left:0;margin:auto;opacity:0;overflow:hidden;position:absolute;right:0;top:0;transition:opacity .3s ease;width:100%;z-index:1}.plyr__preview-scrubbing--is-shown{opacity:1}.plyr__preview-scrubbing img{height:100%;left:0;max-height:none;max-width:none;object-fit:contain;position:absolute;top:0;width:100%}.plyr--no-transition{transition:none!important}.plyr__sr-only{clip:rect(1px,1px,1px,1px);overflow:hidden;border:0!important;height:1px!important;padding:0!important;position:absolute!important;width:1px!important}.plyr [hidden]{display:none!important}",map:void 0,media:void 0})}),l,void 0,!1,"data-v-91800632",!1,void 0,(function(e){return e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),e?("styles"in e||(e._styles=e._styles||{},Object.defineProperty(e,"styles",{enumerable:!0,get:()=>e._renderStyles(e._styles)}),e._renderStyles=e._renderStyles||c),(t,style)=>function(e,t,n){const r=t.media||"default",style=n._styles[r]||(n._styles[r]={ids:[],css:""});if(!style.ids.includes(e)){style.media=t.media,style.ids.push(e);let code=t.source;0,style.css+=code+"\n"}}(t,style,e)):()=>{}}),void 0);d.install=(e,t={})=>{t.plyr&&(d.props.options.default=()=>({...t.plyr})),t.emit&&(d.props.emit.default=()=>[...t.emit]),e.component(d.name,d)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(d),e.exports=d},128:function(e,t,n){"use strict";var r=n(4),o=n.n(r);"undefined"!=typeof window&&Promise.resolve().then((function(){return v}));var c={props:{options:{type:Object,default:function(){return{}}}},mounted:function(){this.create()},destroyed:function(){o()(this.$el).slick("unslick")},methods:{create:function(){var e=o()(this.$el);e.on("afterChange",this.onAfterChange),e.on("beforeChange",this.onBeforeChange),e.on("breakpoint",this.onBreakpoint),e.on("destroy",this.onDestroy),e.on("edge",this.onEdge),e.on("init",this.onInit),e.on("reInit",this.onReInit),e.on("setPosition",this.onSetPosition),e.on("swipe",this.onSwipe),e.on("lazyLoaded",this.onLazyLoaded),e.on("lazyLoadError",this.onLazyLoadError),e.slick(this.options)},destroy:function(){var e=o()(this.$el);e.off("afterChange",this.onAfterChange),e.off("beforeChange",this.onBeforeChange),e.off("breakpoint",this.onBreakpoint),e.off("destroy",this.onDestroy),e.off("edge",this.onEdge),e.off("init",this.onInit),e.off("reInit",this.onReInit),e.off("setPosition",this.onSetPosition),e.off("swipe",this.onSwipe),e.off("lazyLoaded",this.onLazyLoaded),e.off("lazyLoadError",this.onLazyLoadError),o()(this.$el).slick("unslick")},reSlick:function(){this.destroy(),this.create()},next:function(){o()(this.$el).slick("slickNext")},prev:function(){o()(this.$el).slick("slickPrev")},pause:function(){o()(this.$el).slick("slickPause")},play:function(){o()(this.$el).slick("slickPlay")},goTo:function(e,t){o()(this.$el).slick("slickGoTo",e,t)},currentSlide:function(){return o()(this.$el).slick("slickCurrentSlide")},add:function(element,e,t){o()(this.$el).slick("slickAdd",element,e,t)},remove:function(e,t){o()(this.$el).slick("slickRemove",e,t)},filter:function(e){o()(this.$el).slick("slickFilter",e)},unfilter:function(){o()(this.$el).slick("slickUnfilter")},getOption:function(option){o()(this.$el).slick("slickGetOption",option)},setOption:function(option,e,t){o()(this.$el).slick("slickSetOption",option,e,t)},setPosition:function(){o()(this.$el).slick("setPosition")},onAfterChange:function(e,t,n){this.$emit("afterChange",e,t,n)},onBeforeChange:function(e,t,n,r){this.$emit("beforeChange",e,t,n,r)},onBreakpoint:function(e,t,n){this.$emit("breakpoint",e,t,n)},onDestroy:function(e,t){this.$emit("destroy",e,t)},onEdge:function(e,t,n){this.$emit("edge",e,t,n)},onInit:function(e,t){this.$emit("init",e,t)},onReInit:function(e,t){this.$emit("reInit",e,t)},onSetPosition:function(e,t){this.$emit("setPosition",e,t)},onSwipe:function(e,t,n){this.$emit("swipe",e,t,n)},onLazyLoaded:function(e,t,image,n){this.$emit("lazyLoaded",e,t,image,n)},onLazyLoadError:function(e,t,image,n){this.$emit("lazyLoadError",e,t,image,n)}}},l=function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)};l._withStripped=!0;var template,h,d,f,component,m=(template={render:l,staticRenderFns:[]},d=void 0,f=!1,(component=("function"==typeof(h=c)?h.options:h)||{}).__file="/Users/staskjs/Projects/vue-slick/src/slickCarousel.vue",component.render||(component.render=template.render,component.staticRenderFns=template.staticRenderFns,component._compiled=!0,f&&(component.functional=!0)),component._scopeId=d,component);var y=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var n,r,c;e.exports=(n=o.a,r=window.Slick||{},(c=0,r=function(element,e){var t,r=this;r.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:n(element),appendDots:n(element),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,i){return n('<button type="button" />').text(i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},r.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},n.extend(r,r.initials),r.activeBreakpoint=null,r.animType=null,r.animProp=null,r.breakpoints=[],r.breakpointSettings=[],r.cssTransitions=!1,r.focussed=!1,r.interrupted=!1,r.hidden="hidden",r.paused=!0,r.positionProp=null,r.respondTo=null,r.rowCount=1,r.shouldClick=!0,r.$slider=n(element),r.$slidesCache=null,r.transformType=null,r.transitionType=null,r.visibilityChange="visibilitychange",r.windowWidth=0,r.windowTimer=null,t=n(element).data("slick")||{},r.options=n.extend({},r.defaults,e,t),r.currentSlide=r.options.initialSlide,r.originalSettings=r.options,void 0!==document.mozHidden?(r.hidden="mozHidden",r.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(r.hidden="webkitHidden",r.visibilityChange="webkitvisibilitychange"),r.autoPlay=n.proxy(r.autoPlay,r),r.autoPlayClear=n.proxy(r.autoPlayClear,r),r.autoPlayIterator=n.proxy(r.autoPlayIterator,r),r.changeSlide=n.proxy(r.changeSlide,r),r.clickHandler=n.proxy(r.clickHandler,r),r.selectHandler=n.proxy(r.selectHandler,r),r.setPosition=n.proxy(r.setPosition,r),r.swipeHandler=n.proxy(r.swipeHandler,r),r.dragHandler=n.proxy(r.dragHandler,r),r.keyHandler=n.proxy(r.keyHandler,r),r.instanceUid=c++,r.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,r.registerBreakpoints(),r.init(!0)}).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},r.prototype.addSlide=r.prototype.slickAdd=function(e,t,r){var o=this;if("boolean"==typeof t)r=t,t=null;else if(t<0||t>=o.slideCount)return!1;o.unload(),"number"==typeof t?0===t&&0===o.$slides.length?n(e).appendTo(o.$slideTrack):r?n(e).insertBefore(o.$slides.eq(t)):n(e).insertAfter(o.$slides.eq(t)):!0===r?n(e).prependTo(o.$slideTrack):n(e).appendTo(o.$slideTrack),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slides.each((function(e,element){n(element).attr("data-slick-index",e)})),o.$slidesCache=o.$slides,o.reinit()},r.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},r.prototype.animateSlide=function(e,t){var r={},o=this;o.animateHeight(),!0===o.options.rtl&&!1===o.options.vertical&&(e=-e),!1===o.transformsEnabled?!1===o.options.vertical?o.$slideTrack.animate({left:e},o.options.speed,o.options.easing,t):o.$slideTrack.animate({top:e},o.options.speed,o.options.easing,t):!1===o.cssTransitions?(!0===o.options.rtl&&(o.currentLeft=-o.currentLeft),n({animStart:o.currentLeft}).animate({animStart:e},{duration:o.options.speed,easing:o.options.easing,step:function(e){e=Math.ceil(e),!1===o.options.vertical?(r[o.animType]="translate("+e+"px, 0px)",o.$slideTrack.css(r)):(r[o.animType]="translate(0px,"+e+"px)",o.$slideTrack.css(r))},complete:function(){t&&t.call()}})):(o.applyTransition(),e=Math.ceil(e),!1===o.options.vertical?r[o.animType]="translate3d("+e+"px, 0px, 0px)":r[o.animType]="translate3d(0px,"+e+"px, 0px)",o.$slideTrack.css(r),t&&setTimeout((function(){o.disableTransition(),t.call()}),o.options.speed))},r.prototype.getNavTarget=function(){var e=this.options.asNavFor;return e&&null!==e&&(e=n(e).not(this.$slider)),e},r.prototype.asNavFor=function(e){var t=this.getNavTarget();null!==t&&"object"==typeof t&&t.each((function(){var t=n(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)}))},r.prototype.applyTransition=function(e){var t=this,n={};!1===t.options.fade?n[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:n[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},r.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},r.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},r.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(!1===e.options.infinite&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1==0&&(e.direction=1))),e.slideHandler(t))},r.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=n(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=n(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},r.prototype.buildDots=function(){var i,e,t=this;if(!0===t.options.dots&&t.slideCount>t.options.slidesToShow){for(t.$slider.addClass("slick-dotted"),e=n("<ul />").addClass(t.options.dotsClass),i=0;i<=t.getDotCount();i+=1)e.append(n("<li />").append(t.options.customPaging.call(this,t,i)));t.$dots=e.appendTo(t.options.appendDots),t.$dots.find("li").first().addClass("slick-active")}},r.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each((function(e,element){n(element).attr("data-slick-index",e).data("originalStyling",n(element).attr("style")||"")})),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?n('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0!==e.options.centerMode&&!0!==e.options.swipeToSlide||(e.options.slidesToScroll=1),n("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},r.prototype.buildRows=function(){var a,b,e,t,n,r,o,c=this;if(t=document.createDocumentFragment(),r=c.$slider.children(),c.options.rows>0){for(o=c.options.slidesPerRow*c.options.rows,n=Math.ceil(r.length/o),a=0;a<n;a++){var l=document.createElement("div");for(b=0;b<c.options.rows;b++){var h=document.createElement("div");for(e=0;e<c.options.slidesPerRow;e++){var d=a*o+(b*c.options.slidesPerRow+e);r.get(d)&&h.appendChild(r.get(d))}l.appendChild(h)}t.appendChild(l)}c.$slider.empty().append(t),c.$slider.children().children().children().css({width:100/c.options.slidesPerRow+"%",display:"inline-block"})}},r.prototype.checkResponsive=function(e,t){var r,o,c,l=this,h=!1,d=l.$slider.width(),f=window.innerWidth||n(window).width();if("window"===l.respondTo?c=f:"slider"===l.respondTo?c=d:"min"===l.respondTo&&(c=Math.min(f,d)),l.options.responsive&&l.options.responsive.length&&null!==l.options.responsive){for(r in o=null,l.breakpoints)l.breakpoints.hasOwnProperty(r)&&(!1===l.originalSettings.mobileFirst?c<l.breakpoints[r]&&(o=l.breakpoints[r]):c>l.breakpoints[r]&&(o=l.breakpoints[r]));null!==o?null!==l.activeBreakpoint?(o!==l.activeBreakpoint||t)&&(l.activeBreakpoint=o,"unslick"===l.breakpointSettings[o]?l.unslick(o):(l.options=n.extend({},l.originalSettings,l.breakpointSettings[o]),!0===e&&(l.currentSlide=l.options.initialSlide),l.refresh(e)),h=o):(l.activeBreakpoint=o,"unslick"===l.breakpointSettings[o]?l.unslick(o):(l.options=n.extend({},l.originalSettings,l.breakpointSettings[o]),!0===e&&(l.currentSlide=l.options.initialSlide),l.refresh(e)),h=o):null!==l.activeBreakpoint&&(l.activeBreakpoint=null,l.options=l.originalSettings,!0===e&&(l.currentSlide=l.options.initialSlide),l.refresh(e),h=o),e||!1===h||l.$slider.trigger("breakpoint",[l,h])}},r.prototype.changeSlide=function(e,t){var r,o,c=this,l=n(e.currentTarget);switch(l.is("a")&&e.preventDefault(),l.is("li")||(l=l.closest("li")),r=c.slideCount%c.options.slidesToScroll!=0?0:(c.slideCount-c.currentSlide)%c.options.slidesToScroll,e.data.message){case"previous":o=0===r?c.options.slidesToScroll:c.options.slidesToShow-r,c.slideCount>c.options.slidesToShow&&c.slideHandler(c.currentSlide-o,!1,t);break;case"next":o=0===r?c.options.slidesToScroll:r,c.slideCount>c.options.slidesToShow&&c.slideHandler(c.currentSlide+o,!1,t);break;case"index":var h=0===e.data.index?0:e.data.index||l.index()*c.options.slidesToScroll;c.slideHandler(c.checkNavigable(h),!1,t),l.children().trigger("focus");break;default:return}},r.prototype.checkNavigable=function(e){var t,n;if(n=0,e>(t=this.getNavigableIndexes())[t.length-1])e=t[t.length-1];else for(var r in t){if(e<t[r]){e=n;break}n=t[r]}return e},r.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(n("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",n.proxy(e.interrupt,e,!0)).off("mouseleave.slick",n.proxy(e.interrupt,e,!1)),!0===e.options.accessibility&&e.$dots.off("keydown.slick",e.keyHandler)),e.$slider.off("focus.slick blur.slick"),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow&&e.$prevArrow.off("keydown.slick",e.keyHandler),e.$nextArrow&&e.$nextArrow.off("keydown.slick",e.keyHandler))),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),n(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&n(e.$slideTrack).children().off("click.slick",e.selectHandler),n(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),n(window).off("resize.slick.slick-"+e.instanceUid,e.resize),n("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),n(window).off("load.slick.slick-"+e.instanceUid,e.setPosition)},r.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",n.proxy(e.interrupt,e,!0)),e.$list.off("mouseleave.slick",n.proxy(e.interrupt,e,!1))},r.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>0&&((e=t.$slides.children().children()).removeAttr("style"),t.$slider.empty().append(e))},r.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},r.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),n(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove()),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each((function(){n(this).attr("style",n(this).data("originalStyling"))})),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$slider.removeClass("slick-dotted"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},r.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",!1===t.options.fade?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},r.prototype.fadeSlide=function(e,t){var n=this;!1===n.cssTransitions?(n.$slides.eq(e).css({zIndex:n.options.zIndex}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:n.options.zIndex}),t&&setTimeout((function(){n.disableTransition(e),t.call()}),n.options.speed))},r.prototype.fadeSlideOut=function(e){var t=this;!1===t.cssTransitions?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},r.prototype.filterSlides=r.prototype.slickFilter=function(filter){var e=this;null!==filter&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(filter).appendTo(e.$slideTrack),e.reinit())},r.prototype.focusHandler=function(){var e=this;e.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",(function(t){t.stopImmediatePropagation();var r=n(this);setTimeout((function(){e.options.pauseOnFocus&&(e.focussed=r.is(":focus"),e.autoPlay())}),0)}))},r.prototype.getCurrent=r.prototype.slickCurrentSlide=function(){return this.currentSlide},r.prototype.getDotCount=function(){var e=this,t=0,n=0,r=0;if(!0===e.options.infinite)if(e.slideCount<=e.options.slidesToShow)++r;else for(;t<e.slideCount;)++r,t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)r=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++r,t=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else r=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return r-1},r.prototype.getLeft=function(e){var t,n,r,o,c=this,l=0;return c.slideOffset=0,n=c.$slides.first().outerHeight(!0),!0===c.options.infinite?(c.slideCount>c.options.slidesToShow&&(c.slideOffset=c.slideWidth*c.options.slidesToShow*-1,o=-1,!0===c.options.vertical&&!0===c.options.centerMode&&(2===c.options.slidesToShow?o=-1.5:1===c.options.slidesToShow&&(o=-2)),l=n*c.options.slidesToShow*o),c.slideCount%c.options.slidesToScroll!=0&&e+c.options.slidesToScroll>c.slideCount&&c.slideCount>c.options.slidesToShow&&(e>c.slideCount?(c.slideOffset=(c.options.slidesToShow-(e-c.slideCount))*c.slideWidth*-1,l=(c.options.slidesToShow-(e-c.slideCount))*n*-1):(c.slideOffset=c.slideCount%c.options.slidesToScroll*c.slideWidth*-1,l=c.slideCount%c.options.slidesToScroll*n*-1))):e+c.options.slidesToShow>c.slideCount&&(c.slideOffset=(e+c.options.slidesToShow-c.slideCount)*c.slideWidth,l=(e+c.options.slidesToShow-c.slideCount)*n),c.slideCount<=c.options.slidesToShow&&(c.slideOffset=0,l=0),!0===c.options.centerMode&&c.slideCount<=c.options.slidesToShow?c.slideOffset=c.slideWidth*Math.floor(c.options.slidesToShow)/2-c.slideWidth*c.slideCount/2:!0===c.options.centerMode&&!0===c.options.infinite?c.slideOffset+=c.slideWidth*Math.floor(c.options.slidesToShow/2)-c.slideWidth:!0===c.options.centerMode&&(c.slideOffset=0,c.slideOffset+=c.slideWidth*Math.floor(c.options.slidesToShow/2)),t=!1===c.options.vertical?e*c.slideWidth*-1+c.slideOffset:e*n*-1+l,!0===c.options.variableWidth&&(r=c.slideCount<=c.options.slidesToShow||!1===c.options.infinite?c.$slideTrack.children(".slick-slide").eq(e):c.$slideTrack.children(".slick-slide").eq(e+c.options.slidesToShow),t=!0===c.options.rtl?r[0]?-1*(c.$slideTrack.width()-r[0].offsetLeft-r.width()):0:r[0]?-1*r[0].offsetLeft:0,!0===c.options.centerMode&&(r=c.slideCount<=c.options.slidesToShow||!1===c.options.infinite?c.$slideTrack.children(".slick-slide").eq(e):c.$slideTrack.children(".slick-slide").eq(e+c.options.slidesToShow+1),t=!0===c.options.rtl?r[0]?-1*(c.$slideTrack.width()-r[0].offsetLeft-r.width()):0:r[0]?-1*r[0].offsetLeft:0,t+=(c.$list.width()-r.outerWidth())/2)),t},r.prototype.getOption=r.prototype.slickGetOption=function(option){return this.options[option]},r.prototype.getNavigableIndexes=function(){var e,t=this,n=0,r=0,o=[];for(!1===t.options.infinite?e=t.slideCount:(n=-1*t.options.slidesToScroll,r=-1*t.options.slidesToScroll,e=2*t.slideCount);n<e;)o.push(n),n=r+t.options.slidesToScroll,r+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return o},r.prototype.getSlick=function(){return this},r.prototype.getSlideCount=function(){var e,t,r=this;return t=!0===r.options.centerMode?r.slideWidth*Math.floor(r.options.slidesToShow/2):0,!0===r.options.swipeToSlide?(r.$slideTrack.find(".slick-slide").each((function(o,c){if(c.offsetLeft-t+n(c).outerWidth()/2>-1*r.swipeLeft)return e=c,!1})),Math.abs(n(e).attr("data-slick-index")-r.currentSlide)||1):r.options.slidesToScroll},r.prototype.goTo=r.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},r.prototype.init=function(e){var t=this;n(t.$slider).hasClass("slick-initialized")||(n(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots(),t.checkResponsive(!0),t.focusHandler()),e&&t.$slider.trigger("init",[t]),!0===t.options.accessibility&&t.initADA(),t.options.autoplay&&(t.paused=!1,t.autoPlay())},r.prototype.initADA=function(){var e=this,t=Math.ceil(e.slideCount/e.options.slidesToShow),r=e.getNavigableIndexes().filter((function(t){return t>=0&&t<e.slideCount}));e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(".slick-cloned")).each((function(i){var t=r.indexOf(i);if(n(this).attr({role:"tabpanel",id:"slick-slide"+e.instanceUid+i,tabindex:-1}),-1!==t){var o="slick-slide-control"+e.instanceUid+t;n("#"+o).length&&n(this).attr({"aria-describedby":o})}})),e.$dots.attr("role","tablist").find("li").each((function(i){var o=r[i];n(this).attr({role:"presentation"}),n(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+e.instanceUid+i,"aria-controls":"slick-slide"+e.instanceUid+o,"aria-label":i+1+" of "+t,"aria-selected":null,tabindex:"-1"})})).eq(e.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var i=e.currentSlide,o=i+e.options.slidesToShow;i<o;i++)e.options.focusOnChange?e.$slides.eq(i).attr({tabindex:"0"}):e.$slides.eq(i).removeAttr("tabindex");e.activateADA()},r.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},r.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&(n("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.accessibility&&e.$dots.on("keydown.slick",e.keyHandler)),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&e.slideCount>e.options.slidesToShow&&n("li",e.$dots).on("mouseenter.slick",n.proxy(e.interrupt,e,!0)).on("mouseleave.slick",n.proxy(e.interrupt,e,!1))},r.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on("mouseenter.slick",n.proxy(e.interrupt,e,!0)),e.$list.on("mouseleave.slick",n.proxy(e.interrupt,e,!1)))},r.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),n(document).on(e.visibilityChange,n.proxy(e.visibility,e)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&n(e.$slideTrack).children().on("click.slick",e.selectHandler),n(window).on("orientationchange.slick.slick-"+e.instanceUid,n.proxy(e.orientationChange,e)),n(window).on("resize.slick.slick-"+e.instanceUid,n.proxy(e.resize,e)),n("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),n(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),n(e.setPosition)},r.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},r.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&!0===t.options.accessibility?t.changeSlide({data:{message:!0===t.options.rtl?"next":"previous"}}):39===e.keyCode&&!0===t.options.accessibility&&t.changeSlide({data:{message:!0===t.options.rtl?"previous":"next"}}))},r.prototype.lazyLoad=function(){var e,t,r,o=this;function c(e){n("img[data-lazy]",e).each((function(){var image=n(this),e=n(this).attr("data-lazy"),t=n(this).attr("data-srcset"),r=n(this).attr("data-sizes")||o.$slider.attr("data-sizes"),c=document.createElement("img");c.onload=function(){image.animate({opacity:0},100,(function(){t&&(image.attr("srcset",t),r&&image.attr("sizes",r)),image.attr("src",e).animate({opacity:1},200,(function(){image.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")})),o.$slider.trigger("lazyLoaded",[o,image,e])}))},c.onerror=function(){image.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,image,e])},c.src=e}))}if(!0===o.options.centerMode?!0===o.options.infinite?r=(t=o.currentSlide+(o.options.slidesToShow/2+1))+o.options.slidesToShow+2:(t=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),r=o.options.slidesToShow/2+1+2+o.currentSlide):(t=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,r=Math.ceil(t+o.options.slidesToShow),!0===o.options.fade&&(t>0&&t--,r<=o.slideCount&&r++)),e=o.$slider.find(".slick-slide").slice(t,r),"anticipated"===o.options.lazyLoad)for(var l=t-1,h=r,d=o.$slider.find(".slick-slide"),i=0;i<o.options.slidesToScroll;i++)l<0&&(l=o.slideCount-1),e=(e=e.add(d.eq(l))).add(d.eq(h)),l--,h++;c(e),o.slideCount<=o.options.slidesToShow?c(o.$slider.find(".slick-slide")):o.currentSlide>=o.slideCount-o.options.slidesToShow?c(o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow)):0===o.currentSlide&&c(o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow))},r.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},r.prototype.next=r.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},r.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},r.prototype.pause=r.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},r.prototype.play=r.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},r.prototype.postSlide=function(e){var t=this;t.unslicked||(t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.slideCount>t.options.slidesToShow&&t.setPosition(),t.swipeLeft=null,t.options.autoplay&&t.autoPlay(),!0===t.options.accessibility&&(t.initADA(),t.options.focusOnChange&&n(t.$slides.get(t.currentSlide)).attr("tabindex",0).focus()))},r.prototype.prev=r.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},r.prototype.preventDefault=function(e){e.preventDefault()},r.prototype.progressiveLazyLoad=function(e){e=e||1;var image,t,r,o,c,l=this,h=n("img[data-lazy]",l.$slider);h.length?(image=h.first(),t=image.attr("data-lazy"),r=image.attr("data-srcset"),o=image.attr("data-sizes")||l.$slider.attr("data-sizes"),(c=document.createElement("img")).onload=function(){r&&(image.attr("srcset",r),o&&image.attr("sizes",o)),image.attr("src",t).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===l.options.adaptiveHeight&&l.setPosition(),l.$slider.trigger("lazyLoaded",[l,image,t]),l.progressiveLazyLoad()},c.onerror=function(){e<3?setTimeout((function(){l.progressiveLazyLoad(e+1)}),500):(image.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),l.$slider.trigger("lazyLoadError",[l,image,t]),l.progressiveLazyLoad())},c.src=t):l.$slider.trigger("allImagesLoaded",[l])},r.prototype.refresh=function(e){var t,r,o=this;r=o.slideCount-o.options.slidesToShow,!o.options.infinite&&o.currentSlide>r&&(o.currentSlide=r),o.slideCount<=o.options.slidesToShow&&(o.currentSlide=0),t=o.currentSlide,o.destroy(!0),n.extend(o,o.initials,{currentSlide:t}),o.init(),e||o.changeSlide({data:{message:"index",index:t}},!1)},r.prototype.registerBreakpoints=function(){var e,t,r,o=this,c=o.options.responsive||null;if("array"===n.type(c)&&c.length){for(e in o.respondTo=o.options.respondTo||"window",c)if(r=o.breakpoints.length-1,c.hasOwnProperty(e)){for(t=c[e].breakpoint;r>=0;)o.breakpoints[r]&&o.breakpoints[r]===t&&o.breakpoints.splice(r,1),r--;o.breakpoints.push(t),o.breakpointSettings[t]=c[e].settings}o.breakpoints.sort((function(a,b){return o.options.mobileFirst?a-b:b-a}))}},r.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&n(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},r.prototype.resize=function(){var e=this;n(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout((function(){e.windowWidth=n(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()}),50))},r.prototype.removeSlide=r.prototype.slickRemove=function(e,t,n){var r=this;if(e="boolean"==typeof e?!0===(t=e)?0:r.slideCount-1:!0===t?--e:e,r.slideCount<1||e<0||e>r.slideCount-1)return!1;r.unload(),!0===n?r.$slideTrack.children().remove():r.$slideTrack.children(this.options.slide).eq(e).remove(),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slidesCache=r.$slides,r.reinit()},r.prototype.setCSS=function(e){var t,n,r=this,o={};!0===r.options.rtl&&(e=-e),t="left"==r.positionProp?Math.ceil(e)+"px":"0px",n="top"==r.positionProp?Math.ceil(e)+"px":"0px",o[r.positionProp]=e,!1===r.transformsEnabled?r.$slideTrack.css(o):(o={},!1===r.cssTransitions?(o[r.animType]="translate("+t+", "+n+")",r.$slideTrack.css(o)):(o[r.animType]="translate3d("+t+", "+n+", 0px)",r.$slideTrack.css(o)))},r.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},r.prototype.setFade=function(){var e,t=this;t.$slides.each((function(r,element){e=t.slideWidth*r*-1,!0===t.options.rtl?n(element).css({position:"relative",right:e,top:0,zIndex:t.options.zIndex-2,opacity:0}):n(element).css({position:"relative",left:e,top:0,zIndex:t.options.zIndex-2,opacity:0})})),t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})},r.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},r.prototype.setOption=r.prototype.slickSetOption=function(){var e,t,option,r,o,c=this,l=!1;if("object"===n.type(arguments[0])?(option=arguments[0],l=arguments[1],o="multiple"):"string"===n.type(arguments[0])&&(option=arguments[0],r=arguments[1],l=arguments[2],"responsive"===arguments[0]&&"array"===n.type(arguments[1])?o="responsive":void 0!==arguments[1]&&(o="single")),"single"===o)c.options[option]=r;else if("multiple"===o)n.each(option,(function(e,t){c.options[e]=t}));else if("responsive"===o)for(t in r)if("array"!==n.type(c.options.responsive))c.options.responsive=[r[t]];else{for(e=c.options.responsive.length-1;e>=0;)c.options.responsive[e].breakpoint===r[t].breakpoint&&c.options.responsive.splice(e,1),e--;c.options.responsive.push(r[t])}l&&(c.unload(),c.reinit())},r.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),!1===e.options.fade?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},r.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||!0===e.options.useCSS&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&!1!==e.animType},r.prototype.setSlideClasses=function(e){var t,n,r,o,c=this;if(n=c.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),c.$slides.eq(e).addClass("slick-current"),!0===c.options.centerMode){var l=c.options.slidesToShow%2==0?1:0;t=Math.floor(c.options.slidesToShow/2),!0===c.options.infinite&&(e>=t&&e<=c.slideCount-1-t?c.$slides.slice(e-t+l,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(r=c.options.slidesToShow+e,n.slice(r-t+1+l,r+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?n.eq(n.length-1-c.options.slidesToShow).addClass("slick-center"):e===c.slideCount-1&&n.eq(c.options.slidesToShow).addClass("slick-center")),c.$slides.eq(e).addClass("slick-center")}else e>=0&&e<=c.slideCount-c.options.slidesToShow?c.$slides.slice(e,e+c.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=c.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(o=c.slideCount%c.options.slidesToShow,r=!0===c.options.infinite?c.options.slidesToShow+e:e,c.options.slidesToShow==c.options.slidesToScroll&&c.slideCount-e<c.options.slidesToShow?n.slice(r-(c.options.slidesToShow-o),r+o).addClass("slick-active").attr("aria-hidden","false"):n.slice(r,r+c.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==c.options.lazyLoad&&"anticipated"!==c.options.lazyLoad||c.lazyLoad()},r.prototype.setupInfinite=function(){var i,e,t,r=this;if(!0===r.options.fade&&(r.options.centerMode=!1),!0===r.options.infinite&&!1===r.options.fade&&(e=null,r.slideCount>r.options.slidesToShow)){for(t=!0===r.options.centerMode?r.options.slidesToShow+1:r.options.slidesToShow,i=r.slideCount;i>r.slideCount-t;i-=1)e=i-1,n(r.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e-r.slideCount).prependTo(r.$slideTrack).addClass("slick-cloned");for(i=0;i<t+r.slideCount;i+=1)e=i,n(r.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e+r.slideCount).appendTo(r.$slideTrack).addClass("slick-cloned");r.$slideTrack.find(".slick-cloned").find("[id]").each((function(){n(this).attr("id","")}))}},r.prototype.interrupt=function(e){e||this.autoPlay(),this.interrupted=e},r.prototype.selectHandler=function(e){var t=this,r=n(e.target).is(".slick-slide")?n(e.target):n(e.target).parents(".slick-slide"),o=parseInt(r.attr("data-slick-index"));o||(o=0),t.slideCount<=t.options.slidesToShow?t.slideHandler(o,!1,!0):t.slideHandler(o)},r.prototype.slideHandler=function(e,t,n){var r,o,c,l,h,d,f=this;if(t=t||!1,!(!0===f.animating&&!0===f.options.waitForAnimate||!0===f.options.fade&&f.currentSlide===e))if(!1===t&&f.asNavFor(e),r=e,h=f.getLeft(r),l=f.getLeft(f.currentSlide),f.currentLeft=null===f.swipeLeft?l:f.swipeLeft,!1===f.options.infinite&&!1===f.options.centerMode&&(e<0||e>f.getDotCount()*f.options.slidesToScroll))!1===f.options.fade&&(r=f.currentSlide,!0!==n&&f.slideCount>f.options.slidesToShow?f.animateSlide(l,(function(){f.postSlide(r)})):f.postSlide(r));else if(!1===f.options.infinite&&!0===f.options.centerMode&&(e<0||e>f.slideCount-f.options.slidesToScroll))!1===f.options.fade&&(r=f.currentSlide,!0!==n&&f.slideCount>f.options.slidesToShow?f.animateSlide(l,(function(){f.postSlide(r)})):f.postSlide(r));else{if(f.options.autoplay&&clearInterval(f.autoPlayTimer),o=r<0?f.slideCount%f.options.slidesToScroll!=0?f.slideCount-f.slideCount%f.options.slidesToScroll:f.slideCount+r:r>=f.slideCount?f.slideCount%f.options.slidesToScroll!=0?0:r-f.slideCount:r,f.animating=!0,f.$slider.trigger("beforeChange",[f,f.currentSlide,o]),c=f.currentSlide,f.currentSlide=o,f.setSlideClasses(f.currentSlide),f.options.asNavFor&&(d=(d=f.getNavTarget()).slick("getSlick")).slideCount<=d.options.slidesToShow&&d.setSlideClasses(f.currentSlide),f.updateDots(),f.updateArrows(),!0===f.options.fade)return!0!==n?(f.fadeSlideOut(c),f.fadeSlide(o,(function(){f.postSlide(o)}))):f.postSlide(o),void f.animateHeight();!0!==n&&f.slideCount>f.options.slidesToShow?f.animateSlide(h,(function(){f.postSlide(o)})):f.postSlide(o)}},r.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},r.prototype.swipeDirection=function(){var e,t,n,r,o=this;return e=o.touchObject.startX-o.touchObject.curX,t=o.touchObject.startY-o.touchObject.curY,n=Math.atan2(t,e),(r=Math.round(180*n/Math.PI))<0&&(r=360-Math.abs(r)),r<=45&&r>=0?!1===o.options.rtl?"left":"right":r<=360&&r>=315?!1===o.options.rtl?"left":"right":r>=135&&r<=225?!1===o.options.rtl?"right":"left":!0===o.options.verticalSwiping?r>=35&&r<=135?"down":"up":"vertical"},r.prototype.swipeEnd=function(e){var t,n,r=this;if(r.dragging=!1,r.swiping=!1,r.scrolling)return r.scrolling=!1,!1;if(r.interrupted=!1,r.shouldClick=!(r.touchObject.swipeLength>10),void 0===r.touchObject.curX)return!1;if(!0===r.touchObject.edgeHit&&r.$slider.trigger("edge",[r,r.swipeDirection()]),r.touchObject.swipeLength>=r.touchObject.minSwipe){switch(n=r.swipeDirection()){case"left":case"down":t=r.options.swipeToSlide?r.checkNavigable(r.currentSlide+r.getSlideCount()):r.currentSlide+r.getSlideCount(),r.currentDirection=0;break;case"right":case"up":t=r.options.swipeToSlide?r.checkNavigable(r.currentSlide-r.getSlideCount()):r.currentSlide-r.getSlideCount(),r.currentDirection=1}"vertical"!=n&&(r.slideHandler(t),r.touchObject={},r.$slider.trigger("swipe",[r,n]))}else r.touchObject.startX!==r.touchObject.curX&&(r.slideHandler(r.currentSlide),r.touchObject={})},r.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},r.prototype.swipeMove=function(e){var t,n,r,o,c,l,h=this;return c=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!h.dragging||h.scrolling||c&&1!==c.length)&&(t=h.getLeft(h.currentSlide),h.touchObject.curX=void 0!==c?c[0].pageX:e.clientX,h.touchObject.curY=void 0!==c?c[0].pageY:e.clientY,h.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(h.touchObject.curX-h.touchObject.startX,2))),l=Math.round(Math.sqrt(Math.pow(h.touchObject.curY-h.touchObject.startY,2))),!h.options.verticalSwiping&&!h.swiping&&l>4?(h.scrolling=!0,!1):(!0===h.options.verticalSwiping&&(h.touchObject.swipeLength=l),n=h.swipeDirection(),void 0!==e.originalEvent&&h.touchObject.swipeLength>4&&(h.swiping=!0,e.preventDefault()),o=(!1===h.options.rtl?1:-1)*(h.touchObject.curX>h.touchObject.startX?1:-1),!0===h.options.verticalSwiping&&(o=h.touchObject.curY>h.touchObject.startY?1:-1),r=h.touchObject.swipeLength,h.touchObject.edgeHit=!1,!1===h.options.infinite&&(0===h.currentSlide&&"right"===n||h.currentSlide>=h.getDotCount()&&"left"===n)&&(r=h.touchObject.swipeLength*h.options.edgeFriction,h.touchObject.edgeHit=!0),!1===h.options.vertical?h.swipeLeft=t+r*o:h.swipeLeft=t+r*(h.$list.height()/h.listWidth)*o,!0===h.options.verticalSwiping&&(h.swipeLeft=t+r*o),!0!==h.options.fade&&!1!==h.options.touchMove&&(!0===h.animating?(h.swipeLeft=null,!1):void h.setCSS(h.swipeLeft))))},r.prototype.swipeStart=function(e){var t,n=this;if(n.interrupted=!0,1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow)return n.touchObject={},!1;void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==t?t.pageX:e.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==t?t.pageY:e.clientY,n.dragging=!0},r.prototype.unfilterSlides=r.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},r.prototype.unload=function(){var e=this;n(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},r.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},r.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},r.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},r.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},void(n.fn.slick=function(){var i,e,t=this,n=arguments[0],o=Array.prototype.slice.call(arguments,1),c=t.length;for(i=0;i<c;i++)if("object"==typeof n||void 0===n?t[i].slick=new r(t[i],n):e=t[i].slick[n].apply(t[i].slick,o),void 0!==e)return e;return t}))})),v=Object.freeze({default:y,__moduleExports:y});t.a=m},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},174:function(e,t,n){},183:function(e,t,n){(function(e){!function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},r=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},o=function(e){return decodeURIComponent(String(e).replace(/\+/g," "))};(function(){try{var t=e.URLSearchParams;return"a=1"===new t("?a=1").toString()&&"function"==typeof t.prototype.set}catch(e){return!1}})()||function(){var o=function(e){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var t=typeof e;if("undefined"===t);else if("string"===t)""!==e&&this._fromString(e);else if(e instanceof o){var n=this;e.forEach((function(e,t){n.append(t,e)}))}else{if(null===e||"object"!==t)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(e))for(var i=0;i<e.length;i++){var r=e[i];if("[object Array]"!==Object.prototype.toString.call(r)&&2===r.length)throw new TypeError("Expected [string, any] as entry at index "+i+" of URLSearchParams's input");this.append(r[0],r[1])}else for(var c in e)e.hasOwnProperty(c)&&this.append(c,e[c])}},c=o.prototype;c.append=function(e,t){e in this._entries?this._entries[e].push(String(t)):this._entries[e]=[String(t)]},c.delete=function(e){delete this._entries[e]},c.get=function(e){return e in this._entries?this._entries[e][0]:null},c.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},c.has=function(e){return e in this._entries},c.set=function(e,t){this._entries[e]=[String(t)]},c.forEach=function(e,t){var n;for(var r in this._entries)if(this._entries.hasOwnProperty(r)){n=this._entries[r];for(var i=0;i<n.length;i++)e.call(t,n[i],r,this)}},c.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),n(e)},c.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),n(e)},c.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),n(e)},t&&(c[Symbol.iterator]=c.entries),c.toString=function(){var e=[];return this.forEach((function(t,n){e.push(r(n)+"="+r(t))})),e.join("&")},e.URLSearchParams=o}();var c=e.URLSearchParams.prototype;"function"!=typeof c.sort&&(c.sort=function(){var e=this,t=[];this.forEach((function(n,r){t.push([r,n]),e._entries||e.delete(r)})),t.sort((function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0})),e._entries&&(e._entries={});for(var i=0;i<t.length;i++)this.append(t[i][0],t[i][1])}),"function"!=typeof c._fromString&&Object.defineProperty(c,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(this._entries)this._entries={};else{var t=[];this.forEach((function(e,n){t.push(n)}));for(var i=0;i<t.length;i++)this.delete(t[i])}var n,r=(e=e.replace(/^\?/,"")).split("&");for(i=0;i<r.length;i++)n=r[i].split("="),this.append(o(n[0]),n.length>1?o(n[1]):"")}})}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(e){if(function(){try{var u=new e.URL("b","http://a");return u.pathname="c d","http://a/c%20d"===u.href&&u.searchParams}catch(e){return!1}}()||function(){var t=e.URL,n=function(t,base){"string"!=typeof t&&(t=String(t));var n,r=document;if(base&&(void 0===e.location||base!==e.location.href)){(n=(r=document.implementation.createHTMLDocument("")).createElement("base")).href=base,r.head.appendChild(n);try{if(0!==n.href.indexOf(base))throw new Error(n.href)}catch(e){throw new Error("URL unable to set base "+base+" due to "+e)}}var o=r.createElement("a");if(o.href=t,n&&(r.body.appendChild(o),o.href=o.href),":"===o.protocol||!/:/.test(o.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o});var c=new e.URLSearchParams(this.search),l=!0,h=!0,d=this;["append","delete","set"].forEach((function(e){var t=c[e];c[e]=function(){t.apply(c,arguments),l&&(h=!1,d.search=c.toString(),h=!0)}})),Object.defineProperty(this,"searchParams",{value:c,enumerable:!0});var f=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==f&&(f=this.search,h&&(l=!1,this.searchParams._fromString(this.search),l=!0))}})},r=n.prototype;["hash","host","hostname","port","protocol"].forEach((function(e){!function(e){Object.defineProperty(r,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})}(e)})),Object.defineProperty(r,"search",{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(r,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0}}),n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(n){setInterval((function(){e.location.origin=t()}),100)}}}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(this,n(25))},184:function(e,t,n){(function(t){"object"==typeof navigator&&(e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return i}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l={addCSS:!0,thumbWidth:15,watch:!0};function h(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var d,f,m,u=function(e){return null!=e?e.constructor:null},y=function(e,t){return Boolean(e&&t&&e instanceof t)},v=function(e){return u(e)===String},w=function(e){return Array.isArray(e)},g=function(e){return y(e,NodeList)},T=v,S=w,b=g,_=function(e){return y(e,Element)},k=function(e){return y(e,Event)},C=function(e){return function(e){return null==e}(e)||(v(e)||w(e)||g(e))&&!e.length||function(e){return u(e)===Object}(e)&&!Object.keys(e).length},E=function(){function t(i,n){e(this,t),_(i)?this.element=i:T(i)&&(this.element=document.querySelector(i)),_(this.element)&&C(this.element.rangeTouch)&&(this.config=Object.assign({},l,n),this.init())}return i(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){t.enabled&&(this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[i](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(e){if(!t.enabled||!k(e))return null;var i,n=e.target,a=e.changedTouches[0],s=parseFloat(n.getAttribute("min"))||0,r=parseFloat(n.getAttribute("max"))||100,o=parseFloat(n.getAttribute("step"))||1,c=r-s,l=n.getBoundingClientRect(),u=100/l.width*(this.config.thumbWidth/2)/100;return(i=100/l.width*(a.clientX-l.left))<0?i=0:i>100&&(i=100),i<50?i-=(100-2*i)*u:i>50&&(i+=2*(i-50)*u),s+function(e,t){if(t<1){var i=(n="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(n[1]?n[1].length:0)-(n[2]?+n[2]:0)):0;return parseFloat(e.toFixed(i))}var n;return Math.round(e/t)*t}(c*(i/100),o)}},{key:"set",value:function(e){t.enabled&&k(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(e,t){if(e&&t){var i=new Event(t);e.dispatchEvent(i)}}(e.target,"touchend"===e.type?"change":"input"))}}],[{key:"setup",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;if(C(e)||T(e)?n=Array.from(document.querySelectorAll(T(e)?e:'input[type="range"]')):_(e)?n=[e]:b(e)?n=Array.from(e):S(e)&&(n=e.filter(_)),C(n))return null;var a=Object.assign({},l,i);if(T(e)&&a.watch){var s=new MutationObserver((function(i){Array.from(i).forEach((function(i){Array.from(i.addedNodes).forEach((function(i){_(i)&&h(i,e)&&new t(i,a)}))}))}));s.observe(document.body,{childList:!0,subtree:!0})}return n.map((function(e){return new t(e,i)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),t}(),x=function(e){return null!=e?e.constructor:null},I=function(e,t){return Boolean(e&&t&&e instanceof t)},A=function(e){return null==e},D=function(e){return x(e)===Object},N=function(e){return x(e)===String},L=function(e){return Array.isArray(e)},O=function(e){return I(e,NodeList)},M=function(e){return A(e)||(N(e)||L(e)||O(e))&&!e.length||D(e)&&!Object.keys(e).length},q=A,P=D,R=function(e){return x(e)===Number&&!Number.isNaN(e)},F=N,V=function(e){return x(e)===Boolean},B=function(e){return x(e)===Function},j=L,U=O,H=function(e){return I(e,Element)},z=function(e){return I(e,Event)},W=function(e){return I(e,KeyboardEvent)},$=function(e){return I(e,TextTrack)||!A(e)&&N(e.kind)},K=function(e){if(I(e,window.URL))return!0;if(!N(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!M(new URL(t).hostname)}catch(e){return!1}},Q=M,G=(d=document.createElement("span"),f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},m=Object.keys(f).find((function(e){return void 0!==d.style[e]})),!!F(m)&&f[m]);function Y(e,t){setTimeout((function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var X={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function J(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function Z(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];if(!i.length)return e;var s=i.shift();return P(s)?(Object.keys(s).forEach((function(t){P(s[t])?(Object.keys(e).includes(t)||Object.assign(e,r({},t,{})),Z(e[t],s[t])):Object.assign(e,r({},t,s[t]))})),Z.apply(void 0,[e].concat(i))):e}function ee(e,t){var i=e.length?e:[e];Array.from(i).reverse().forEach((function(e,i){var n=i>0?t.cloneNode(!0):t,a=e.parentNode,s=e.nextSibling;n.appendChild(e),s?a.insertBefore(n,s):a.appendChild(n)}))}function te(e,t){H(e)&&!Q(t)&&Object.entries(t).filter((function(e){var t=o(e,2)[1];return!q(t)})).forEach((function(t){var i=o(t,2),n=i[0],a=i[1];return e.setAttribute(n,a)}))}function ne(e,t,i){var n=document.createElement(e);return P(t)&&te(n,t),F(i)&&(n.innerText=i),n}function re(e,t,i,n){H(t)&&t.appendChild(ne(e,i,n))}function ie(e){U(e)||j(e)?Array.from(e).forEach(ie):H(e)&&H(e.parentNode)&&e.parentNode.removeChild(e)}function oe(e){if(H(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}function ae(e,t){return H(t)&&H(t.parentNode)&&H(e)?(t.parentNode.replaceChild(e,t),e):null}function se(e,t){if(!F(e)||Q(e))return{};var i={},n=Z({},t);return e.split(",").forEach((function(e){var t=e.trim(),a=t.replace(".",""),s=t.replace(/[[\]]/g,"").split("="),r=o(s,1)[0],c=s.length>1?s[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":F(n.class)?i.class="".concat(n.class," ").concat(a):i.class=a;break;case"#":i.id=t.replace("#","");break;case"[":i[r]=c}})),Z(n,i)}function ue(e,t){if(H(e)){var i=t;V(i)||(i=!e.hidden),e.hidden=i}}function ce(e,t,i){if(U(e))return Array.from(e).map((function(e){return ce(e,t,i)}));if(H(e)){var n="toggle";return void 0!==i&&(n=i?"add":"remove"),e.classList[n](t),e.classList.contains(t)}return!1}function le(e,t){return H(e)&&e.classList.contains(t)}function he(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function de(e){return this.elements.container.querySelectorAll(e)}function pe(e){return this.elements.container.querySelector(e)}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];H(e)&&(e.focus({preventScroll:!0}),t&&ce(e,this.config.classNames.tabFocus))}var me,ye={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},ge={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,i){var n=X.isIPhone&&i&&ge.playsinline,a=ge[e]||"html5"!==t;return{api:a,ui:a&&ge.rangeInput&&("video"!==e||!X.isIPhone||n)}},pip:!(X.isIPhone||!B(ne("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||ne("video").disablePictureInPicture)),airplay:B(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(Q(e))return!1;var t=o(e.split("/"),1)[0],i=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(ye).includes(i)&&(i+='; codecs="'.concat(ye[e],'"'));try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(me=document.createElement("input"),me.type="range","range"===me.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==G,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},ve=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function be(e,t,i){var n=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e&&"addEventListener"in e&&!Q(t)&&B(i)){var o=t.split(" "),c=r;ve&&(c={passive:s,capture:r}),o.forEach((function(t){n&&n.eventListeners&&a&&n.eventListeners.push({element:e,type:t,callback:i,options:c}),e[a?"addEventListener":"removeEventListener"](t,i,c)}))}}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];be.call(this,e,t,i,!0,n,a)}function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];be.call(this,e,t,i,!1,n,a)}function Se(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=function r(){Te(e,i,r,a,s);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];n.apply(t,c)};be.call(this,e,i,r,!0,a,s)}function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(H(e)&&!Q(t)){var a=new CustomEvent(t,{bubbles:i,detail:s({},n,{plyr:this})});e.dispatchEvent(a)}}function ke(){this&&this.eventListeners&&(this.eventListeners.forEach((function(e){var t=e.element,i=e.type,n=e.callback,a=e.options;t.removeEventListener(i,n,a)})),this.eventListeners=[])}function Ce(){var e=this;return new Promise((function(t){return e.ready?setTimeout(t,0):we.call(e,e.elements.container,"ready",t)})).then((function(){}))}function Ee(e){return!!(j(e)||F(e)&&e.includes(":"))&&(j(e)?e:e.split(":")).map(Number).every(R)}function xe(e){if(!j(e)||!e.every(R))return null;var t=o(e,2),i=t[0],n=t[1],a=function e(t,i){return 0===i?t:e(i,t%i)}(i,n);return[i/a,n/a]}function Ie(e){var t=function(e){return Ee(e)?e.split(":").map(Number):null},i=t(e);if(null===i&&(i=t(this.config.ratio)),null===i&&!Q(this.embed)&&j(this.embed.ratio)&&(i=this.embed.ratio),null===i&&this.isHTML5){var n=this.media;i=xe([n.videoWidth,n.videoHeight])}return i}function Ae(e){if(!this.isVideo)return{};var t=this.elements.wrapper,i=Ie.call(this,e),n=o(j(i)?i:[0,0],2),a=100/n[0]*n[1];if(t.style.paddingBottom="".concat(a,"%"),this.isVimeo&&this.supported.ui){var s=(240-a)/4.8;this.media.style.transform="translateY(-".concat(s,"%)")}else this.isHTML5&&t.classList.toggle(this.config.classNames.videoFixedRatio,null!==i);return{padding:a,ratio:i}}var De={getSources:function(){var e=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(t){var i=t.getAttribute("type");return!!Q(i)||ge.mime.call(e,i)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:De.getSources.call(this).map((function(e){return Number(e.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var e=this;e.options.speed=e.config.speed.options,Q(this.config.ratio)||Ae.call(e),Object.defineProperty(e.media,"quality",{get:function(){var t=De.getSources.call(e).find((function(t){return t.getAttribute("src")===e.source}));return t&&Number(t.getAttribute("size"))},set:function(t){if(e.quality!==t){if(e.config.quality.forced&&B(e.config.quality.onChange))e.config.quality.onChange(t);else{var i=De.getSources.call(e).find((function(e){return Number(e.getAttribute("size"))===t}));if(!i)return;var n=e.media,a=n.currentTime,s=n.paused,r=n.preload,o=n.readyState,c=n.playbackRate;e.media.src=i.getAttribute("src"),("none"!==r||o)&&(e.once("loadedmetadata",(function(){e.speed=c,e.currentTime=a,s||e.play()})),e.media.load())}_e.call(e,e.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(ie(De.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Ne(e){return j(e)?e.filter((function(t,i){return e.indexOf(t)===i})):e}function Le(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Q(e)?e:e.toString().replace(/{(\d+)}/g,(function(e,t){return i[t].toString()}))}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),i.toString())}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toString();return t=Oe(t,"-"," "),t=Oe(t,"_"," "),Oe(t=Me(t)," ","")}function Re(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var Fe={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Q(e)||Q(t))return"";var i=J(t.i18n,e);if(Q(i))return Object.keys(Fe).includes(e)?Fe[e]:"";var n={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(n).forEach((function(e){var t=o(e,2),n=t[0],a=t[1];i=Oe(i,n,a)})),i},Ve=function(){function t(i){e(this,t),this.enabled=i.config.storage.enabled,this.key=i.config.storage.key}return i(t,[{key:"get",value:function(e){if(!t.supported||!this.enabled)return null;var i=window.localStorage.getItem(this.key);if(Q(i))return null;var n=JSON.parse(i);return F(e)&&e.length?n[e]:n}},{key:"set",value:function(e){if(t.supported&&this.enabled&&P(e)){var i=this.get();Q(i)&&(i={}),Z(i,e),window.localStorage.setItem(this.key,JSON.stringify(i))}}}],[{key:"supported",get:function(){try{return"localStorage"in window&&(window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0)}catch(e){return!1}}}]),t}();function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(i,n){try{var a=new XMLHttpRequest;if(!("withCredentials"in a))return;a.addEventListener("load",(function(){if("text"===t)try{i(JSON.parse(a.responseText))}catch(e){i(a.responseText)}else i(a.response)})),a.addEventListener("error",(function(){throw new Error(a.status)})),a.open("GET",e,!0),a.responseType=t,a.send()}catch(e){n(e)}}))}function je(e,t){if(F(e)){var i=F(t),n=function(){return null!==document.getElementById(t)},a=function(e,t){e.innerHTML=t,i&&n()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!n()){var s=Ve.supported,r=document.createElement("div");if(r.setAttribute("hidden",""),i&&r.setAttribute("id",t),s){var o=window.localStorage.getItem("".concat("cache","-").concat(t));if(null!==o){var c=JSON.parse(o);a(r,c.content)}}Be(e).then((function(e){Q(e)||(s&&window.localStorage.setItem("".concat("cache","-").concat(t),JSON.stringify({content:e})),a(r,e))})).catch((function(){}))}}}var Ue=function(e){return Math.trunc(e/60/60%60,10)},He=function(e){return Math.trunc(e/60%60,10)},ze=function(e){return Math.trunc(e%60,10)};function We(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!R(e))return We(void 0,t,i);var n=function(e){return"0".concat(e).slice(-2)},a=Ue(e),s=He(e),r=ze(e);return a=t||a>0?"".concat(a,":"):"","".concat(i&&e>0?"-":"").concat(a).concat(n(s),":").concat(n(r))}var $e={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||X.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=pe.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:de.call(this,this.config.selectors.buttons.play),pause:pe.call(this,this.config.selectors.buttons.pause),restart:pe.call(this,this.config.selectors.buttons.restart),rewind:pe.call(this,this.config.selectors.buttons.rewind),fastForward:pe.call(this,this.config.selectors.buttons.fastForward),mute:pe.call(this,this.config.selectors.buttons.mute),pip:pe.call(this,this.config.selectors.buttons.pip),airplay:pe.call(this,this.config.selectors.buttons.airplay),settings:pe.call(this,this.config.selectors.buttons.settings),captions:pe.call(this,this.config.selectors.buttons.captions),fullscreen:pe.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=pe.call(this,this.config.selectors.progress),this.elements.inputs={seek:pe.call(this,this.config.selectors.inputs.seek),volume:pe.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:pe.call(this,this.config.selectors.display.buffer),currentTime:pe.call(this,this.config.selectors.display.currentTime),duration:pe.call(this,this.config.selectors.display.duration)},H(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var i=$e.getIconUrl.call(this),n="".concat(i.cors?"":i.url,"#").concat(this.config.iconPrefix),a=document.createElementNS("http://www.w3.org/2000/svg","svg");te(a,Z(t,{role:"presentation",focusable:"false"}));var s=document.createElementNS("http://www.w3.org/2000/svg","use"),r="".concat(n,"-").concat(e);return"href"in s&&s.setAttributeNS("http://www.w3.org/1999/xlink","href",r),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r),a.appendChild(s),a},createLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=qe(e,this.config),n=s({},t,{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")});return ne("span",n,i)},createBadge:function(e){if(Q(e))return null;var t=ne("span",{class:this.config.classNames.menu.value});return t.appendChild(ne("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var i=this,n=Z({},t),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toString();return(t=Pe(t)).charAt(0).toLowerCase()+t.slice(1)}(e),s={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(e){Object.keys(n).includes(e)&&(s[e]=n[e],delete n[e])})),"button"!==s.element||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some((function(e){return e===i.config.classNames.control}))||Z(n,{class:"".concat(n.class," ").concat(this.config.classNames.control)}):n.class=this.config.classNames.control,e){case"play":s.toggle=!0,s.label="play",s.labelPressed="pause",s.icon="play",s.iconPressed="pause";break;case"mute":s.toggle=!0,s.label="mute",s.labelPressed="unmute",s.icon="volume",s.iconPressed="muted";break;case"captions":s.toggle=!0,s.label="enableCaptions",s.labelPressed="disableCaptions",s.icon="captions-off",s.iconPressed="captions-on";break;case"fullscreen":s.toggle=!0,s.label="enterFullscreen",s.labelPressed="exitFullscreen",s.icon="enter-fullscreen",s.iconPressed="exit-fullscreen";break;case"play-large":n.class+=" ".concat(this.config.classNames.control,"--overlaid"),a="play",s.label="play",s.icon="play";break;default:Q(s.label)&&(s.label=a),Q(s.icon)&&(s.icon=e)}var r=ne(s.element);return s.toggle?(r.appendChild($e.createIcon.call(this,s.iconPressed,{class:"icon--pressed"})),r.appendChild($e.createIcon.call(this,s.icon,{class:"icon--not-pressed"})),r.appendChild($e.createLabel.call(this,s.labelPressed,{class:"label--pressed"})),r.appendChild($e.createLabel.call(this,s.label,{class:"label--not-pressed"}))):(r.appendChild($e.createIcon.call(this,s.icon)),r.appendChild($e.createLabel.call(this,s.label))),Z(n,se(this.config.selectors.buttons[a],n)),te(r,n),"play"===a?(j(this.elements.buttons[a])||(this.elements.buttons[a]=[]),this.elements.buttons[a].push(r)):this.elements.buttons[a]=r,r},createRange:function(e,t){var i=ne("input",Z(se(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":qe(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=i,$e.updateRangeFill.call(this,i),E.setup(i),i},createProgress:function(e,t){var i=ne("progress",Z(se(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){i.appendChild(ne("span",null,"0"));var n={played:"played",buffer:"buffered"}[e],a=n?qe(n,this.config):"";i.innerText="% ".concat(a.toLowerCase())}return this.elements.display[e]=i,i},createTime:function(e,t){var i=se(this.config.selectors.display[e],t),n=ne("div",Z(i,{class:"".concat(i.class?i.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":qe(e,this.config)}),"00:00");return this.elements.display[e]=n,n},bindMenuItemShortcuts:function(e,t){var i=this;we.call(this,e,"keydown keyup",(function(n){if([32,38,39,40].includes(n.which)&&(n.preventDefault(),n.stopPropagation(),"keydown"!==n.type)){var a,s=he(e,'[role="menuitemradio"]');!s&&[32,39].includes(n.which)?$e.showMenuPanel.call(i,t,!0):32!==n.which&&(40===n.which||s&&39===n.which?(a=e.nextElementSibling,H(a)||(a=e.parentNode.firstElementChild)):(a=e.previousElementSibling,H(a)||(a=e.parentNode.lastElementChild)),fe.call(i,a,!0))}}),!1),we.call(this,e,"keyup",(function(e){13===e.which&&$e.focusFirstMenuItem.call(i,null,!0)}))},createMenuItem:function(e){var t=this,i=e.value,n=e.list,a=e.type,s=e.title,r=e.badge,o=void 0===r?null:r,c=e.checked,l=void 0!==c&&c,u=se(this.config.selectors.inputs[a]),h=ne("button",Z(u,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(u.class?u.class:"").trim(),"aria-checked":l,value:i})),d=ne("span");d.innerHTML=s,H(o)&&d.appendChild(o),h.appendChild(d),Object.defineProperty(h,"checked",{enumerable:!0,get:function(){return"true"===h.getAttribute("aria-checked")},set:function(e){e&&Array.from(h.parentNode.children).filter((function(e){return he(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),h.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(h,"click keyup",(function(e){if(!W(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),h.checked=!0,a){case"language":t.currentTrack=Number(i);break;case"quality":t.quality=i;break;case"speed":t.speed=parseFloat(i)}$e.showMenuPanel.call(t,"home",W(e))}}),a,!1),$e.bindMenuItemShortcuts.call(this,h,a),n.appendChild(h)},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!R(e))return e;var i=Ue(this.duration)>0;return We(e,i,t)},updateTimeDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];H(e)&&R(t)&&(e.innerText=$e.formatTime(t,i))},updateVolume:function(){this.supported.ui&&(H(this.elements.inputs.volume)&&$e.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),H(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;H(e)&&(e.value=t,$e.updateRangeFill.call(this,e))},updateProgress:function(e){var t=this;if(this.supported.ui&&z(e)){var i,n,a=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":i=this.currentTime,n=this.duration,a=0===i||0===n||Number.isNaN(i)||Number.isNaN(n)?0:(i/n*100).toFixed(2),"timeupdate"===e.type&&$e.setRange.call(this,this.elements.inputs.seek,a);break;case"playing":case"progress":!function(e,i){var n=R(i)?i:0,a=H(e)?e:t.elements.display.buffer;if(H(a)){a.value=n;var s=a.getElementsByTagName("span")[0];H(s)&&(s.childNodes[0].nodeValue=n)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=z(e)?e.target:e;if(H(t)&&"range"===t.getAttribute("type")){if(he(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var i=$e.formatTime(this.currentTime),n=$e.formatTime(this.duration),a=qe("seekLabel",this.config);t.setAttribute("aria-valuetext",a.replace("{currentTime}",i).replace("{duration}",n))}else if(he(t,this.config.selectors.inputs.volume)){var s=100*t.value;t.setAttribute("aria-valuenow",s),t.setAttribute("aria-valuetext","".concat(s.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);X.isWebkit&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"))}},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&H(this.elements.inputs.seek)&&H(this.elements.display.seekTooltip)&&0!==this.duration){var i="".concat(this.config.classNames.tooltip,"--visible"),n=function(e){return ce(t.elements.display.seekTooltip,i,e)};if(this.touch)n(!1);else{var a=0,s=this.elements.progress.getBoundingClientRect();if(z(e))a=100/s.width*(e.pageX-s.left);else{if(!le(this.elements.display.seekTooltip,i))return;a=parseFloat(this.elements.display.seekTooltip.style.left,10)}a<0?a=0:a>100&&(a=100),$e.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*a),this.elements.display.seekTooltip.style.left="".concat(a,"%"),z(e)&&["mouseenter","mouseleave"].includes(e.type)&&n("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!H(this.elements.display.duration)&&this.config.invertTime;$e.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||$e.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return ue(this.elements.display.currentTime,!0),void ue(this.elements.progress,!0);H(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=H(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&$e.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&$e.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),$e.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){ue(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,i){var n=this.elements.settings.panels[e],a=null,s=t;if("captions"===e)a=this.currentTrack;else{if(a=Q(i)?this[e]:i,Q(a)&&(a=this.config[e].default),!Q(this.options[e])&&!this.options[e].includes(a))return void this.debug.warn("Unsupported value of '".concat(a,"' for ").concat(e));if(!this.config[e].options.includes(a))return void this.debug.warn("Disabled value of '".concat(a,"' for ").concat(e))}if(H(s)||(s=n&&n.querySelector('[role="menu"]')),H(s)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=$e.getLabel.call(this,e,a);var r=s&&s.querySelector('[value="'.concat(a,'"]'));H(r)&&(r.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?qe("normal",this.config):"".concat(t,"&times;");case"quality":if(R(t)){var i=qe("qualityLabel.".concat(t),this.config);return i.length?i:"".concat(t,"p")}return Me(t);case"captions":return Ge.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t=this;if(H(this.elements.settings.panels.quality)){var i=this.elements.settings.panels.quality.querySelector('[role="menu"]');j(e)&&(this.options.quality=Ne(e).filter((function(e){return t.config.quality.options.includes(e)})));var n=!Q(this.options.quality)&&this.options.quality.length>1;if($e.toggleMenuButton.call(this,"quality",n),oe(i),$e.checkMenu.call(this),n){var a=function(e){var i=qe("qualityBadge.".concat(e),t.config);return i.length?$e.createBadge.call(t,i):null};this.options.quality.sort((function(e,i){var n=t.config.quality.options;return n.indexOf(e)>n.indexOf(i)?1:-1})).forEach((function(e){$e.createMenuItem.call(t,{value:e,list:i,type:"quality",title:$e.getLabel.call(t,"quality",e),badge:a(e)})})),$e.updateSetting.call(this,"quality",i)}}},setCaptionsMenu:function(){var e=this;if(H(this.elements.settings.panels.captions)){var t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=Ge.getTracks.call(this),n=Boolean(i.length);if($e.toggleMenuButton.call(this,"captions",n),oe(t),$e.checkMenu.call(this),n){var a=i.map((function(i,n){return{value:n,checked:e.captions.toggled&&e.currentTrack===n,title:Ge.getLabel.call(e,i),badge:i.language&&$e.createBadge.call(e,i.language.toUpperCase()),list:t,type:"language"}}));a.unshift({value:-1,checked:!this.captions.toggled,title:qe("disabled",this.config),list:t,type:"language"}),a.forEach($e.createMenuItem.bind(this)),$e.updateSetting.call(this,"captions",t)}}},setSpeedMenu:function(){var e=this;if(H(this.elements.settings.panels.speed)){var t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(t){return t>=e.minimumSpeed&&t<=e.maximumSpeed}));var i=!Q(this.options.speed)&&this.options.speed.length>1;$e.toggleMenuButton.call(this,"speed",i),oe(t),$e.checkMenu.call(this),i&&(this.options.speed.forEach((function(i){$e.createMenuItem.call(e,{value:i,list:t,type:"speed",title:$e.getLabel.call(e,"speed",i)})})),$e.updateSetting.call(this,"speed",t))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!Q(e)&&Object.values(e).some((function(e){return!e.hidden}));ue(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var i=e;H(i)||(i=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var n=i.querySelector('[role^="menuitem"]');fe.call(this,n,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,i=this.elements.buttons.settings;if(H(t)&&H(i)){var n=t.hidden,a=n;if(V(e))a=e;else if(W(e)&&27===e.which)a=!1;else if(z(e)){var s=B(e.composedPath)?e.composedPath()[0]:e.target,r=t.contains(s);if(r||!r&&e.target!==i&&a)return}i.setAttribute("aria-expanded",a),ue(t,!a),ce(this.elements.container,this.config.classNames.menu.open,a),a&&W(e)?$e.focusFirstMenuItem.call(this,null,!0):a||n||fe.call(this,i,W(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var i=t.scrollWidth,n=t.scrollHeight;return ie(t),{width:i,height:n}},showMenuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(t));if(H(n)){var a=n.parentNode,s=Array.from(a.children).find((function(e){return!e.hidden}));if(ge.transitions&&!ge.reducedMotion){a.style.width="".concat(s.scrollWidth,"px"),a.style.height="".concat(s.scrollHeight,"px");var r=$e.getMenuSize.call(this,n),o=function t(i){i.target===a&&["width","height"].includes(i.propertyName)&&(a.style.width="",a.style.height="",Te.call(e,a,G,t))};we.call(this,a,G,o),a.style.width="".concat(r.width,"px"),a.style.height="".concat(r.height,"px")}ue(s,!0),ue(n,!1),$e.focusFirstMenuItem.call(this,n,i)}},setDownloadUrl:function(){var e=this.elements.buttons.download;H(e)&&e.setAttribute("href",this.download)},create:function(e){var t=this,i=$e.bindMenuItemShortcuts,n=$e.createButton,a=$e.createProgress,s=$e.createRange,r=$e.createTime,o=$e.setQualityMenu,c=$e.setSpeedMenu,l=$e.showMenuPanel;this.elements.controls=null,this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));var u=ne("div",se(this.config.selectors.controls.wrapper));this.elements.controls=u;var h={class:"plyr__controls__item"};return Ne(this.config.controls).forEach((function(o){if("restart"===o&&u.appendChild(n.call(t,"restart",h)),"rewind"===o&&u.appendChild(n.call(t,"rewind",h)),"play"===o&&u.appendChild(n.call(t,"play",h)),"fast-forward"===o&&u.appendChild(n.call(t,"fast-forward",h)),"progress"===o){var c=ne("div",{class:"".concat(h.class," plyr__progress__container")}),d=ne("div",se(t.config.selectors.progress));if(d.appendChild(s.call(t,"seek",{id:"plyr-seek-".concat(e.id)})),d.appendChild(a.call(t,"buffer")),t.config.tooltips.seek){var p=ne("span",{class:t.config.classNames.tooltip},"00:00");d.appendChild(p),t.elements.display.seekTooltip=p}t.elements.progress=d,c.appendChild(t.elements.progress),u.appendChild(c)}if("current-time"===o&&u.appendChild(r.call(t,"currentTime",h)),"duration"===o&&u.appendChild(r.call(t,"duration",h)),"mute"===o||"volume"===o){var f=t.elements.volume;if(H(f)&&u.contains(f)||(f=ne("div",Z({},h,{class:"".concat(h.class," plyr__volume").trim()})),t.elements.volume=f,u.appendChild(f)),"mute"===o&&f.appendChild(n.call(t,"mute")),"volume"===o&&!X.isIos){var m={max:1,step:.05,value:t.config.volume};f.appendChild(s.call(t,"volume",Z(m,{id:"plyr-volume-".concat(e.id)})))}}if("captions"===o&&u.appendChild(n.call(t,"captions",h)),"settings"===o&&!Q(t.config.settings)){var g=ne("div",Z({},h,{class:"".concat(h.class," plyr__menu").trim(),hidden:""}));g.appendChild(n.call(t,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(e.id),"aria-expanded":!1}));var y=ne("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(e.id),hidden:""}),v=ne("div"),b=ne("div",{id:"plyr-settings-".concat(e.id,"-home")}),w=ne("div",{role:"menu"});b.appendChild(w),v.appendChild(b),t.elements.settings.panels.home=b,t.config.settings.forEach((function(n){var a=ne("button",Z(se(t.config.selectors.buttons.settings),{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));i.call(t,a,n),we.call(t,a,"click",(function(){l.call(t,n,!1)}));var s=ne("span",null,qe(n,t.config)),r=ne("span",{class:t.config.classNames.menu.value});r.innerHTML=e[n],s.appendChild(r),a.appendChild(s),w.appendChild(a);var o=ne("div",{id:"plyr-settings-".concat(e.id,"-").concat(n),hidden:""}),c=ne("button",{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--back")});c.appendChild(ne("span",{"aria-hidden":!0},qe(n,t.config))),c.appendChild(ne("span",{class:t.config.classNames.hidden},qe("menuBack",t.config))),we.call(t,o,"keydown",(function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),l.call(t,"home",!0))}),!1),we.call(t,c,"click",(function(){l.call(t,"home",!1)})),o.appendChild(c),o.appendChild(ne("div",{role:"menu"})),v.appendChild(o),t.elements.settings.buttons[n]=a,t.elements.settings.panels[n]=o})),y.appendChild(v),g.appendChild(y),u.appendChild(g),t.elements.settings.popup=y,t.elements.settings.menu=g}if("pip"===o&&ge.pip&&u.appendChild(n.call(t,"pip",h)),"airplay"===o&&ge.airplay&&u.appendChild(n.call(t,"airplay",h)),"download"===o){var T=Z({},h,{element:"a",href:t.download,target:"_blank"});t.isHTML5&&(T.download="");var S=t.config.urls.download;!K(S)&&t.isEmbed&&Z(T,{icon:"logo-".concat(t.provider),label:t.provider}),u.appendChild(n.call(t,"download",T))}"fullscreen"===o&&u.appendChild(n.call(t,"fullscreen",h))})),this.isHTML5&&o.call(this,De.getQualityOptions.call(this)),c.call(this),u},inject:function(){var e=this;if(this.config.loadSprite){var t=$e.getIconUrl.call(this);t.cors&&je(t.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var i=null;this.elements.controls=null;var n={id:this.id,seektime:this.config.seekTime,title:this.config.title},a=!0;B(this.config.controls)&&(this.config.controls=this.config.controls.call(this,n)),this.config.controls||(this.config.controls=[]),H(this.config.controls)||F(this.config.controls)?i=this.config.controls:(i=$e.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:Ge.getLabel.call(this)}),a=!1);var s,r=function(e){var t=e;return Object.entries(n).forEach((function(e){var i=o(e,2),n=i[0],a=i[1];t=Oe(t,"{".concat(n,"}"),a)})),t};if(a&&(F(this.config.controls)?i=r(i):H(i)&&(i.innerHTML=r(i.innerHTML))),F(this.config.selectors.controls.container)&&(s=document.querySelector(this.config.selectors.controls.container)),H(s)||(s=this.elements.container),s[H(i)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",i),H(this.elements.controls)||$e.findElements.call(this),!Q(this.elements.buttons)){var c=function(t){var i=e.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:function(){return le(t,i)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ce(t,i,e)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(e){j(e)||U(e)?Array.from(e).filter(Boolean).forEach(c):c(e)}))}if(X.isEdge&&Y(s),this.config.tooltips.controls){var l=this.config,u=l.classNames,h=l.selectors,d="".concat(h.controls.wrapper," ").concat(h.labels," .").concat(u.hidden),p=de.call(this,d);Array.from(p).forEach((function(t){ce(t,e.config.classNames.hidden,!1),ce(t,e.config.classNames.tooltip,!0)}))}}};function Ke(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e;if(t){var n=document.createElement("a");n.href=i,i=n.href}try{return new URL(i)}catch(e){return null}}function Qe(e){var t=new URLSearchParams;return P(e)&&Object.entries(e).forEach((function(e){var i=o(e,2),n=i[0],a=i[1];t.set(n,a)})),t}var Ge={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!ge.textTracks)j(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&$e.setCaptionsMenu.call(this);else{if(H(this.elements.captions)||(this.elements.captions=ne("div",se(this.config.selectors.captions)),function(e,t){H(e)&&H(t)&&t.parentNode.insertBefore(e,t.nextSibling)}(this.elements.captions,this.elements.wrapper)),X.isIE&&window.URL){var e=this.media.querySelectorAll("track");Array.from(e).forEach((function(e){var t=e.getAttribute("src"),i=Ke(t);null!==i&&i.hostname!==window.location.href.hostname&&["http:","https:"].includes(i.protocol)&&Be(t,"blob").then((function(t){e.setAttribute("src",window.URL.createObjectURL(t))})).catch((function(){ie(e)}))}))}var t=Ne((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(e){return e.split("-")[0]}))),i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===i&&(i=o(t,1)[0]);var n=this.storage.get("captions");if(V(n)||(n=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:n,language:i,languages:t}),this.isHTML5){var a=this.config.captions.update?"addtrack removetrack":"removetrack";we.call(this,this.media.textTracks,a,Ge.update.bind(this))}setTimeout(Ge.update.bind(this),0)}},update:function(){var e=this,t=Ge.getTracks.call(this,!0),i=this.captions,n=i.active,a=i.language,s=i.meta,r=i.currentTrackNode,o=Boolean(t.find((function(e){return e.language===a})));this.isHTML5&&this.isVideo&&t.filter((function(e){return!s.get(e)})).forEach((function(t){e.debug.log("Track added",t),s.set(t,{default:"showing"===t.mode}),t.mode="hidden",we.call(e,t,"cuechange",(function(){return Ge.updateCues.call(e)}))})),(o&&this.language!==a||!t.includes(r))&&(Ge.setLanguage.call(this,a),Ge.toggle.call(this,n&&o)),ce(this.elements.container,this.config.classNames.captions.enabled,!Q(t)),(this.config.controls||[]).includes("settings")&&this.config.settings.includes("captions")&&$e.setCaptionsMenu.call(this)},toggle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var i=this.captions.toggled,n=this.config.classNames.captions.active,a=q(e)?!i:e;if(a!==i){if(t||(this.captions.active=a,this.storage.set({captions:a})),!this.language&&a&&!t){var s=Ge.getTracks.call(this),r=Ge.findTrack.call(this,[this.captions.language].concat(c(this.captions.languages)),!0);return this.captions.language=r.language,void Ge.set.call(this,s.indexOf(r))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=a),ce(this.elements.container,n,a),this.captions.toggled=a,$e.updateSetting.call(this,"captions"),_e.call(this,this.media,a?"captionsenabled":"captionsdisabled")}}},set:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=Ge.getTracks.call(this);if(-1!==e)if(R(e))if(e in i){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var n=i[e],a=n||{},s=a.language;this.captions.currentTrackNode=n,$e.updateSetting.call(this,"captions"),t||(this.captions.language=s,this.storage.set({language:s})),this.isVimeo&&this.embed.enableTextTrack(s),_e.call(this,this.media,"languagechange")}Ge.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&Ge.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else Ge.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(F(e)){var i=e.toLowerCase();this.captions.language=i;var n=Ge.getTracks.call(this),a=Ge.findTrack.call(this,[i]);Ge.set.call(this,n.indexOf(a),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=Array.from((this.media||{}).textTracks||[]);return i.filter((function(i){return!e.isHTML5||t||e.captions.meta.has(i)})).filter((function(e){return["captions","subtitles"].includes(e.kind)}))},findTrack:function(e){var t,i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Ge.getTracks.call(this),s=function(e){return Number((i.captions.meta.get(e)||{}).default)},r=Array.from(a).sort((function(e,t){return s(t)-s(e)}));return e.every((function(e){return!(t=r.find((function(t){return t.language===e})))})),t||(n?r[0]:void 0)},getCurrentTrack:function(){return Ge.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!$(t)&&ge.textTracks&&this.captions.toggled&&(t=Ge.getCurrentTrack.call(this)),$(t)?Q(t.label)?Q(t.language)?qe("enabled",this.config):e.language.toUpperCase():t.label:qe("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(H(this.elements.captions))if(q(e)||Array.isArray(e)){var t=e;if(!t){var i=Ge.getCurrentTrack.call(this);t=Array.from((i||{}).activeCues||[]).map((function(e){return e.getCueAsHTML()})).map(Re)}var n=t.map((function(e){return e.trim()})).join("\n");if(n!==this.elements.captions.innerHTML){oe(this.elements.captions);var a=ne("span",se(this.config.selectors.caption));a.innerHTML=n,this.elements.captions.appendChild(a),_e.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},Ye={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.5.10/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/v2/video/{0}.json"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,sidedock:!1,controls:!1,referrerPolicy:null},youtube:{noCookie:!1,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}},Xe="picture-in-picture",Je={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Ze=function(){},et=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,t),this.enabled=window.console&&i,this.enabled&&this.log("Debugging enabled")}return i(t,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):Ze}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ze}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):Ze}}]),t}(),tt=function(){function t(i){var n=this;e(this,t),this.player=i,this.prefix=t.prefix,this.property=t.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===i.config.fullscreen.fallback,we.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){n.onChange()})),we.call(this.player,this.player.elements.container,"dblclick",(function(e){H(n.player.elements.controls)&&n.player.elements.controls.contains(e.target)||n.toggle()})),we.call(this,this.player.elements.container,"keydown",(function(e){return n.trapFocus(e)})),this.update()}return i(t,[{key:"onChange",value:function(){if(this.enabled){var e=this.player.elements.buttons.fullscreen;H(e)&&(e.pressed=this.active),_e.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0)}}},{key:"toggleFallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",ce(this.target,this.player.config.classNames.fullscreen.fallback,e),X.isIos){var t=document.head.querySelector('meta[name="viewport"]'),i="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");var n=F(t.content)&&t.content.includes(i);e?(this.cleanupViewport=!n,n||(t.content+=",".concat(i))):this.cleanupViewport&&(t.content=t.content.split(",").filter((function(e){return e.trim()!==i})).join(","))}this.onChange()}},{key:"trapFocus",value:function(e){if(!X.isIos&&this.active&&"Tab"===e.key&&9===e.keyCode){var t=document.activeElement,i=de.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),n=o(i,1)[0],a=i[i.length-1];t!==a||e.shiftKey?t===n&&e.shiftKey&&(a.focus(),e.preventDefault()):(n.focus(),e.preventDefault())}}},{key:"update",value:function(){var e;this.enabled?(e=this.forceFallback?"Fallback (forced)":t.native?"Native":"Fallback",this.player.debug.log("".concat(e," fullscreen enabled"))):this.player.debug.log("Fullscreen not supported and fallback disabled"),ce(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){this.enabled&&(X.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!t.native||this.forceFallback?this.toggleFallback(!0):this.prefix?Q(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen({navigationUI:"hide"}))}},{key:"exit",value:function(){if(this.enabled)if(X.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),this.player.play();else if(!t.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!Q(this.prefix)){var e="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(e).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"usingNative",get:function(){return t.native&&!this.forceFallback}},{key:"enabled",get:function(){return(t.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){return!!this.enabled&&(!t.native||this.forceFallback?le(this.target,this.player.config.classNames.fullscreen.fallback):(this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement)===this.target)}},{key:"target",get:function(){return X.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(B(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!B(document["".concat(t,"ExitFullscreen")])&&!B(document["".concat(t,"CancelFullScreen")])||(e=t,0))})),e}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),t}();function rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(i,n){var a=new Image,s=function(){delete a.onload,delete a.onerror,(a.naturalWidth>=t?i:n)(a)};Object.assign(a,{onload:s,onerror:s,src:e})}))}var nt={addStyleHook:function(){ce(this.elements.container,this.config.selectors.container.replace(".",""),!0),ce(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void nt.toggleNativeControls.call(this,!0);H(this.elements.controls)||($e.inject.call(this),this.listeners.controls()),nt.toggleNativeControls.call(this),this.isHTML5&&Ge.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,$e.updateVolume.call(this),$e.timeUpdate.call(this),nt.checkPlaying.call(this),ce(this.elements.container,this.config.classNames.pip.supported,ge.pip&&this.isHTML5&&this.isVideo),ce(this.elements.container,this.config.classNames.airplay.supported,ge.airplay&&this.isHTML5),ce(this.elements.container,this.config.classNames.isIos,X.isIos),ce(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){_e.call(e,e.media,"ready")}),0),nt.setTitle.call(this),this.poster&&nt.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&$e.durationUpdate.call(this)},setTitle:function(){var e=qe("play",this.config);if(F(this.config.title)&&!Q(this.config.title)&&(e+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(t){t.setAttribute("aria-label",e)})),this.isEmbed){var t=pe.call(this,"iframe");if(!H(t))return;var i=Q(this.config.title)?"video":this.config.title,n=qe("frameTitle",this.config);t.setAttribute("title",n.replace("{title}",i))}},togglePoster:function(e){ce(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("poster",e),this.isHTML5?Promise.resolve(e):Ce.call(this).then((function(){return rt(e)})).catch((function(i){throw e===t.poster&&nt.togglePoster.call(t,!1),i})).then((function(){if(e!==t.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(t.elements.poster.style,{backgroundImage:"url('".concat(e,"')"),backgroundSize:""}),nt.togglePoster.call(t,!0),e})))},checkPlaying:function(e){var t=this;ce(this.elements.container,this.config.classNames.playing,this.playing),ce(this.elements.container,this.config.classNames.paused,this.paused),ce(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(e){Object.assign(e,{pressed:t.playing}),e.setAttribute("aria-label",qe(t.playing?"pause":"play",t.config))})),z(e)&&"timeupdate"===e.type||nt.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){ce(t.elements.container,t.config.classNames.loading,t.loading),nt.toggleControls.call(t)}),this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||i))}}},it=function(){function t(i){e(this,t),this.player=i,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return i(t,[{key:"handleKey",value:function(e){var t=this.player,i=t.elements,n=e.keyCode?e.keyCode:e.which,a="keydown"===e.type,s=a&&n===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&R(n))if(a){var r=document.activeElement;if(H(r)){var o=t.config.selectors.editable;if(r!==i.inputs.seek&&he(r,o))return;if(32===e.which&&he(r,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(n)&&(e.preventDefault(),e.stopPropagation()),n){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:s||(t.currentTime=t.duration/10*(n-48));break;case 32:case 75:s||t.togglePlay();break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:s||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:s||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===n&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=n}else this.lastKey=null}},{key:"toggleMenu",value:function(e){$e.toggleMenu.call(this.player,e)}},{key:"firstTouch",value:function(){var e=this.player,t=e.elements;e.touch=!0,ce(t.container,e.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(e){var t=this.player,i=t.elements;if(clearTimeout(this.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);var n,a=e.timeStamp-this.lastKeyDown<=20;("focus"!==e.type||a)&&(n=t.config.classNames.tabFocus,ce(de.call(t,".".concat(n)),n,!1),this.focusTimer=setTimeout((function(){var e=document.activeElement;i.container.contains(e)&&ce(document.activeElement,t.config.classNames.tabFocus,!0)}),10))}}},{key:"global",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.player;t.config.keyboard.global&&be.call(t,window,"keydown keyup",this.handleKey,e,!1),be.call(t,document.body,"click",this.toggleMenu,e),Se.call(t,document.body,"touchstart",this.firstTouch),be.call(t,document.body,"keydown focus blur",this.setTabFocus,e,!1,!0)}},{key:"container",value:function(){var e=this.player,t=e.config,i=e.elements,n=e.timers;!t.keyboard.global&&t.keyboard.focused&&we.call(e,i.container,"keydown keyup",this.handleKey,!1),we.call(e,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(t){var a=i.controls;a&&"enterfullscreen"===t.type&&(a.pressed=!1,a.hover=!1);var s=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(nt.toggleControls.call(e,!0),s=e.touch?3e3:2e3),clearTimeout(n.controls),n.controls=setTimeout((function(){return nt.toggleControls.call(e,!1)}),s)}));var a=function(t){if(!t)return Ae.call(e);var n=i.container.getBoundingClientRect(),a=n.width,s=n.height;return Ae.call(e,"".concat(a,":").concat(s))},s=function(){clearTimeout(n.resized),n.resized=setTimeout(a,50)};we.call(e,i.container,"enterfullscreen exitfullscreen",(function(t){var n=e.fullscreen,r=n.target,c=n.usingNative;if(r===i.container&&(e.isEmbed||!Q(e.config.ratio))){var l="enterfullscreen"===t.type,u=a(l);u.padding,function(t,i,n){if(e.isVimeo){var a=e.elements.wrapper.firstChild,s=o(t,2)[1],r=o(Ie.call(e),2),c=r[0],l=r[1];a.style.maxWidth=n?"".concat(s/l*c,"px"):null,a.style.margin=n?"0 auto":null}}(u.ratio,0,l),c||(l?we.call(e,window,"resize",s):Te.call(e,window,"resize",s))}}))}},{key:"media",value:function(){var e=this,t=this.player,i=t.elements;if(we.call(t,t.media,"timeupdate seeking seeked",(function(e){return $e.timeUpdate.call(t,e)})),we.call(t,t.media,"durationchange loadeddata loadedmetadata",(function(e){return $e.durationUpdate.call(t,e)})),we.call(t,t.media,"ended",(function(){t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())})),we.call(t,t.media,"progress playing seeking seeked",(function(e){return $e.updateProgress.call(t,e)})),we.call(t,t.media,"volumechange",(function(e){return $e.updateVolume.call(t,e)})),we.call(t,t.media,"playing play pause ended emptied timeupdate",(function(e){return nt.checkPlaying.call(t,e)})),we.call(t,t.media,"waiting canplay seeked playing",(function(e){return nt.checkLoading.call(t,e)})),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){var n=pe.call(t,".".concat(t.config.classNames.video));if(!H(n))return;we.call(t,i.container,"click",(function(a){([i.container,n].includes(a.target)||n.contains(a.target))&&(t.touch&&t.config.hideControls||(t.ended?(e.proxy(a,t.restart,"restart"),e.proxy(a,t.play,"play")):e.proxy(a,t.togglePlay,"play")))}))}t.supported.ui&&t.config.disableContextMenu&&we.call(t,i.wrapper,"contextmenu",(function(e){e.preventDefault()}),!1),we.call(t,t.media,"volumechange",(function(){t.storage.set({volume:t.volume,muted:t.muted})})),we.call(t,t.media,"ratechange",(function(){$e.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})})),we.call(t,t.media,"qualitychange",(function(e){$e.updateSetting.call(t,"quality",null,e.detail.quality)})),we.call(t,t.media,"ready qualitychange",(function(){$e.setDownloadUrl.call(t)}));var a=t.config.events.concat(["keyup","keydown"]).join(" ");we.call(t,t.media,a,(function(e){var n=e.detail,a=void 0===n?{}:n;"error"===e.type&&(a=t.media.error),_e.call(t,i.container,e.type,!0,a)}))}},{key:"proxy",value:function(e,t,i){var n=this.player,a=n.config.listeners[i],s=!0;B(a)&&(s=a.call(n,e)),!1!==s&&B(t)&&t.call(n,e)}},{key:"bind",value:function(e,t,i,n){var a=this,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=this.player,o=r.config.listeners[n],c=B(o);we.call(r,e,t,(function(e){return a.proxy(e,i,n)}),s&&!c)}},{key:"controls",value:function(){var e=this,t=this.player,i=t.elements,n=X.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach((function(i){e.bind(i,"click",t.togglePlay,"play")})),this.bind(i.buttons.restart,"click",t.restart,"restart"),this.bind(i.buttons.rewind,"click",t.rewind,"rewind"),this.bind(i.buttons.fastForward,"click",t.forward,"fastForward"),this.bind(i.buttons.mute,"click",(function(){t.muted=!t.muted}),"mute"),this.bind(i.buttons.captions,"click",(function(){return t.toggleCaptions()})),this.bind(i.buttons.download,"click",(function(){_e.call(t,t.media,"download")}),"download"),this.bind(i.buttons.fullscreen,"click",(function(){t.fullscreen.toggle()}),"fullscreen"),this.bind(i.buttons.pip,"click",(function(){t.pip="toggle"}),"pip"),this.bind(i.buttons.airplay,"click",t.airplay,"airplay"),this.bind(i.buttons.settings,"click",(function(e){e.stopPropagation(),e.preventDefault(),$e.toggleMenu.call(t,e)}),null,!1),this.bind(i.buttons.settings,"keyup",(function(e){var i=e.which;[13,32].includes(i)&&(13!==i?(e.preventDefault(),e.stopPropagation(),$e.toggleMenu.call(t,e)):$e.focusFirstMenuItem.call(t,null,!0))}),null,!1),this.bind(i.settings.menu,"keydown",(function(e){27===e.which&&$e.toggleMenu.call(t,e)})),this.bind(i.inputs.seek,"mousedown mousemove",(function(e){var t=i.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);e.currentTarget.setAttribute("seek-value",n)})),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(e){var i=e.currentTarget,n=e.keyCode?e.keyCode:e.which;if(!W(e)||39===n||37===n){t.lastSeekTime=Date.now();var a=i.hasAttribute("play-on-seeked"),s=["mouseup","touchend","keyup"].includes(e.type);a&&s?(i.removeAttribute("play-on-seeked"),t.play()):!s&&t.playing&&(i.setAttribute("play-on-seeked",""),t.pause())}})),X.isIos){var a=de.call(t,'input[type="range"]');Array.from(a).forEach((function(t){return e.bind(t,n,(function(e){return Y(e.target)}))}))}this.bind(i.inputs.seek,n,(function(e){var i=e.currentTarget,n=i.getAttribute("seek-value");Q(n)&&(n=i.value),i.removeAttribute("seek-value"),t.currentTime=n/i.max*t.duration}),"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",(function(e){return $e.updateSeekTooltip.call(t,e)})),this.bind(i.progress,"mousemove touchmove",(function(e){var i=t.previewThumbnails;i&&i.loaded&&i.startMove(e)})),this.bind(i.progress,"mouseleave touchend click",(function(){var e=t.previewThumbnails;e&&e.loaded&&e.endMove(!1,!0)})),this.bind(i.progress,"mousedown touchstart",(function(e){var i=t.previewThumbnails;i&&i.loaded&&i.startScrubbing(e)})),this.bind(i.progress,"mouseup touchend",(function(e){var i=t.previewThumbnails;i&&i.loaded&&i.endScrubbing(e)})),X.isWebkit&&Array.from(de.call(t,'input[type="range"]')).forEach((function(i){e.bind(i,"input",(function(e){return $e.updateRangeFill.call(t,e.target)}))})),t.config.toggleInvert&&!H(i.display.duration)&&this.bind(i.display.currentTime,"click",(function(){0!==t.currentTime&&(t.config.invertTime=!t.config.invertTime,$e.timeUpdate.call(t))})),this.bind(i.inputs.volume,n,(function(e){t.volume=e.target.value}),"volume"),this.bind(i.controls,"mouseenter mouseleave",(function(e){i.controls.hover=!t.touch&&"mouseenter"===e.type})),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){i.controls.pressed=["mousedown","touchstart"].includes(e.type)})),this.bind(i.controls,"focusin",(function(){var n=t.config,a=t.timers;ce(i.controls,n.classNames.noTransition,!0),nt.toggleControls.call(t,!0),setTimeout((function(){ce(i.controls,n.classNames.noTransition,!1)}),0);var s=e.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout((function(){return nt.toggleControls.call(t,!1)}),s)})),this.bind(i.inputs.volume,"wheel",(function(e){var i=e.webkitDirectionInvertedFromDevice,n=o([e.deltaX,-e.deltaY].map((function(e){return i?-e:e})),2),a=n[0],s=n[1],r=Math.sign(Math.abs(a)>Math.abs(s)?a:s);t.increaseVolume(r/50);var c=t.media.volume;(1===r&&c<1||-1===r&&c>0)&&e.preventDefault()}),"volume",!1)}}]),t}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var ot=function(e,t){return function(e,t){e.exports=function(){var e=function(){},t={},i={},n={};function a(e,t){if(e){var a=n[e];if(i[e]=t,a)for(;a.length;)a[0](e,t),a.splice(0,1)}}function s(t,i){t.call&&(t={success:t}),i.length?(t.error||e)(i):(t.success||e)(t)}function r(t,i,n,a){var s,o,c=document,l=n.async,u=(n.numRetries||0)+1,h=n.before||e,d=t.replace(/[\?|#].*$/,""),p=t.replace(/^(css|img)!/,"");a=a||0,/(^css!|\.css$)/.test(d)?((o=c.createElement("link")).rel="stylesheet",o.href=p,(s="hideFocus"in o)&&o.relList&&(s=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(d)?(o=c.createElement("img")).src=p:((o=c.createElement("script")).src=t,o.async=void 0===l||l),o.onload=o.onerror=o.onbeforeload=function(e){var c=e.type[0];if(s)try{o.sheet.cssText.length||(c="e")}catch(e){18!=e.code&&(c="e")}if("e"==c){if((a+=1)<u)return r(t,i,n,a)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";i(t,c,e.defaultPrevented)},!1!==h(t,o)&&c.head.appendChild(o)}function o(e,i,n){var o,c;if(i&&i.trim&&(o=i),c=(o?n:i)||{},o){if(o in t)throw"LoadJS";t[o]=!0}function l(t,i){!function(e,t,i){var n,a,s=(e=e.push?e:[e]).length,o=s,c=[];for(n=function(e,i,n){if("e"==i&&c.push(e),"b"==i){if(!n)return;c.push(e)}--s||t(c)},a=0;a<o;a++)r(e[a],n,i)}(e,(function(e){s(c,e),t&&s({success:t,error:i},e),a(o,e)}),c)}if(c.returnPromise)return new Promise(l);l()}return o.ready=function(e,t){return function(e,t){e=e.push?e:[e];var a,s,r,o=[],c=e.length,l=c;for(a=function(e,i){i.length&&o.push(e),--l||t(o)};c--;)s=e[c],(r=i[s])?a(s,r):(n[s]=n[s]||[]).push(a)}(e,(function(e){s(t,e)})),o},o.done=function(e){a(e,[])},o.reset=function(){t={},i={},n={}},o.isDefined=function(e){return e in t},o}()}(t={exports:{}}),t.exports}();function at(e){return new Promise((function(t,i){ot(e,{success:t,error:i})}))}function dt(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,_e.call(this,this.media,e?"play":"pause"))}var st={setup:function(){var e=this;ce(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Ae.call(e),P(window.Vimeo)?st.ready.call(e):at(e.config.urls.vimeo.sdk).then((function(){st.ready.call(e)})).catch((function(t){e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready:function(){var e=this,t=this,i=t.config.vimeo,n=Qe(Z({},{loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},i)),a=t.media.getAttribute("src");Q(a)&&(a=t.media.getAttribute(t.config.attributes.embed.id));var s,r=Q(s=a)?null:R(Number(s))?s:s.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:s,c=ne("iframe"),l=Le(t.config.urls.vimeo.iframe,r,n);c.setAttribute("src",l),c.setAttribute("allowfullscreen",""),c.setAttribute("allowtransparency",""),c.setAttribute("allow","autoplay"),Q(i.referrerPolicy)||c.setAttribute("referrerPolicy",i.referrerPolicy);var u=ne("div",{poster:t.poster,class:t.config.classNames.embedContainer});u.appendChild(c),t.media=ae(u,t.media),Be(Le(t.config.urls.vimeo.api,r),"json").then((function(e){if(!Q(e)){var i=new URL(e[0].thumbnail_large);i.pathname="".concat(i.pathname.split("_")[0],".jpg"),nt.setPoster.call(t,i.href).catch((function(){}))}})),t.embed=new window.Vimeo.Player(c,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=function(){return dt.call(t,!0),t.embed.play()},t.media.pause=function(){return dt.call(t,!1),t.embed.pause()},t.media.stop=function(){t.pause(),t.currentTime=0};var h=t.media.currentTime;Object.defineProperty(t.media,"currentTime",{get:function(){return h},set:function(e){var i=t.embed,n=t.media,a=t.paused,s=t.volume,r=a&&!i.hasPlayed;n.seeking=!0,_e.call(t,n,"seeking"),Promise.resolve(r&&i.setVolume(0)).then((function(){return i.setCurrentTime(e)})).then((function(){return r&&i.pause()})).then((function(){return r&&i.setVolume(s)})).catch((function(){}))}});var d=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:function(){return d},set:function(e){t.embed.setPlaybackRate(e).then((function(){d=e,_e.call(t,t.media,"ratechange")}))}});var p=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return p},set:function(e){t.embed.setVolume(e).then((function(){p=e,_e.call(t,t.media,"volumechange")}))}});var f=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return f},set:function(e){var i=!!V(e)&&e;t.embed.setVolume(i?0:t.config.volume).then((function(){f=i,_e.call(t,t.media,"volumechange")}))}});var m,g=t.config.loop;Object.defineProperty(t.media,"loop",{get:function(){return g},set:function(e){var i=V(e)?e:t.config.loop.active;t.embed.setLoop(i).then((function(){g=i}))}}),t.embed.getVideoUrl().then((function(e){m=e,$e.setDownloadUrl.call(t)})).catch((function(t){e.debug.warn(t)})),Object.defineProperty(t.media,"currentSrc",{get:function(){return m}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then((function(i){var n=o(i,2),a=n[0],s=n[1];t.embed.ratio=[a,s],Ae.call(e)})),t.embed.setAutopause(t.config.autopause).then((function(e){t.config.autopause=e})),t.embed.getVideoTitle().then((function(i){t.config.title=i,nt.setTitle.call(e)})),t.embed.getCurrentTime().then((function(e){h=e,_e.call(t,t.media,"timeupdate")})),t.embed.getDuration().then((function(e){t.media.duration=e,_e.call(t,t.media,"durationchange")})),t.embed.getTextTracks().then((function(e){t.media.textTracks=e,Ge.setup.call(t)})),t.embed.on("cuechange",(function(e){var i=e.cues,n=(void 0===i?[]:i).map((function(e){return function(e){var t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.innerHTML=e,t.firstChild.innerText}(e.text)}));Ge.updateCues.call(t,n)})),t.embed.on("loaded",(function(){t.embed.getPaused().then((function(e){dt.call(t,!e),e||_e.call(t,t.media,"playing")})),H(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)})),t.embed.on("bufferstart",(function(){_e.call(t,t.media,"waiting")})),t.embed.on("bufferend",(function(){_e.call(t,t.media,"playing")})),t.embed.on("play",(function(){dt.call(t,!0),_e.call(t,t.media,"playing")})),t.embed.on("pause",(function(){dt.call(t,!1)})),t.embed.on("timeupdate",(function(e){t.media.seeking=!1,h=e.seconds,_e.call(t,t.media,"timeupdate")})),t.embed.on("progress",(function(e){t.media.buffered=e.percent,_e.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&_e.call(t,t.media,"canplaythrough"),t.embed.getDuration().then((function(e){e!==t.media.duration&&(t.media.duration=e,_e.call(t,t.media,"durationchange"))}))})),t.embed.on("seeked",(function(){t.media.seeking=!1,_e.call(t,t.media,"seeked")})),t.embed.on("ended",(function(){t.media.paused=!0,_e.call(t,t.media,"ended")})),t.embed.on("error",(function(e){t.media.error=e,_e.call(t,t.media,"error")})),setTimeout((function(){return nt.build.call(t)}),0)}};function ut(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,_e.call(this,this.media,e?"play":"pause"))}function ct(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var lt,ht={setup:function(){var e=this;if(ce(this.elements.wrapper,this.config.classNames.embed,!0),P(window.YT)&&B(window.YT.Player))ht.ready.call(this);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){B(t)&&t(),ht.ready.call(e)},at(this.config.urls.youtube.sdk).catch((function(t){e.debug.warn("YouTube API failed to load",t)}))}},getTitle:function(e){var t=this;Be(Le(this.config.urls.youtube.api,e)).then((function(e){if(P(e)){var i=e.title,n=e.height,a=e.width;t.config.title=i,nt.setTitle.call(t),t.embed.ratio=[a,n]}Ae.call(t)})).catch((function(){Ae.call(t)}))},ready:function(){var e=this,t=e.media&&e.media.getAttribute("id");if(Q(t)||!t.startsWith("youtube-")){var i=e.media.getAttribute("src");Q(i)&&(i=e.media.getAttribute(this.config.attributes.embed.id));var n,a,s=Q(n=i)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n,r=(a=e.provider,"".concat(a,"-").concat(Math.floor(1e4*Math.random()))),o=ne("div",{id:r,poster:e.poster});e.media=ae(o,e.media);var c=function(e){return"https://i.ytimg.com/vi/".concat(s,"/").concat(e,"default.jpg")};rt(c("maxres"),121).catch((function(){return rt(c("sd"),121)})).catch((function(){return rt(c("hq"))})).then((function(t){return nt.setPoster.call(e,t.src)})).then((function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((function(){}));var l=e.config.youtube;e.embed=new window.YT.Player(r,{videoId:s,host:ct(l),playerVars:Z({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},l),events:{onError:function(t){if(!e.media.error){var i=t.data,n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[i]||"An unknown error occured";e.media.error={code:i,message:n},_e.call(e,e.media,"error")}},onPlaybackRateChange:function(t){var i=t.target;e.media.playbackRate=i.getPlaybackRate(),_e.call(e,e.media,"ratechange")},onReady:function(t){if(!B(e.media.play)){var i=t.target;ht.getTitle.call(e,s),e.media.play=function(){ut.call(e,!0),i.playVideo()},e.media.pause=function(){ut.call(e,!1),i.pauseVideo()},e.media.stop=function(){i.stopVideo()},e.media.duration=i.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(i.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,_e.call(e,e.media,"seeking"),i.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return i.getPlaybackRate()},set:function(e){i.setPlaybackRate(e)}});var n=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return n},set:function(t){n=t,i.setVolume(100*n),_e.call(e,e.media,"volumechange")}});var a=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return a},set:function(t){var n=V(t)?t:a;a=n,i[n?"mute":"unMute"](),_e.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return i.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}});var r=i.getAvailablePlaybackRates();e.options.speed=r.filter((function(t){return e.config.speed.options.includes(t)})),e.supported.ui&&e.media.setAttribute("tabindex",-1),_e.call(e,e.media,"timeupdate"),_e.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((function(){e.media.buffered=i.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&_e.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),_e.call(e,e.media,"canplaythrough"))}),200),setTimeout((function(){return nt.build.call(e)}),50)}},onStateChange:function(t){var i=t.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(t.data)&&(e.media.seeking=!1,_e.call(e,e.media,"seeked")),t.data){case-1:_e.call(e,e.media,"timeupdate"),e.media.buffered=i.getVideoLoadedFraction(),_e.call(e,e.media,"progress");break;case 0:ut.call(e,!1),e.media.loop?(i.stopVideo(),i.playVideo()):_e.call(e,e.media,"ended");break;case 1:e.config.autoplay||!e.media.paused||e.embed.hasPlayed?(ut.call(e,!0),_e.call(e,e.media,"playing"),e.timers.playing=setInterval((function(){_e.call(e,e.media,"timeupdate")}),50),e.media.duration!==i.getDuration()&&(e.media.duration=i.getDuration(),_e.call(e,e.media,"durationchange"))):e.media.pause();break;case 2:e.muted||e.embed.unMute(),ut.call(e,!1);break;case 3:_e.call(e,e.media,"waiting")}_e.call(e,e.elements.container,"statechange",!1,{code:t.data})}}})}}},pt={setup:function(){this.media?(ce(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ce(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ce(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=ne("div",{class:this.config.classNames.video}),ee(this.media,this.elements.wrapper),this.isEmbed&&(this.elements.poster=ne("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster))),this.isHTML5?De.setup.call(this):this.isYouTube?ht.setup.call(this):this.isVimeo&&st.setup.call(this)):this.debug.warn("No media element found!")}},ft=function(){function t(i){var n=this;e(this,t),this.player=i,this.config=i.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(e,t){n.on("loaded",e),n.on("error",t)})),this.load()}return i(t,[{key:"load",value:function(){var e=this;this.enabled&&(P(window.google)&&P(window.google.ima)?this.ready():at(this.player.config.urls.googleIMA.sdk).then((function(){e.ready()})).catch((function(){e.trigger("error",new Error("Google IMA SDK failed to load"))})))}},{key:"ready",value:function(){var e,t=this;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((function(){t.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){this.elements.container=ne("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.requestAds()}},{key:"requestAds",value:function(){var e=this,t=this.player.elements.container;try{this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){return e.onAdsManagerLoaded(t)}),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return e.onAdError(t)}),!1);var i=new google.ima.AdsRequest;i.adTagUrl=this.tagUrl,i.linearAdSlotWidth=t.offsetWidth,i.linearAdSlotHeight=t.offsetHeight,i.nonLinearAdSlotWidth=t.offsetWidth,i.nonLinearAdSlotHeight=t.offsetHeight,i.forceNonLinearFullSlot=!1,i.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(i)}catch(e){this.onAdError(e)}}},{key:"pollCountdown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");var i=function(){var t=We(Math.max(e.manager.getRemainingTime(),0)),i="".concat(qe("advertisement",e.player.config)," - ").concat(t);e.elements.container.setAttribute("data-badge-text",i)};this.countdownTimer=setInterval(i,100)}},{key:"onAdsManagerLoaded",value:function(e){var t=this;if(this.enabled){var i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=e.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),Object.keys(google.ima.AdEvent.Type).forEach((function(e){t.manager.addEventListener(google.ima.AdEvent.Type[e],(function(e){return t.onAdEvent(e)}))})),this.trigger("loaded")}}},{key:"addCuePoints",value:function(){var e=this;Q(this.cuePoints)||this.cuePoints.forEach((function(t){if(0!==t&&-1!==t&&t<e.player.duration){var i=e.player.elements.progress;if(H(i)){var n=100/e.player.duration*t,a=ne("span",{class:e.player.config.classNames.cues});a.style.left="".concat(n.toString(),"%"),i.appendChild(a)}}}))}},{key:"onAdEvent",value:function(e){var t=this,i=this.player.elements.container,n=e.getAd(),a=e.getAdData();switch(function(e){_e.call(t.player,t.player.media,"ads".concat(e.replace(/_/g,"").toLowerCase()))}(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),n.isLinear()||(n.width=i.offsetWidth,n.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.loadAds();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:a.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(a.adError.getMessage()))}}},{key:"onAdError",value:function(e){this.cancel(),this.player.debug.warn("Ads error",e)}},{key:"listeners",value:function(){var e,t=this,i=this.player.elements.container;this.player.on("canplay",(function(){t.addCuePoints()})),this.player.on("ended",(function(){t.loader.contentComplete()})),this.player.on("timeupdate",(function(){e=t.player.currentTime})),this.player.on("seeked",(function(){var i=t.player.currentTime;Q(t.cuePoints)||t.cuePoints.forEach((function(n,a){e<n&&n<i&&(t.manager.discardAdBreak(),t.cuePoints.splice(a,1))}))})),window.addEventListener("resize",(function(){t.manager&&t.manager.resize(i.offsetWidth,i.offsetHeight,google.ima.ViewMode.NORMAL)}))}},{key:"play",value:function(){var e=this,t=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then((function(){e.manager.setVolume(e.player.volume),e.elements.displayContainer.initialize();try{e.initialized||(e.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),e.manager.start()),e.initialized=!0}catch(t){e.onAdError(t)}})).catch((function(){}))}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,this.player.media.play()}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var e=this;this.managerPromise.then((function(){e.manager&&e.manager.destroy(),e.managerPromise=new Promise((function(t){e.on("loaded",t),e.player.debug.log(e.manager)})),e.requestAds()})).catch((function(){}))}},{key:"trigger",value:function(e){for(var t=this,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];var s=this.events[e];j(s)&&s.forEach((function(e){B(e)&&e.apply(t,n)}))}},{key:"on",value:function(e,t){return j(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}},{key:"startSafetyTimer",value:function(e,t){var i=this;this.player.debug.log("Safety timer invoked from: ".concat(t)),this.safetyTimer=setTimeout((function(){i.cancel(),i.clearSafetyTimer("startSafetyTimer()")}),e)}},{key:"clearSafetyTimer",value:function(e){q(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!Q(e.publisherId)||K(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;if(K(e.tagUrl))return e.tagUrl;var t={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(Qe(t))}}]),t}(),mt=function(e,t){var i={};return e>t.width/t.height?(i.width=t.width,i.height=1/e*t.width):(i.height=t.height,i.width=e*t.height),i},yt=function(){function t(i){e(this,t),this.player=i,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return i(t,[{key:"load",value:function(){var e=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((function(){e.enabled&&(e.render(),e.determineContainerAutoSizing(),e.loaded=!0)}))}},{key:"getThumbnails",value:function(){var e=this;return new Promise((function(t){var i=e.player.config.previewThumbnails.src;if(Q(i))throw new Error("Missing previewThumbnails.src config attribute");var n=(F(i)?[i]:i).map((function(t){return e.getThumbnail(t)}));Promise.all(n).then((function(){e.thumbnails.sort((function(e,t){return e.height-t.height})),e.player.debug.log("Preview thumbnails",e.thumbnails),t()}))}))}},{key:"getThumbnail",value:function(e){var t=this;return new Promise((function(i){Be(e).then((function(n){var a,s,r={frames:(a=n,s=[],a.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(e){var t={};e.split(/\r\n|\n|\r/).forEach((function(e){if(R(t.startTime)){if(!Q(e.trim())&&Q(t.text)){var i=e.trim().split("#xywh="),n=o(i,1);if(t.text=n[0],i[1]){var a=o(i[1].split(","),4);t.x=a[0],t.y=a[1],t.w=a[2],t.h=a[3]}}}else{var s=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(t.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+Number("0.".concat(s[4])),t.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+Number("0.".concat(s[9])))}})),t.text&&s.push(t)})),s),height:null,urlPrefix:""};r.frames[0].text.startsWith("/")||r.frames[0].text.startsWith("http://")||r.frames[0].text.startsWith("https://")||(r.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var c=new Image;c.onload=function(){r.height=c.naturalHeight,r.width=c.naturalWidth,t.thumbnails.push(r),i()},c.src=r.urlPrefix+r.frames[0].text}))}))}},{key:"startMove",value:function(e){if(this.loaded&&z(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t=this.player.elements.progress.getBoundingClientRect(),i=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(i/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=We(this.seekTime)}this.showImageAtCurrentTime()}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(e){(q(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var e=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Se.call(this.player,this.player.media,"timeupdate",(function(){e.mouseDown||e.toggleScrubbingContainer(!1)}))}},{key:"listeners",value:function(){var e=this;this.player.on("play",(function(){e.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(function(){e.toggleThumbContainer(!1)})),this.player.on("timeupdate",(function(){e.lastTime=e.player.media.currentTime}))}},{key:"render",value:function(){this.elements.thumb.container=ne("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=ne("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var e=ne("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=ne("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),H(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=ne("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"destroy",value:function(){this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}},{key:"showImageAtCurrentTime",value:function(){var e=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var t=this.thumbnails[0].frames.findIndex((function(t){return e.seekTime>=t.startTime&&e.seekTime<=t.endTime})),i=t>=0,n=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((function(i,a){e.loadedImages.includes(i.frames[t].text)&&(n=a)})),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(n)))}},{key:"loadImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this.showingThumb,n=this.thumbnails[t],a=n.urlPrefix,s=n.frames[i],r=n.frames[i].text,o=a+r;if(this.currentImageElement&&this.currentImageElement.dataset.filename===r)this.showImage(this.currentImageElement,s,t,i,r,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);var c=new Image;c.src=o,c.dataset.index=i,c.dataset.filename=r,this.showingThumbFilename=r,this.player.debug.log("Loading image: ".concat(o)),c.onload=function(){return e.showImage(c,s,t,i,r,!0)},this.loadingImage=c,this.removeOldImages(c)}}},{key:"showImage",value:function(e,t,i,n,a){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.player.debug.log("Showing thumb: ".concat(a,". num: ").concat(n,". qual: ").concat(i,". newimg: ").concat(s)),this.setImageSizeAndOffset(e,t),s&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(n,!0).then(this.preloadNearby(n,!1)).then(this.getHigherQuality(i,e,t,a))}},{key:"removeOldImages",value:function(e){var t=this;Array.from(this.currentImageContainer.children).forEach((function(i){if("img"===i.tagName.toLowerCase()){var n=t.usingSprites?500:1e3;if(i.dataset.index!==e.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;var a=t.currentImageContainer;setTimeout((function(){a.removeChild(i),t.player.debug.log("Removing thumb: ".concat(i.dataset.filename))}),n)}}}))}},{key:"preloadNearby",value:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n){setTimeout((function(){var a=t.thumbnails[0].frames[e].text;if(t.showingThumbFilename===a){var s;s=i?t.thumbnails[0].frames.slice(e):t.thumbnails[0].frames.slice(0,e).reverse();var r=!1;s.forEach((function(e){var i=e.text;if(i!==a&&!t.loadedImages.includes(i)){r=!0,t.player.debug.log("Preloading thumb filename: ".concat(i));var s=t.thumbnails[0].urlPrefix+i,o=new Image;o.src=s,o.onload=function(){t.player.debug.log("Preloaded thumb filename: ".concat(i)),t.loadedImages.includes(i)||t.loadedImages.push(i),n()}}})),r||n()}}),300)}))}},{key:"getHigherQuality",value:function(e,t,i,n){var a=this;if(e<this.thumbnails.length-1){var s=t.naturalHeight;this.usingSprites&&(s=i.h),s<this.thumbContainerHeight&&setTimeout((function(){a.showingThumbFilename===n&&(a.player.debug.log("Showing higher quality thumb for: ".concat(n)),a.loadImage(e+1))}),300)}}},{key:"toggleThumbContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){if(this.sizeSpecifiedInCSS){if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){var e=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width="".concat(e,"px")}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){var t=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(t,"px")}}else{var i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(i,"px")}this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),i=this.elements.thumb.container,n=t.left-e.left+10,a=t.right-e.left-i.clientWidth-10,s=this.mousePosX-e.left-i.clientWidth/2;s<n&&(s=n),s>a&&(s=a),i.style.left="".concat(s,"px")}},{key:"setScrubbingContainerSize",value:function(){var e=mt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),t=e.width,i=e.height;this.elements.scrubbing.container.style.width="".concat(t,"px"),this.elements.scrubbing.container.style.height="".concat(i,"px")}},{key:"setImageSizeAndOffset",value:function(e,t){if(this.usingSprites){var i=this.thumbContainerHeight/t.h;e.style.height="".concat(e.naturalHeight*i,"px"),e.style.width="".concat(e.naturalWidth*i,"px"),e.style.left="-".concat(t.x*i,"px"),e.style.top="-".concat(t.y*i,"px")}}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?mt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),t}(),gt={insertElements:function(e,t){var i=this;F(t)?re(e,this.media,{src:t}):j(t)&&t.forEach((function(t){re(e,i.media,t)}))},change:function(e){var t=this;J(e,"sources.length")?(De.cancelRequests.call(this),this.destroy.call(this,(function(){t.options.quality=[],ie(t.media),t.media=null,H(t.elements.container)&&t.elements.container.removeAttribute("class");var i=e.sources,n=e.type,a=o(i,1)[0],s=a.provider,r=void 0===s?Je.html5:s,c=a.src,l="html5"===r?n:"div",u="html5"===r?{}:{src:c};Object.assign(t,{provider:r,type:n,supported:ge.check(n,r,t.config.playsinline),media:ne(l,u)}),t.elements.container.appendChild(t.media),V(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),Q(e.poster)||(t.poster=e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.playsinline&&t.media.setAttribute("playsinline","")),nt.addStyleHook.call(t),t.isHTML5&&gt.insertElements.call(t,"source",i),t.config.title=e.title,pt.setup.call(t),t.isHTML5&&Object.keys(e).includes("tracks")&&gt.insertElements.call(t,"track",e.tracks),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&nt.build.call(t),t.isHTML5&&t.media.load(),Q(e.previewThumbnails)||(Object.assign(t.config.previewThumbnails,e.previewThumbnails),t.previewThumbnails&&t.previewThumbnails.loaded&&(t.previewThumbnails.destroy(),t.previewThumbnails=null),t.config.previewThumbnails.enabled&&(t.previewThumbnails=new yt(t))),t.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}},vt=function(){function t(i,n){var a=this;if(e(this,t),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=ge.touch,this.media=i,F(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||U(this.media)||j(this.media))&&(this.media=this.media[0]),this.config=Z({},Ye,t.defaults,n||{},function(){try{return JSON.parse(a.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new et(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",ge),!q(this.media)&&H(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(ge.check().api){var s=this.media.cloneNode(!0);s.autoplay=!1,this.elements.original=s;var r=this.media.tagName.toLowerCase(),o=null,c=null;switch(r){case"div":if(o=this.media.querySelector("iframe"),H(o)){if(c=Ke(o.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Je.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Je.vimeo:null}(c.toString()),this.elements.container=this.media,this.media=o,this.elements.container.className="",c.search.length){var l=["1","true"];l.includes(c.searchParams.get("autoplay"))&&(this.config.autoplay=!0),l.includes(c.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=l.includes(c.searchParams.get("playsinline")),this.config.youtube.hl=c.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(Q(this.provider)||!Object.keys(Je).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type="video";break;case"video":case"audio":this.type=r,this.provider=Je.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=ge.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new it(this),this.storage=new Ve(this),this.media.plyr=this,H(this.elements.container)||(this.elements.container=ne("div",{tabindex:0}),ee(this.media,this.elements.container)),nt.addStyleHook.call(this),pt.setup.call(this),this.config.debug&&we.call(this,this.elements.container,this.config.events.join(" "),(function(e){a.debug.log("event: ".concat(e.type))})),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&nt.build.call(this),this.listeners.container(),this.listeners.global(),this.fullscreen=new tt(this),this.config.ads.enabled&&(this.ads=new ft(this)),this.isHTML5&&this.config.autoplay&&setTimeout((function(){return a.play()}),10),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new yt(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return i(t,[{key:"play",value:function(){var e=this;return B(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((function(){return e.ads.play()})).catch((function(){return e.media.play()})),this.media.play()):null}},{key:"pause",value:function(){return this.playing&&B(this.media.pause)?this.media.pause():null}},{key:"togglePlay",value:function(e){return(V(e)?e:!this.playing)?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):B(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(e){this.currentTime-=R(e)?e:this.config.seekTime}},{key:"forward",value:function(e){this.currentTime+=R(e)?e:this.config.seekTime}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.volume;this.volume=t+(R(e)?e:0)}},{key:"decreaseVolume",value:function(e){this.increaseVolume(-e)}},{key:"toggleCaptions",value:function(e){Ge.toggle.call(this,e,!1)}},{key:"airplay",value:function(){ge.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(e){if(this.supported.ui&&!this.isAudio){var t=le(this.elements.container,this.config.classNames.hideControls),i=void 0===e?void 0:!e,n=ce(this.elements.container,this.config.classNames.hideControls,i);if(n&&this.config.controls.includes("settings")&&!Q(this.config.settings)&&$e.toggleMenu.call(this,!1),n!==t){var a=n?"controlshidden":"controlsshown";_e.call(this,this.media,a)}return!n}return!1}},{key:"on",value:function(e,t){we.call(this,this.elements.container,e,t)}},{key:"once",value:function(e,t){Se.call(this,this.elements.container,e,t)}},{key:"off",value:function(e,t){Te(this.elements.container,e,t)}},{key:"destroy",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ready){var n=function(){document.body.style.overflow="",t.embed=null,i?(Object.keys(t.elements).length&&(ie(t.elements.buttons.play),ie(t.elements.captions),ie(t.elements.controls),ie(t.elements.wrapper),t.elements.buttons.play=null,t.elements.captions=null,t.elements.controls=null,t.elements.wrapper=null),B(e)&&e()):(ke.call(t),ae(t.elements.original,t.elements.container),_e.call(t,t.elements.original,"destroyed",!0),B(e)&&e.call(t.elements.original),t.ready=!1,setTimeout((function(){t.elements=null,t.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(nt.toggleNativeControls.call(this,!0),n()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&B(this.embed.destroy)&&this.embed.destroy(),n()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(n),setTimeout(n,200))}}},{key:"supports",value:function(e){return ge.mime.call(this,e)}},{key:"isHTML5",get:function(){return this.provider===Je.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===Je.youtube}},{key:"isVimeo",get:function(){return this.provider===Je.vimeo}},{key:"isVideo",get:function(){return"video"===this.type}},{key:"isAudio",get:function(){return"audio"===this.type}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=R(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return R(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=R(t)&&t!==1/0?t:0;return e||i}},{key:"volume",set:function(e){var t=e;F(t)&&(t=Number(t)),R(t)||(t=this.storage.get("volume")),R(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!Q(e)&&this.muted&&t>0&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;V(t)||(t=this.storage.get("muted")),V(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(e){var t=this,i=null;R(e)&&(i=e),R(i)||(i=this.storage.get("speed")),R(i)||(i=this.config.speed.selected);var n=this.minimumSpeed,a=this.maximumSpeed;i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return Math.min(Math.max(e,t),i)}(i,n,a),this.config.speed.selected=i,setTimeout((function(){t.media.playbackRate=i}),0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,c(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,c(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(e){var t=this.config.quality,i=this.options.quality;if(i.length){var n=[!Q(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(R),a=!0;if(!i.includes(n)){var s=function(e,t){return j(e)&&e.length?e.reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e})):null}(i,n);this.debug.warn("Unsupported quality option: ".concat(n,", using ").concat(s," instead")),n=s,a=!1}t.selected=n,this.media.quality=n,a&&this.storage.set({quality:n})}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=V(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){gt.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return K(e)?e:this.source},set:function(e){K(e)&&(this.config.urls.download=e,$e.setDownloadUrl.call(this))}},{key:"poster",set:function(e){this.isVideo?nt.setPoster.call(this,e,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=xe(Ie.call(this));return j(e)?e.join(":"):e},set:function(e){this.isVideo?F(e)&&Ee(e)?(this.config.ratio=e,Ae.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(e){var t=V(e)?e:this.config.autoplay;this.config.autoplay=t},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){Ge.set.call(this,e,!1)},get:function(){var e=this.captions,t=e.toggled,i=e.currentTrack;return t?i:-1}},{key:"language",set:function(e){Ge.setLanguage.call(this,e,!1)},get:function(){return(Ge.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(ge.pip){var t=V(e)?e:!this.pip;B(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?Xe:"inline"),B(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}},get:function(){return ge.pip?Q(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Xe:null}}],[{key:"supported",value:function(e,t,i){return ge.check(e,t,i)}},{key:"loadSprite",value:function(e,t){return je(e,t)}},{key:"setup",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;return F(e)?n=Array.from(document.querySelectorAll(e)):U(e)?n=Array.from(e):j(e)&&(n=e.filter(H)),Q(n)?null:n.map((function(e){return new t(e,i)}))}}]),t}();return vt.defaults=(lt=Ye,JSON.parse(JSON.stringify(lt))),vt}())}).call(this,n(25))},185:function(e,t,n){"use strict";n(186)},186:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,o,c=(r=n(121))&&"object"==typeof r&&"default"in r?r.default:r,l=n(72),h=n(123),d=n(90),component=n(122),f=n(187),m=c.SDK_VERSION,y=new h.Logger("@firebase/firestore");function v(){return y.logLevel===h.LogLevel.DEBUG?o.DEBUG:y.logLevel===h.LogLevel.SILENT?o.SILENT:o.ERROR}function w(e){switch(e){case o.DEBUG:y.logLevel=h.LogLevel.DEBUG;break;case o.ERROR:y.logLevel=h.LogLevel.ERROR;break;case o.SILENT:y.logLevel=h.LogLevel.SILENT;break;default:y.error("Firestore ("+m+"): Invalid value passed to `setLogLevel`")}}function T(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(y.logLevel<=h.LogLevel.DEBUG){var o=n.map(_);y.debug.apply(y,l.__spreadArrays(["Firestore ("+m+") ["+e+"]: "+t],o))}}function S(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(y.logLevel<=h.LogLevel.ERROR){var r=t.map(_);y.error.apply(y,l.__spreadArrays(["Firestore ("+m+"): "+e],r))}}function _(e){if("string"==typeof e)return e;var t=E.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function k(e){var t="FIRESTORE ("+m+") INTERNAL ASSERTION FAILED: "+e;throw S(t),new Error(t)}function C(e,t){e||k(t)}!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(o||(o={}));var E=function(){function e(){}return e.setPlatform=function(t){e.platform&&k("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||k("Platform not set"),e.platform},e}();function x(){return E.getPlatform().emptyByteString}var I={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=function(e){function t(code,t){var n=e.call(this,t)||this;return n.code=code,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return l.__extends(t,e),t}(Error);function D(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new A(I.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e,t){return void 0!==e?e:t}function O(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function M(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function P(e){for(var t in C(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function R(e,t){if(0!==t.length)throw new A(I.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+re(t.length,"argument")+".")}function F(e,t,n){if(t.length!==n)throw new A(I.INVALID_ARGUMENT,"Function "+e+"() requires "+re(n,"argument")+", but was called with "+re(t.length,"argument")+".")}function V(e,t,n){if(t.length<n)throw new A(I.INVALID_ARGUMENT,"Function "+e+"() requires at least "+re(n,"argument")+", but was called with "+re(t.length,"argument")+".")}function B(e,t,n,r){if(t.length<n||t.length>r)throw new A(I.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+re(t.length,"argument")+".")}function j(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new A(I.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+re(r,"element")+".")}function U(e,t,n,r){G(e,t,ne(n)+" argument",r)}function H(e,t,n,r){void 0!==r&&U(e,t,n,r)}function z(e,t,n,r){G(e,t,n+" option",r)}function W(e,t,n,r){void 0!==r&&z(e,t,n,r)}function $(e,t,n,r,o){void 0!==r&&function(e,t,n,r,o){if(!(r instanceof Array))throw new A(I.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+X(r));for(var i=0;i<r.length;++i)if(!o(r[i]))throw new A(I.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+i+" was: "+X(r[i]))}(e,t,n,r,o)}function K(e,t,n,input,r){void 0!==input&&function(e,t,n,input,r){for(var o=[],c=0,l=r;c<l.length;c++){var h=l[c];if(h===input)return;o.push(X(h))}var d=X(input);throw new A(I.INVALID_ARGUMENT,"Invalid value "+d+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,input,r)}function Q(e,t,n,r){if(!t.some((function(element){return element===r})))throw new A(I.INVALID_ARGUMENT,"Invalid value "+X(r)+" provided to function "+e+"() for its "+ne(n)+" argument. Acceptable values: "+t.join(", "))}function G(e,t,n,input){if(!("object"===t?Y(input):"non-empty string"===t?"string"==typeof input&&""!==input:typeof input===t)){var r=X(input);throw new A(I.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+r)}}function Y(input){return"object"==typeof input&&null!==input&&(Object.getPrototypeOf(input)===Object.prototype||null===Object.getPrototypeOf(input))}function X(input){if(void 0===input)return"undefined";if(null===input)return"null";if("string"==typeof input)return input.length>20&&(input=input.substring(0,20)+"..."),JSON.stringify(input);if("number"==typeof input||"boolean"==typeof input)return""+input;if("object"==typeof input){if(input instanceof Array)return"an array";var e=function(input){if(input.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(input.constructor.toString());if(e&&e.length>1)return e[1]}return null}(input);return e?"a custom "+e+" object":"an object"}return"function"==typeof input?"a function":k("Unknown wrong type: "+typeof input)}function J(e,t,n){if(void 0===n)throw new A(I.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+ne(t)+" argument, but it was undefined.")}function Z(e,t,n){M(t,(function(t,r){if(n.indexOf(t)<0)throw new A(I.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function ee(e,t,n,r){var o=X(r);return new A(I.INVALID_ARGUMENT,"Function "+e+"() requires its "+ne(n)+" argument to be a "+t+", but it was: "+o)}function te(e,t,n){if(n<=0)throw new A(I.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+ne(t)+" argument to be a positive number, but it was: "+n+".")}function ne(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function re(e,t){return e+" "+t+(1===e?"":"s")}var ie=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",i=0;i<20;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return C(20===t.length,"Invalid auto ID: "+t),t},e}();function oe(e,t){return e<t?-1:e>t?1:0}function ae(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].isEqual(t[i]))return!1;return!0}function se(s){return s+"\0"}function ue(){if("undefined"==typeof Uint8Array)throw new A(I.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ce(){if(!E.getPlatform().base64Available)throw new A(I.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var le,he=function(){function e(e){ce(),this._binaryString=e}return e.fromBase64String=function(t){F("Blob.fromBase64String",arguments,1),U("Blob.fromBase64String","string",1,t),ce();try{var n=E.getPlatform().atob(t);return new e(n)}catch(e){throw new A(I.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(F("Blob.fromUint8Array",arguments,1),ue(),!(t instanceof Uint8Array))throw ee("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return F("Blob.toBase64",arguments,0),ce(),E.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){F("Blob.toUint8Array",arguments,0),ue();for(var e=new Uint8Array(this._binaryString.length),i=0;i<this._binaryString.length;i++)e[i]=this._binaryString.charCodeAt(i);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._approximateByteSize=function(){return 2*this._binaryString.length},e.prototype._compareTo=function(e){return oe(this._binaryString,e._binaryString)},e}(),de=D(he,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),pe=function(e,t,n,r,o){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=o},fe=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return oe(this.projectId,e.projectId)||oe(this.database,e.database)},e}(),me=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ye=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&k("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&k("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,C(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return C(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return C(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return C(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0},e.prototype.forEach=function(e){for(var i=this.offset,t=this.limit();i<t;i++)e(this.segments[i])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++){var r=e.get(i),o=t.get(i);if(r<o)return-1;if(r>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(path){if(path.indexOf("//")>=0)throw new A(I.INVALID_ARGUMENT,"Invalid path ("+path+"). Paths must not contain // in them.");return new t(path.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(ye),ve=/^[_a-zA-Z][_a-zA-Z0-9]*$/,be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return ve.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(path){for(var e=[],n="",i=0,r=function(){if(0===n.length)throw new A(I.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;i<path.length;){var c=path[i];if("\\"===c){if(i+1===path.length)throw new A(I.INVALID_ARGUMENT,"Path has trailing escape character: "+path);var l=path[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new A(I.INVALID_ARGUMENT,"Path has invalid escape sequence: "+path);n+=l,i+=2}else"`"===c?(o=!o,i++):"."!==c||o?(n+=c,i++):(r(),i++)}if(r(),o)throw new A(I.INVALID_ARGUMENT,"Unterminated ` in path: "+path);return new t(e)},t.EMPTY_PATH=new t([]),t}(ye),we=function(){function e(path){this.path=path,C(e.isDocumentKey(path),"Invalid DocumentKey with an odd number of segments: "+path.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===ge.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ge.comparator(e.path,t.path)},e.isDocumentKey=function(path){return path.length%2==0},e.fromSegments=function(t){return new e(new ge(t.slice()))},e.fromPathString=function(path){return new e(ge.fromString(path))},e.EMPTY=new e(new ge([])),e}(),Te=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction"}(le||(le={}));var Se=function(){function e(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new Te,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,o,c){var l=new e(t,n,Date.now()+r,o,c);return l.start(r),l},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new A(I.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),_e=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw S("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),C(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var o=Se.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(o),o},e.prototype.verifyNotFailed=function(){this.failure&&k("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){C(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){C(e===le.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(a,b){return a.targetTimeMs-b.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var o=r[n];if(o.skipDelay(),e!==le.All&&o.timerId===e)break}return t.drain()}))},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);C(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}();function ke(path){for(var e="",i=0;i<path.length;i++)e.length>0&&(e=Ee(e)),e=Ce(path.get(i),e);return Ee(e)}function Ce(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ee(e){return e+""}function xe(path){var e=path.length;if(C(e>=2,"Invalid path "+path),2===e)return C(""===path.charAt(0)&&""===path.charAt(1),"Non-empty path "+path+" had length 2"),ge.EMPTY_PATH;for(var t=e-2,n=[],r="",o=0;o<e;){var c=path.indexOf("",o);switch((c<0||c>t)&&k('Invalid encoded resource path: "'+path+'"'),path.charAt(c+1)){case"":var l=path.substring(o,c),h=void 0;0===r.length?h=l:(h=r+=l,r=""),n.push(h);break;case"":r+=path.substring(o,c),r+="\0";break;case"":r+=path.substring(o,c+1);break;default:k('Invalid encoded resource path: "'+path+'"')}o=c+2}return new ge(n)}var Ie=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new A(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new A(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new A(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),Ae=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new Ie(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ie(0,0)),e}(),De=function(){function e(e,t){this.comparator=e,this.root=t||Le.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Le.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Le.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Ne(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Ne(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ne(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Ne(this.root,e,this.comparator,!0)},e}(),Ne=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){C(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Le=function(){function e(t,n,r,o,c){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=o?o:e.EMPTY,this.right=null!=c?c:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,o,c){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,o=n(e,r.key);return(r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===n(t,o.key)){if(o.right.isEmpty())return e.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw k("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw k("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw k("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Oe=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw k("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw k("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw k("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw k("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw k("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,o){return this},e.prototype.insert=function(e,t,n){return new Le(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();Le.EMPTY=new Oe;var Me=function(){function e(e){this.comparator=e,this.data=new De(this.comparator)}return e.fromMapKeys=function(map){var t=new e(map.comparator);return map.forEach((function(e){t=t.add(e)})),t},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Pe(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Pe(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var o=n.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(data){var t=new e(this.comparator);return t.data=data,t},e}(),Pe=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Re=new De(we.comparator);function Fe(){return Re}function qe(){return Fe()}var Ve=new De(we.comparator);function Be(){return Ve}var je=new De(we.comparator);function Ue(){return je}var He=new Me(we.comparator);function ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=He,r=0,o=e;r<o.length;r++){var c=o[r];n=n.add(c)}return n}var We=new Me(oe);function $e(){return We}var Ke=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,C(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&C(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;C(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var c=r[i];t=o.applyToRemoteDocument(t,c)}}return t},e.prototype.applyToLocalView=function(e,t){t&&C(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(h=r[n]).key.isEqual(e)&&(t=h.applyToLocalView(t,t,this.localWriteTime))}for(var o=t,c=0,l=this.mutations;c<l.length;c++){var h;(h=l[c]).key.isEqual(e)&&(t=h.applyToLocalView(t,o,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var o=t.applyToLocalView(r.key,e.get(r.key));o&&(n=n.insert(r.key,o))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),ze())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&ae(this.mutations,e.mutations)&&ae(this.baseMutations,e.baseMutations)},e}(),Qe=function(){function e(e,t,n,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=o}return e.from=function(t,n,r,o){C(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var c=Ue(),l=t.mutations,i=0;i<l.length;i++)c=c.insert(l[i].key,r[i].version);return new e(t,n,r,o,c)},e}(),Ge=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&k("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,o){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,o)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,o)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,o=0,c=!1;t.forEach((function(element){++r,element.next((function(){++o,c&&o===r&&e()}),(function(e){return n(e)}))})),c=!0,o===r&&e()}))},e.or=function(t){for(var p=e.resolve(!1),n=function(t){p=p.next((function(n){return n?e.resolve(n):t()}))},r=0,o=t;r<o.length;r++){n(o[r])}return p},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,s){r.push(t.call(n,e,s))})),this.waitFor(r)},e}(),Ye="SimpleDb",Xe=function(){function t(e){this.db=e,12.2===t.getIOSVersion(d.getUA())&&S("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return C(t.isAvailable(),"IndexedDB not supported in current environment."),T(Ye,"Opening database:",e),new Ge((function(o,c){var l=window.indexedDB.open(e,n);l.onsuccess=function(e){var n=e.target.result;o(new t(n))},l.onblocked=function(){c(new A(I.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=function(e){var t=e.target.error;"VersionError"===t.name?c(new A(I.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c(t)},l.onupgradeneeded=function(t){T(Ye,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,l.transaction,t.oldVersion,cn).next((function(){T(Ye,"Database upgrade to version "+cn+" complete")}))}})).toPromise()},t.delete=function(e){return T(Ye,"Removing database:",e),tt(window.indexedDB.deleteDatabase(e)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=d.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,o=t.getAndroidVersion(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)},t.isMockPersistence=function(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},t.getStore=function(e,t){return e.store(t)},t.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},t.prototype.runTransaction=function(e,t,n){return l.__awaiter(this,void 0,void 0,(function(){var r,o,c,h,d,f;return l.__generator(this,(function(m){switch(m.label){case 0:r=e.startsWith("readonly"),o=e.endsWith("idempotent"),c=0,h=function(){var e,h,f,m;return l.__generator(this,(function(l){switch(l.label){case 0:++c,e=Ze.open(d.db,r?"readonly":"readwrite",t),l.label=1;case 1:return l.trys.push([1,3,,4]),(h=n(e).catch((function(t){return e.abort(t),Ge.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return l.sent(),[2,{value:h}];case 3:return f=l.sent(),m=o&&"FirebaseError"!==f.name&&c<3,T(Ye,"Transaction failed with error: %s. Retrying: %s.",f.message,m),m?[3,4]:[2,{value:Promise.reject(f)}];case 4:return[2]}}))},d=this,m.label=1;case 1:return[5,h()];case 2:return"object"==typeof(f=m.sent())?[2,f.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Je=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return tt(this.dbCursor.delete())},e}(),Ze=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Te,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=it(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(T(Ye,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return C(!!t,"Object store not part of transaction: "+e),new et(t)},e}(),et=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(T(Ye,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(T(Ye,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),tt(n)},e.prototype.add=function(e){return T(Ye,"ADD",this.store.name,e,e),tt(this.store.add(e))},e.prototype.get=function(e){var t=this;return tt(this.store.get(e)).next((function(n){return void 0===n&&(n=null),T(Ye,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return T(Ye,"DELETE",this.store.name,e),tt(this.store.delete(e))},e.prototype.count=function(){return T(Ye,"COUNT",this.store.name),tt(this.store.count())},e.prototype.loadAll=function(e,t){var cursor=this.cursor(this.options(e,t)),n=[];return this.iterateCursor(cursor,(function(e,t){n.push(t)})).next((function(){return n}))},e.prototype.deleteAll=function(e,t){T(Ye,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var cursor=this.cursor(n);return this.iterateCursor(cursor,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var cursor=this.cursor(n);return this.iterateCursor(cursor,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Ge((function(n,r){t.onerror=function(e){var t=it(e.target.error);r(t)},t.onsuccess=function(t){var cursor=t.target.result;cursor?e(cursor.primaryKey,cursor.value).next((function(e){e?cursor.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new Ge((function(r,o){e.onerror=function(e){o(e.target.error)},e.onsuccess=function(e){var cursor=e.target.result;if(cursor){var o=new Je(cursor),c=t(cursor.primaryKey,cursor.value,o);if(c instanceof Ge){var l=c.catch((function(e){return o.done(),Ge.reject(e)}));n.push(l)}o.isDone?r():null===o.skipToKey?cursor.continue():cursor.continue(o.skipToKey)}else r()}})).next((function(){return Ge.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(C(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function tt(e){return new Ge((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=it(e.target.error);n(t)}}))}var nt=!1;function it(e){var t=Xe.getIOSVersion(d.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new A("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return nt||(nt=!0,setTimeout((function(){throw r}),0)),r}}return e}var ot=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,o){return C(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,o)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ct(e).iterate({index:fn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=ut(n),ht(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=ut(t),ht(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var o=this,c=lt(e),l=ct(e);return l.add({}).next((function(h){C("number"==typeof h,"Auto-generated key is not a number");for(var d=new Ke(h,t,n,r),f=o.serializer.toDbMutationBatch(o.userId,d),m=[],y=new Me((function(e,t){return oe(e.canonicalString(),t.canonicalString())})),v=0,w=r;v<w.length;v++){var T=w[v],S=mn.key(o.userId,T.key.path,h);y=y.add(T.key.path.popLast()),m.push(l.put(f)),m.push(c.put(S,mn.PLACEHOLDER))}return y.forEach((function(t){m.push(o.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){o.documentKeysByBatchId[h]=d.keys()})),Ge.waitFor(m).next((function(){return d}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return ct(e).get(t).next((function(e){return e?(C(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Ge.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]),c=null;return ct(e).iterate({index:fn.userMutationsIndex,range:o},(function(e,t,o){t.userId===n.userId&&(C(t.batchId>=r,"Should have found mutation after "+r),c=n.serializer.fromDbMutationBatch(t)),o.done()})).next((function(){return c}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ct(e).iterate({index:fn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ct(e).loadAll(fn.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=mn.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return lt(e).iterate({range:o},(function(r,o,l){var h=r[0],d=r[1],f=r[2],path=xe(d);if(h===n.userId&&t.path.isEqual(path))return ct(e).get(f).next((function(e){if(!e)throw k("Dangling document-mutation reference found: "+r+" which points to "+f);C(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+f),c.push(n.serializer.fromDbMutationBatch(e))}));l.done()})).next((function(){return c}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Me(oe),o=[];return t.forEach((function(t){var c=mn.prefixForPath(n.userId,t.path),l=IDBKeyRange.lowerBound(c),h=lt(e).iterate({range:l},(function(e,o,c){var l=e[0],h=e[1],d=e[2],path=xe(h);l===n.userId&&t.path.isEqual(path)?r=r.add(d):c.done()}));o.push(h)})),Ge.waitFor(o).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;C(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),C(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,o=r.length+1,c=mn.prefixForPath(this.userId,r),l=IDBKeyRange.lowerBound(c),h=new Me(oe);return lt(e).iterate({range:l},(function(e,t,c){var l=e[0],d=e[1],f=e[2],path=xe(d);l===n.userId&&r.isPrefixOf(path)?path.length===o&&(h=h.add(f)):c.done()})).next((function(){return n.lookupMutationBatches(e,h)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],o=[];return t.forEach((function(t){o.push(ct(e).get(t).next((function(e){if(null===e)throw k("Dangling document-mutation reference found, which points to "+t);C(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),Ge.waitFor(o).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return st(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),Ge.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ge.resolve();var r=IDBKeyRange.lowerBound(mn.prefixForUser(t.userId)),o=[];return lt(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var path=xe(e[1]);o.push(path)}else r.done()})).next((function(){C(0===o.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+o.map((function(p){return p.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return at(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return ht(e).get(this.userId).next((function(e){return e||new pn(t.userId,-1,"")}))},e}();function at(e,t,n){var r=mn.prefixForPath(t,n.path),o=r[1],c=IDBKeyRange.lowerBound(r),l=!1;return lt(e).iterate({range:c,keysOnly:!0},(function(e,n,r){var c=e[0],h=e[1];e[2];c===t&&h===o&&(l=!0),r.done()})).next((function(){return l}))}function st(e,t,n){var r=e.store(fn.store),o=e.store(mn.store),c=[],l=IDBKeyRange.only(n.batchId),h=0,d=r.iterate({range:l},(function(e,t,n){return h++,n.delete()}));c.push(d.next((function(){C(1===h,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var f=[],m=0,y=n.mutations;m<y.length;m++){var v=y[m],w=mn.key(t,v.key.path,n.batchId);c.push(o.delete(w)),f.push(v.key)}return Ge.waitFor(c).next((function(){return f}))}function ut(e){return e instanceof Uint8Array?(C(Xe.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function ct(e){return Xn.getStore(e,fn.store)}function lt(e){return Xn.getStore(e,mn.store)}function ht(e){return Xn.getStore(e,pn.store)}var pt;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(pt||(pt={}));var ft=function(){function e(e,t){this.generatorId=e,C((1&e)===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},e.prototype.after=function(e){return this.seek(e+2),this.next()},e.prototype.seek=function(e){C((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){return new e(pt.QueryCache,2)},e.forSyncEngine=function(){return new e(pt.SyncEngine)},e}(),mt=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=ft.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return Ae.fromTimestamp(new Ie(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return vt(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(o){return o.highestListenSequenceNumber=t,n&&(o.lastRemoteSnapshotVersion=n.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),r.saveMetadata(e,o)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return yt(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return C(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,o=0,c=[];return yt(e).iterate((function(l,h){var d=r.serializer.fromDbTarget(h);d.sequenceNumber<=t&&null===n.get(d.targetId)&&(o++,c.push(r.removeTargetData(e,d)))})).next((function(){return Ge.waitFor(c)})).next((function(){return o}))},e.prototype.forEachTarget=function(e,t){var n=this;return yt(e).iterate((function(e,r){var o=n.serializer.fromDbTarget(r);t(o)}))},e.prototype.retrieveMetadata=function(e){return gt(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Xn.getStore(n,Sn.store)).put(Sn.key,t);var n},e.prototype.saveTargetData=function(e,t){return yt(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),c=null;return yt(e).iterate({range:o,index:wn.queryTargetsIndexName},(function(e,r,o){var l=n.serializer.fromDbTarget(r);t.isEqual(l.target)&&(c=l,o.done())})).next((function(){return c}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,o=[],c=bt(e);return t.forEach((function(t){var path=ke(t.path);o.push(c.put(new Tn(n,path))),o.push(r.referenceDelegate.addReference(e,t))})),Ge.waitFor(o)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,o=bt(e);return Ge.forEach(t,(function(t){var path=ke(t.path);return Ge.waitFor([o.delete([n,path]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=bt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=bt(e),o=ze();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var path=xe(e[1]),r=new we(path);o=o.add(r)})).next((function(){return o}))},e.prototype.containsKey=function(e,t){var path=ke(t.path),n=IDBKeyRange.bound([path],[se(path)],!1,!0),r=0;return bt(e).iterate({index:Tn.documentTargetsIndex,keysOnly:!0,range:n},(function(e,t,n){var o=e[0];e[1];0!==o&&(r++,n.done())})).next((function(){return r>0}))},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return yt(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();function yt(e){return Xn.getStore(e,wn.store)}function gt(e){return Xe.getStore(e,Sn.store).get(Sn.key).next((function(e){return C(null!==e,"Missing metadata row."),e}))}function vt(e){return gt(e).next((function(e){return e.highestListenSequenceNumber}))}function bt(e){return Xn.getStore(e,Tn.store)}var wt,Tt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new Me(be.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),St=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),_t=function(e,t){this.version=e,this.transformResults=t};!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete",e[e.Verify=4]="Verify"}(wt||(wt={}));var kt,Ct,Et=function(){function e(e,t){this.updateTime=e,this.exists=t,C(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Yt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Yt:(C(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),xt=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&C(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Yt?e.version:Ae.MIN},e}(),It=function(e){function t(t,n,r){var o=e.call(this)||this;return o.key=t,o.value=n,o.precondition=r,o.type=wt.Set,o}return l.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),C(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Yt(this.key,n,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=xt.getPostMutationVersion(e);return new Yt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(xt),At=function(e){function t(t,data,n,r){var o=e.call(this)||this;return o.key=t,o.data=data,o.fieldMask=n,o.precondition=r,o.type=wt.Patch,o}return l.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),C(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Jt(this.key,t.version);var n=this.patchDocument(e);return new Yt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=xt.getPostMutationVersion(e),o=this.patchDocument(e);return new Yt(this.key,r,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var data;return data=e instanceof Yt?e.data():Kt.EMPTY,this.patchObject(data)},t.prototype.patchObject=function(data){var e=this;return this.fieldMask.fields.forEach((function(t){if(!t.isEmpty()){var n=e.data.field(t);data=null!==n?data.set(t,n):data.delete(t)}})),data},t}(xt),Dt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=wt.Transform,r.precondition=Et.exists(!0),r}return l.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),C(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Jt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),o=t.version,c=this.transformObject(n.data(),r);return new Yt(this.key,o,{hasCommittedMutations:!0},c)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),o=this.localTransformResults(n,e,t),c=this.transformObject(r.data(),o);return new Yt(this.key,r.version,{hasLocalMutations:!0},c)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var o=r[n],c=e instanceof Yt?e.field(o.field):void 0,l=o.transform.computeBaseValue(c||null);null!=l&&(t=null==t?Kt.EMPTY.set(o.field,l):t.set(o.field,l))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&ae(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){return C(e instanceof Yt,"Unknown MaybeDocument type "+e),C(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},t.prototype.serverTransformResults=function(e,t){var n=[];C(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var i=0;i<t.length;i++){var r=this.fieldTransforms[i],o=r.transform,c=null;e instanceof Yt&&(c=e.field(r.field)),n.push(o.applyToRemoteDocument(c,t[i]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],o=0,c=this.fieldTransforms;o<c.length;o++){var l=c[o],h=l.transform,d=null;t instanceof Yt&&(d=t.field(l.field)),null===d&&n instanceof Yt&&(d=n.field(l.field)),r.push(h.applyToLocalView(d,e))}return r},t.prototype.transformObject=function(data,e){C(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var i=0;i<this.fieldTransforms.length;i++){var t=this.fieldTransforms[i].field;data=data.set(t,e[i])}return data},t}(xt),Nt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=wt.Delete,r}return l.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),C(null==t.transformResults,"Transform results received by DeleteMutation."),new Xt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&C(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Xt(this.key,Ae.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(xt),Lt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=wt.Verify,r}return l.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){k("VerifyMutation should only be used in Transactions.")},t.prototype.applyToLocalView=function(e,t,n){k("VerifyMutation should only be used in Transactions.")},t.prototype.extractBaseValue=function(e){k("VerifyMutation should only be used in Transactions.")},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(xt);!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(kt||(kt={})),function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(Ct||(Ct={}));var Ot=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(Ct.Estimate,n);case"previous":return new e(Ct.Previous,n);case"none":case void 0:return new e(Ct.Default,n);default:return k("fromSnapshotOptions() called with invalid options.")}},e}(),Mt=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return C(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),oe(this.typeOrder,e.typeOrder)},e}(),Pt=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=kt.NullValue,t.internalValue=null,t}return l.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 4},t.INSTANCE=new t,t}(Mt),Rt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=kt.BooleanValue,n}return l.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?oe(this,e):this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 4},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Mt),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=kt.NumberValue,n}return l.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t.prototype.approximateByteSize=function(){return 8},t}(Mt);function qt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&qt(this.internalValue,e.internalValue)},t}(Ft),Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&qt(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Ft),jt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=kt.StringValue,n}return l.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?oe(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 2*this.internalValue.length},t}(Mt),Ut=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=kt.TimestampValue,n}return l.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Ht?-1:this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 16},t}(Mt),Ht=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=kt.TimestampValue,r}return l.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===Ct.Estimate?new Ut(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Ct.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Ut?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t.prototype.approximateByteSize=function(){return 16+(this.previousValue?this.previousValue.approximateByteSize():0)},t}(Mt),zt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=kt.BlobValue,n}return l.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return this.internalValue._approximateByteSize()},t}(Mt),Wt=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=kt.RefValue,r}return l.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:we.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return this.databaseId.projectId.length+this.databaseId.database.length+this.key.toString().length},t}(Mt),$t=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=kt.GeoPointValue,n}return l.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 16},t}(Mt),Kt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=kt.ObjectValue,n}return l.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),c=r.getNext();if(o.key!==c.key||!o.value.isEqual(c.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),c=r.getNext(),l=oe(o.key,c.key)||o.value.compareTo(c.value);if(l)return l}return oe(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(path,e){if(C(!path.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===path.length)return this.setChild(path.firstSegment(),e);var n=this.child(path.firstSegment());n instanceof t||(n=t.EMPTY);var r=n.set(path.popFirst(),e);return this.setChild(path.firstSegment(),r)},t.prototype.delete=function(path){if(C(!path.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===path.length)return new t(this.internalValue.remove(path.firstSegment()));var e=this.child(path.firstSegment());if(e instanceof t){var n=e.delete(path.popFirst());return new t(this.internalValue.insert(path.firstSegment(),n))}return this},t.prototype.contains=function(path){return null!==this.field(path)},t.prototype.field=function(path){C(!path.isEmpty(),"Can't get field of empty path");var e=this;return path.forEach((function(n){e=e instanceof t?e.internalValue.get(n):null})),e},t.prototype.fieldMask=function(){var e=new Me(be.comparator);return this.internalValue.forEach((function(n,r){var o=new be([n]);if(r instanceof t){var c=r.fieldMask().fields;c.isEmpty()?e=e.add(o):c.forEach((function(t){e=e.add(o.child(t))}))}else e=e.add(o)})),Tt.fromSet(e)},t.prototype.approximateByteSize=function(){var e=0;return this.internalValue.inorderTraversal((function(t,n){e+=t.length+n.approximateByteSize()})),e},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new De(oe)),t}(Mt),Qt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=kt.ArrayValue,n}return l.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){if(n[t].isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var i=0;i<this.internalValue.length;i++)if(!this.internalValue[i].isEqual(e.internalValue[i]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),i=0;i<n;i++){var r=this.internalValue[i].compareTo(e.internalValue[i]);if(r)return r}return oe(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return this.internalValue.reduce((function(e,t){return e+t.approximateByteSize()}),0)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(Mt),Gt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return we.comparator(e.key,t.key)},e}(),Yt=function(e){function t(t,n,r,o,c,l){var h=e.call(this,t,n)||this;return h.objectValue=o,h.proto=c,h.converter=l,C(void 0!==h.objectValue||void 0!==h.proto&&void 0!==h.converter,"If objectValue is not defined, proto and converter need to be set."),h.hasLocalMutations=!!r.hasLocalMutations,h.hasCommittedMutations=!!r.hasCommittedMutations,h}return l.__extends(t,e),t.prototype.field=function(path){if(this.objectValue)return this.objectValue.field(path);this.fieldValueCache||(this.fieldValueCache=new Map);var e=path.canonicalString(),t=this.fieldValueCache.get(e);if(void 0===t){var n=this.getProtoField(path);t=void 0===n?null:this.converter(n),this.fieldValueCache.set(e,t)}return t},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=Kt.EMPTY;M(this.proto.fields||{},(function(n,r){t=t.set(new be([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(path){C(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[path.firstSegment()]:void 0,i=1;i<path.length;++i){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[path.get(i)]}return e},t.compareByField=function(e,t,n){var r=t.field(e),o=n.field(e);return null!==r&&null!==o?r.compareTo(o):k("Trying to compare documents on fields that don't exist")},t}(Gt),Xt=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.hasCommittedMutations=!(!r||!r.hasCommittedMutations),o}return l.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Gt),Jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Gt),Zt=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,o=n;r<o.length;r++){var c=o[r],l=c[0],h=c[1];if(l.isEqual(e))return h}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(n[i][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(i,1),!0;return!1},e.prototype.forEach=function(e){M(this.inner,(function(t,n){for(var r=0,o=n;r<o.length;r++){var c=o[r],l=c[0],h=c[1];e(l,h)}}))},e.prototype.isEmpty=function(){return P(this.inner)},e}(),en=function(){function e(){this.changes=new Zt((function(e){return e.toString()})),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return C(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){C(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ge.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){C(!this.changesApplied,"Changes have already been applied.")},e}(),tn=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){return rn(e).put(on(t),n)},e.prototype.removeEntry=function(e,t){var n=rn(e),r=on(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return rn(e).get(on(t)).next((function(e){return n.maybeDecodeDocument(e)}))},e.prototype.getSizedEntry=function(e,t){var n=this;return rn(e).get(on(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:an(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=qe();return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);r=r.insert(e,o)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=qe(),o=new De(we.comparator);return this.forEachDbEntry(e,t,(function(e,t){var c=n.maybeDecodeDocument(t);c?(r=r.insert(e,c),o=o.insert(e,an(t))):(r=r.insert(e,null),o=o.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:o}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Ge.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),o=t.getIterator(),c=o.getNext();return rn(e).iterate({range:r},(function(e,t,r){for(var l=we.fromSegments(e);c&&we.comparator(c,l)<0;)n(c,null),c=o.getNext();c&&c.isEqual(l)&&(n(c,t),c=o.hasNext()?o.getNext():null),c?r.skip(c.path.toArray()):r.done()})).next((function(){for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;C(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var o=Be(),c=t.path.length+1,l={};if(n.isEqual(Ae.MIN)){var h=t.path.toArray();l.range=IDBKeyRange.lowerBound(h)}else{var d=t.path.toArray(),f=this.serializer.toDbTimestampKey(n);l.range=IDBKeyRange.lowerBound([d,f],!0),l.index=vn.collectionReadTimeIndex}return rn(e).iterate(l,(function(e,n,l){if(e.length===c){var h=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(h.key.path)?h instanceof Yt&&t.matches(h)&&(o=o.insert(h.key,h)):l.done()}})).next((function(){return o}))},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Fe(),o=this.serializer.toDbTimestampKey(t),c=rn(e),l=IDBKeyRange.lowerBound(o,!0);return c.iterate({index:vn.readTimeIndex,range:l},(function(e,t){var c=n.serializer.fromDbRemoteDocument(t);r=r.insert(c.key,c),o=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(o)}}))},e.prototype.getLastReadTime=function(e){var t=this,n=rn(e),r=Ae.MIN;return n.iterate({index:vn.readTimeIndex,reverse:!0},(function(e,n,o){n.readTime&&(r=t.serializer.fromDbTimestampKey(n.readTime)),o.done()})).next((function(){return r}))},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return nn(e).get(bn.key).next((function(e){return C(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return nn(e).put(bn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Xt&&t.version.isEqual(Ae.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new Zt((function(e){return e.toString()})),r}return l.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,o=new Me((function(e,t){return oe(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(c,l){var h=t.documentSizes.get(c);if(C(void 0!==h,"Cannot modify a document that wasn't read (for "+c+")"),l){C(!t.readTime.isEqual(Ae.MIN),"Cannot add a document with a read time of zero");var d=t.documentCache.serializer.toDbRemoteDocument(l,t.readTime);o=o.add(c.path.popLast());var f=an(d);r+=f-h,n.push(t.documentCache.addEntry(e,c,d))}else if(r-=h,t.trackRemovals){var m=t.documentCache.serializer.toDbRemoteDocument(new Xt(c,Ae.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,c,m))}else n.push(t.documentCache.removeEntry(e,c))})),o.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},t}(en),e}();function nn(e){return Xn.getStore(e,bn.store)}function rn(e){return Xn.getStore(e,vn.store)}function on(e){return e.path.toArray()}function an(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw k("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var sn=function(){function e(){this.collectionParentIndex=new un}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Ge.resolve()},e.prototype.getCollectionParents=function(e,t){return Ge.resolve(this.collectionParentIndex.getEntries(t))},e}(),un=function(){function e(){this.index={}}return e.prototype.add=function(e){C(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Me(ge.comparator),o=!r.has(n);return this.index[t]=r.add(n),o},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Me(ge.comparator)).toArray()},e}(),cn=9,ln=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var o=this;C(n<r&&n>=0&&r<=cn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var c=new Ze(t);n<1&&r>=1&&(function(e){e.createObjectStore(dn.store)}(e),function(e){e.createObjectStore(pn.store,{keyPath:pn.keyPath}),e.createObjectStore(fn.store,{keyPath:fn.keyPath,autoIncrement:!0}).createIndex(fn.userMutationsIndex,fn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(mn.store)}(e),kn(e),function(e){e.createObjectStore(vn.store)}(e));var p=Ge.resolve();return n<3&&r>=3&&(0!==n&&(!function(e){e.deleteObjectStore(Tn.store),e.deleteObjectStore(wn.store),e.deleteObjectStore(Sn.store)}(e),kn(e)),p=p.next((function(){return function(e){var t=e.store(Sn.store),n=new Sn(0,0,Ae.MIN.toTimestamp(),0);return t.put(Sn.key,n)}(c)}))),n<4&&r>=4&&(0!==n&&(p=p.next((function(){return function(e,t){return t.store(fn.store).loadAll().next((function(n){e.deleteObjectStore(fn.store),e.createObjectStore(fn.store,{keyPath:fn.keyPath,autoIncrement:!0}).createIndex(fn.userMutationsIndex,fn.userMutationsKeyPath,{unique:!0});var r=t.store(fn.store),o=n.map((function(e){return r.put(e)}));return Ge.waitFor(o)}))}(e,c)}))),p=p.next((function(){!function(e){e.createObjectStore(Cn.store,{keyPath:Cn.keyPath})}(e)}))),n<5&&r>=5&&(p=p.next((function(){return o.removeAcknowledgedMutations(c)}))),n<6&&r>=6&&(p=p.next((function(){return function(e){e.createObjectStore(bn.store)}(e),o.addDocumentGlobal(c)}))),n<7&&r>=7&&(p=p.next((function(){return o.ensureSequenceNumbers(c)}))),n<8&&r>=8&&(p=p.next((function(){return o.createCollectionParentIndex(e,c)}))),n<9&&r>=9&&(p=p.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(vn.store);t.createIndex(vn.readTimeIndex,vn.readTimeIndexPath,{unique:!1}),t.createIndex(vn.collectionReadTimeIndex,vn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),p},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(vn.store).iterate((function(e,n){t+=an(n)})).next((function(){var n=new bn(t);return e.store(bn.store).put(bn.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(pn.store),r=e.store(fn.store);return n.loadAll().next((function(n){return Ge.forEach(n,(function(n){var o=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(fn.userMutationsIndex,o).next((function(r){return Ge.forEach(r,(function(r){C(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var o=t.serializer.fromDbMutationBatch(r);return st(e,n.userId,o).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(Tn.store),n=e.store(vn.store);return vt(e).next((function(e){var r=[];return n.iterate((function(n,o){var path=new ge(n),c=function(path){return[0,ke(path)]}(path);r.push(t.get(c).next((function(n){return n?Ge.resolve():function(path){return t.put(new Tn(0,ke(path),e))}(path)})))})).next((function(){return Ge.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(_n.store,{keyPath:_n.keyPath});var n=t.store(_n.store),r=new un,o=function(e){if(r.add(e)){var t=e.lastSegment(),o=e.popLast();return n.put({collectionId:t,parent:ke(o)})}};return t.store(vn.store).iterate({keysOnly:!0},(function(e,t){var path=new ge(e);return o(path.popLast())})).next((function(){return t.store(mn.store).iterate({keysOnly:!0},(function(e,t){e[0];var n=e[1],path=(e[2],xe(n));return o(path.popLast())}))}))},e}();var hn=function(e,t){this.seconds=e,this.nanoseconds=t},dn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();var pn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),fn=function(){function e(e,t,n,r,o){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=o}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();var mn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,path){return[e,ke(path)]},e.key=function(e,path,t){return[e,ke(path),t]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();var yn=function(path,e){this.path=path,this.readTime=e},gn=function(path,e){this.path=path,this.version=e},vn=function(){function e(e,t,n,r,o,c){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=o,this.parentPath=c}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),bn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();var wn=function(){function e(e,t,n,r,o,c,l){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=c,this.query=l}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),Tn=function(){function e(e,path,t){this.targetId=e,this.path=path,this.sequenceNumber=t,C(0===e==(void 0!==t),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),Sn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),_n=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function kn(e){e.createObjectStore(Tn.store,{keyPath:Tn.keyPath}).createIndex(Tn.documentTargetsIndex,Tn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(wn.store,{keyPath:wn.keyPath}).createIndex(wn.queryTargetsIndexName,wn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Sn.store)}var Cn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}();var En,xn=[pn.store,fn.store,mn.store,vn.store,wn.store,dn.store,Sn.store,Tn.store],In=l.__spreadArrays(xn,[Cn.store]),An=l.__spreadArrays(In,[bn.store]),Dn=l.__spreadArrays(An,[_n.store]),Nn=function(){function e(){this.collectionParentsCache=new un}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(C(t.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var c={collectionId:r,parent:ke(o)};return Ln(e).put(c)}return Ge.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[se(t),""],!1,!0);return Ln(e).loadAll(r).next((function(e){for(var r=0,o=e;r<o.length;r++){var c=o[r];if(c.collectionId!==t)break;n.push(xe(c.parent))}return n}))},e}();function Ln(e){return Xn.getStore(e,_n.store)}!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(En||(En={}));var On=function(){function e(e,t,n,r,o,c,l){void 0===o&&(o=Ae.MIN),void 0===c&&(c=Ae.MIN),void 0===l&&(l=x()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=l}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),Mn=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=we.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Xt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=we.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new Jt(t,n)}return k("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Yt){var o=e.proto?e.proto:this.remoteSerializer.toDocument(e),c=e.hasCommittedMutations;return new vn(null,null,o,c,n,r)}if(e instanceof Xt){var path=e.key.path.toArray(),l=this.toDbTimestamp(e.version);c=e.hasCommittedMutations;return new vn(null,new yn(path,l),null,c,n,r)}if(e instanceof Jt){path=e.key.path.toArray();var h=this.toDbTimestamp(e.version);return new vn(new gn(path,h),null,null,!0,n,r)}return k("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new Ie(e[0],e[1]);return Ae.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new hn(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ie(e.seconds,e.nanoseconds);return Ae.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),o=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new fn(e,t.batchId,t.localWriteTime.toMillis(),r,o)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),o=Ie.fromMillis(e.localWriteTimeMs);return new Ke(e.batchId,o,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(ke(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=ze(),n=0,r=e;n<r.length;n++){var o=r[n];t=t.add(new we(xe(o)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):Ae.MIN,o=e.resumeToken;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new On(t,e.targetId,En.Listen,e.lastListenSequenceNumber,n,r,o)},e.prototype.toDbTarget=function(e){C(En.Listen===e.purpose,"Only queries with purpose "+En.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),o=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(C(Xe.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new wn(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,o,t)},e}();var Pn=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,o=n;r<o.length;r++){e=o[r].applyToLocalView(t,e)}return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=qe();return t.forEach((function(e,t){for(var o=0,c=n;o<c.length;o++){t=c[o].applyToLocalView(e,t)}r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var o=n.applyLocalMutationsToDocuments(e,t,r),c=Fe();return o.forEach((function(e,t){t||(t=new Xt(e,Ae.forDeletedDoc())),c=c.insert(e,t)})),c}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new we(t)).next((function(e){var t=Be();return e instanceof Yt&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;C(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var o=t.collectionGroup,c=Be();return this.indexManager.getCollectionParents(e,o).next((function(l){return Ge.forEach(l,(function(l){var h=t.asCollectionQueryAtPath(l.child(o));return r.getDocumentsMatchingCollectionQuery(e,h,n).next((function(e){e.forEach((function(e,t){c=c.insert(e,t)}))}))})).next((function(){return c}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,o,c=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,c.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return o=t,c.addMissingBaseDocuments(e,o,r).next((function(e){r=e;for(var t=0,n=o;t<n.length;t++)for(var c=n[t],l=0,h=c.mutations;l<h.length;l++){var d=h[l],f=d.key,m=r.get(f),y=d.applyToLocalView(m,m,c.localWriteTime);r=y instanceof Yt?r.insert(f,y):r.remove(f)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=ze(),o=0,c=t;o<c.length;o++)for(var l=0,h=c[o].mutations;l<h.length;l++){var d=h[l];d instanceof At&&null===n.get(d.key)&&(r=r.add(d.key))}var f=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Yt&&(f=f.insert(e,t))})),f}))},e}(),Rn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fn=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),qn=function(){function e(){this.refsByKey=new Me(Vn.compareByKey),this.refsByTarget=new Me(Vn.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new Vn(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new Vn(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=we.EMPTY,r=new Vn(n,e),o=new Vn(n,e+1),c=[];return this.refsByTarget.forEachInRange([r,o],(function(e){t.removeRef(e),c.push(e.key)})),c},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=we.EMPTY,n=new Vn(t,e),r=new Vn(t,e+1),o=ze();return this.refsByTarget.forEachInRange([n,r],(function(e){o=o.add(e.key)})),o},e.prototype.containsKey=function(e){var t=new Vn(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Vn=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return we.comparator(e.key,t.key)||oe(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return oe(e.targetOrBatchId,t.targetOrBatchId)||we.comparator(e.key,t.key)},e}(),Bn=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new qn,this.targetDataByTarget=new De(oe),this.targetIdByTarget=new Zt((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=Ae.MIN,C(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new Pn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n,r,o=this;return l.__generator(this,(function(c){switch(c.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var c;return o.mutationQueue.getAllMutationBatches(r).next((function(l){return c=l,t=o.persistence.getMutationQueue(e),n=new Pn(o.remoteDocuments,t,o.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],o=[],l=ze(),h=0,d=c;h<d.length;h++){var f=d[h];t.push(f.batchId);for(var m=0,y=f.mutations;m<y.length;m++){var v=y[m];l=l.add(v.key)}}for(var w=0,T=e;w<T.length;w++){f=T[w];o.push(f.batchId);for(var S=0,_=f.mutations;S<_.length;S++){v=_[S];l=l.add(v.key)}}return n.getDocuments(r,l).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:o}}))}))}))];case 1:return r=c.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},e.prototype.localWrite=function(e){var t,n=this,r=Ie.now(),o=e.reduce((function(e,t){return e.add(t.key)}),ze());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(c){return n.localDocuments.getDocuments(c,o).next((function(o){t=o;for(var l=[],h=0,d=e;h<d.length;h++){var f=d[h],m=f.extractBaseValue(t.get(f.key));null!=m&&l.push(new At(f.key,m,m.fieldMask(),Et.exists(!0)))}return n.mutationQueue.addMutationBatch(c,r,l,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):Ge.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),o=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,o)})).next((function(){return o.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return C(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,o=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(c){var l=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});o=n.targetDataByTarget;var h=[];O(t.targetChanges,(function(t,l){var d=o.get(t);if(d){h.push(n.targetCache.removeMatchingKeys(c,l.removedDocuments,t).next((function(){return n.targetCache.addMatchingKeys(c,l.addedDocuments,t)})));var f=l.resumeToken;if(f.length>0){var m=d.withResumeToken(f,r).withSequenceNumber(c.currentSequenceNumber);o=o.insert(t,m),e.shouldPersistTargetData(d,m,l)&&h.push(n.targetCache.updateTargetData(c,m))}}}));var d=Fe(),f=ze();if(t.documentUpdates.forEach((function(e,t){f=f.add(e)})),h.push(l.getEntries(c,f).next((function(e){t.documentUpdates.forEach((function(o,f){var m=e.get(o);f instanceof Xt&&f.version.isEqual(Ae.MIN)?(l.removeEntry(o,r),d=d.insert(o,f)):null==m||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(C(!Ae.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),l.addEntry(f,r),d=d.insert(o,f)):T("LocalStore","Ignoring outdated watch update for ",o,". Current version:",m.version," Watch version:",f.version),t.resolvedLimboDocuments.has(o)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(c,o))}))}))),!r.isEqual(Ae.MIN)){var m=n.targetCache.getLastRemoteSnapshotVersion(c).next((function(e){return C(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(c,c.currentSequenceNumber,r)}));h.push(m)}return Ge.waitFor(h).next((function(){return l.apply(c)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(c,d)}))})).then((function(e){return n.targetDataByTarget=o,e}))},e.shouldPersistTargetData=function(e,t,n){return C(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var o=r[n],c=o.targetId;if(this.localViewReferences.addReferences(o.addedKeys,c),this.localViewReferences.removeReferences(o.removedKeys,c),!o.fromCache){var l=this.targetDataByTarget.get(c);C(null!==l,"Can't set limbo-free snapshot version for unknown target: "+c);var h=l.snapshotVersion,d=l.withLastLimboFreeSnapshotVersion(h);this.targetDataByTarget=this.targetDataByTarget.insert(c,d)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Ge.forEach(e,(function(e){return Ge.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(o){return o?(r=o,Ge.resolve(r)):t.targetCache.allocateTargetId(n).next((function(o){return r=new On(e,o,En.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?Ge.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);C(null!==r,"Tried to release nonexistent target: "+e);var o=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",o,(function(o){var c=n.localViewReferences.removeReferencesForId(e);return t?Ge.resolve():Ge.forEach(c,(function(e){return n.persistence.referenceDelegate.removeReference(o,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(o,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},e.prototype.executeQuery=function(e,t){var n=this,r=Ae.MIN,o=ze();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(c){return n.getTargetData(c,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(c,e.targetId).next((function(e){o=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(c,e,t?r:Ae.MIN,t?o:ze())})).next((function(e){return{documents:e,remoteKeys:o}}))}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,o=t.batch,c=o.keys(),l=Ge.resolve();return c.forEach((function(r){l=l.next((function(){return n.getEntry(e,r)})).next((function(e){var c=e,l=t.docVersions.get(r);C(null!==l,"ackVersions should contain every doc in the write."),(!c||c.version.compareTo(l)<0)&&((c=o.applyToRemoteDocument(r,c,t))?n.addEntry(c,t.commitVersion):C(!e,"Mutation batch "+o+" applied to document "+e+" resulted in null"))}))})),l.next((function(){return r.mutationQueue.removeMutationBatch(e,o)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return l.__awaiter(this,void 0,void 0,(function(){var e,t=this;return l.__generator(this,(function(n){switch(n.label){case 0:return e=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(e){return t.remoteDocuments.getLastReadTime(e)}))];case 1:return e.lastDocumentChangeReadTime=n.sent(),[2]}}))}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}();function jn(e){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){if(e.code!==I.FAILED_PRECONDITION||e.message!==Rn)throw e;return T("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Un(e,t){var n=e[0],r=e[1],o=t[0],c=t[1],l=oe(n,o);return 0===l?oe(r,c):l}var Hn=function(){function e(e){this.maxElements=e,this.buffer=new Me(Un),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Un(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),zn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wn=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),$n=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){C(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Wn.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;C(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;T("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(le.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(jn)}))},e}(),Kn=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Ge.resolve(me.INVALID);var r=new Hn(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Wn.COLLECTION_DISABLED?(T("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(zn)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),zn):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,c,l,h,d,f,m=this,y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>m.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+m.params.maximumSequenceNumbersToCollect+" from "+t),r=m.params.maximumSequenceNumbersToCollect):r=t,l=Date.now(),m.nthSequenceNumber(e,r)})).next((function(r){return n=r,h=Date.now(),m.removeTargets(e,n,t)})).next((function(t){return c=t,d=Date.now(),m.removeOrphanedDocuments(e,n)})).next((function(e){(f=Date.now(),v()<=o.DEBUG)&&T("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(l-y)+"ms\n\tDetermined least recently used "+r+" in "+(h-l)+"ms\n\tRemoved "+c+" targets in "+(d-h)+"ms\n\tRemoved "+e+" documents in "+(f-d)+"ms\nTotal Duration: "+(f-y)+"ms");return Ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:c,documentsRemoved:e})}))},e}(),Qn="IndexedDbPersistence",Gn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Yn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return l.__extends(t,e),t}(Fn),Xn=function(){function e(t,n,r,o,c,l,h,d){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=l,this.sequenceNumberSyncer=d,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new er(this,c),this.dbName=n+e.MAIN_DATABASE,this.serializer=new Mn(h),this.document=o.document,this.targetCache=new mt(this.referenceDelegate,this.serializer),this.indexManager=new Nn,this.remoteDocumentCache=new tn(this.serializer,this.indexManager),!o.window||!o.window.localStorage)throw new A(I.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=o.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Yn)return Xe.getStore(e.simpleDbTransaction,t);throw k("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:if(!e.isAvailable())throw new A(I.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){var e=this;return C(!this.started,"IndexedDbPersistence double-started!"),C(null!==this.window,"Expected 'window' to be defined"),Xe.openOrCreate(this.dbName,cn,new ln(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[Sn.store],(function(e){return vt(e)}))})).then((function(t){e.listenSequence=new me(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return l.__awaiter(t,void 0,void 0,(function(){return l.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return l.__awaiter(t,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return l.__awaiter(t,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",Dn,(function(t){return Zn(t).put(new Cn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return T(Qn,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return Jn(e).get(dn.key).next((function(e){return Ge.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return Zn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return l.__awaiter(this,void 0,void 0,(function(){var t=this;return l.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=e.getStore(n,Cn.store);return r.loadAll().next((function(e){var n=t.filterActiveClients(e,18e5),o=e.filter((function(e){return-1===n.indexOf(e)}));return Ge.forEach(o,(function(e){return r.delete(e.clientId)})).next((function(){return o}))}))})).catch((function(){return[]}))]);case 1:n.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),n.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(le.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Jn(e).get(dn.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new A(I.FAILED_PRECONDITION,Gn);return!1}}return!(!t.networkEnabled||!t.inForeground)||Zn(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,o=t.networkEnabled===e.networkEnabled;if(n||r&&o)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&T(Qn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return l.__awaiter(this,void 0,void 0,(function(){var e=this;return l.__generator(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[dn.store,Cn.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[Cn.store],(function(t){return Zn(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},e.clearPersistence=function(t){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,Xe.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return C(this.started,"Cannot initialize MutationQueue before persistence is started."),ot.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return C(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return C(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return C(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;T(Qn,"Starting transaction:",e);var o,c=t.endsWith("idempotent"),l=t.startsWith("readonly")?c?"readonly-idempotent":"readonly":c?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(l,Dn,(function(c){return o=new Yn(c,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(c).next((function(e){return!!e||r.canActAsPrimary(c)})).next((function(t){if(!t)throw S("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new A(I.FAILED_PRECONDITION,Rn);return n(o)})).next((function(e){return r.acquireOrExtendPrimaryLease(c).next((function(){return e}))})):r.verifyAllowTabSynchronization(c).next((function(){return n(o)}))})).then((function(e){return o.raiseOnCommittedEvent(),e}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Jn(e).get(dn.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new A(I.FAILED_PRECONDITION,Gn)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new dn(this.clientId,this.allowTabSynchronization,Date.now());return Jn(e).put(dn.key,t)},e.isAvailable=function(){return Xe.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Jn(e);return n.get(dn.key).next((function(e){return t.isLocalClient(e)?(T(Qn,"Releasing primary lease."),n.delete(dn.key)):Ge.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(S("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(C(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(C("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return T(Qn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return S(Qn,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){S("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Jn(e){return e.store(dn.store)}function Zn(e){return e.store(Cn.store)}var er=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Kn(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return nr(e,t)},e.prototype.removeReference=function(e,t){return nr(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return nr(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Ge.resolve(!0):function(e,t){var n=!1;return ht(e).iterateSerial((function(r){return at(e,r,t).next((function(e){return e&&(n=!0),Ge.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],c=0;return this.forEachOrphanedDocument(e,(function(l,h){if(h<=t){var p=n.isPinned(e,l).next((function(t){if(!t)return c++,r.getEntry(e,l).next((function(){return r.removeEntry(l),bt(e).delete([0,ke(l.path)])}))}));o.push(p)}})).next((function(){return Ge.waitFor(o)})).next((function(){return r.apply(e)})).next((function(){return c}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return nr(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=bt(e),o=me.INVALID;return r.iterate({index:Tn.documentTargetsIndex},(function(e,r){var c=e[0],path=(e[1],r.path),l=r.sequenceNumber;0===c?(o!==me.INVALID&&t(new we(xe(n)),o),o=l,n=path):o=me.INVALID})).next((function(){o!==me.INVALID&&t(new we(xe(n)),o)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function nr(e,t){return bt(e).put(function(e,t){return new Tn(0,ke(e.path),t)}(t,e.currentSequenceNumber))}var rr=Number,ir=rr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),or=rr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,ar=rr.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function sr(e){return null==e}function ur(e){return ar(e)&&e<=or&&e>=ir}var cr,lr=function(){function e(path,e,t,n,r,o,c){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===c&&(c=null),this.path=path,this.collectionGroup=e,this.orderBy=t,this.filters=n,this.limit=r,this.startAt=o,this.endAt=c,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,o=this.orderBy;r<o.length;r++){e+=o[r].canonicalId(),e+=","}sr(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),sr(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var i=0;i<this.orderBy.length;i++)if(!this.orderBy[i].isEqual(e.orderBy[i]))return!1;if(this.filters.length!==e.filters.length)return!1;for(i=0;i<this.filters.length;i++)if(!this.filters[i].isEqual(e.filters[i]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.isDocumentQuery=function(){return we.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}();!function(e){e.First="F",e.Last="L"}(cr||(cr={}));var dr=function(){function e(path,e,t,n,r,o,c,l){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=cr.First),void 0===c&&(c=null),void 0===l&&(l=null),this.path=path,this.collectionGroup=e,this.explicitOrderBy=t,this.filters=n,this.limit=r,this.limitType=o,this.startAt=c,this.endAt=l,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(path){return new e(path)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Cr]:this.memoizedOrderBy=[new kr(e),Cr];else{C(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,o=this.explicitOrderBy;r<o.length;r++){var c=o[r];this.memoizedOrderBy.push(c),c.field.isKeyField()&&(n=!0)}if(!n){var l=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Sr.ASCENDING;this.memoizedOrderBy.push(l===Sr.ASCENDING?Cr:Er)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(filter){C(null==this.getInequalityFilterField()||!(filter instanceof mr)||!filter.isInequality()||filter.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),C(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([filter]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){C(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,cr.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,cr.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(path){return new e(path,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,o=this.orderBy;r<o.length;r++){var c=o[r],l=c.compare(e,t);if(0!==l)return l;n=n||c.field.isKeyField()}return C(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!sr(this.limit)&&this.limitType===cr.First},e.prototype.hasLimitToLast=function(){return!sr(this.limit)&&this.limitType===cr.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var filter=t[e];if(filter instanceof mr&&filter.isInequality())return filter.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var filter=n[t];if(filter instanceof mr&&e.indexOf(filter.op)>=0)return filter.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===cr.First)this.memoizedTarget=new lr(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],o=r.dir===Sr.DESCENDING?Sr.ASCENDING:Sr.DESCENDING;e.push(new kr(r.field,o))}var c=this.endAt?new _r(this.endAt.position,!this.endAt.before):null,l=this.startAt?new _r(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new lr(this.path,this.collectionGroup,e,this.filters,this.limit,c,l)}return this.memoizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):we.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){C(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),pr=function(){},fr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return k("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),mr=function(e){function t(t,n,r){var o=e.call(this)||this;return o.field=t,o.op=n,o.value=r,o}return l.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===fr.IN?(C(r instanceof Qt,"Comparing on key with IN, but filter value not an ArrayValue"),C(r.internalValue.every((function(e){return e instanceof Wt})),"Comparing on key with IN, but an array value was not a RefValue"),new gr(e,r)):(C(r instanceof Wt,"Comparing on key, but filter value not a RefValue"),C(n!==fr.ARRAY_CONTAINS&&n!==fr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new yr(e,n,r));if(r.isEqual(Pt.INSTANCE)){if(n!==fr.EQUAL)throw new A(I.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Bt.NAN)){if(n!==fr.EQUAL)throw new A(I.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===fr.ARRAY_CONTAINS?new vr(e,r):n===fr.IN?(C(r instanceof Qt,"IN filter has invalid value: "+r.toString()),new wr(e,r)):n===fr.ARRAY_CONTAINS_ANY?(C(r instanceof Qt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Tr(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case fr.LESS_THAN:return e<0;case fr.LESS_THAN_OR_EQUAL:return e<=0;case fr.EQUAL:return 0===e;case fr.GREATER_THAN:return e>0;case fr.GREATER_THAN_OR_EQUAL:return e>=0;default:return k("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[fr.LESS_THAN,fr.LESS_THAN_OR_EQUAL,fr.GREATER_THAN,fr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(pr),yr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=we.comparator(e.key,t.key);return this.matchesComparison(n)},t}(mr),gr=function(e){function t(t,n){var r=e.call(this,t,fr.IN,n)||this;return r.value=n,r}return l.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},t}(mr),vr=function(e){function t(t,n){return e.call(this,t,fr.ARRAY_CONTAINS,n)||this}return l.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Qt&&t.contains(this.value)},t}(mr),wr=function(e){function t(t,n){var r=e.call(this,t,fr.IN,n)||this;return r.value=n,r}return l.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(mr),Tr=function(e){function t(t,n){var r=e.call(this,t,fr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return l.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Qt&&n.internalValue.some((function(e){return t.value.contains(e)}))},t}(mr),Sr=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),_r=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){C(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,i=0;i<this.position.length;i++){var r=e[i],component=this.position[i];if(r.field.isKeyField())C(component instanceof Wt,"Bound has a non-key value where the key path is being used."),n=we.comparator(component.key,t.key);else{var o=t.field(r.field);C(null!==o,"Field should exist since document matched the orderBy already."),n=component.compareTo(o)}if(r.dir===Sr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var i=0;i<this.position.length;i++){var t=this.position[i],n=e.position[i];if(!t.isEqual(n))return!1}return!0},e}(),kr=function(){function e(e,t){this.field=e,void 0===t&&(t=Sr.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Yt.compareByKey(e,t):Yt.compareByField(this.field,e,t);switch(this.dir){case Sr.ASCENDING:return n;case Sr.DESCENDING:return-1*n;default:return k("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),Cr=new kr(be.keyField(),Sr.ASCENDING),Er=new kr(be.keyField(),Sr.DESCENDING),xr=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var c=this;return C(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(Ae.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(l){var h=c.applyQuery(t,l);return(t.hasLimitToFirst()||t.hasLimitToLast())&&c.needsRefill(t.limitType,h,r,n)?c.executeFullCollectionScan(e,t):(v()<=o.DEBUG&&T("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),c.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return h.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.applyQuery=function(e,t){var n=new Me((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof Yt&&e.matches(r)&&(n=n.add(r))})),n},e.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var o=e===cr.First?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)},e.prototype.executeFullCollectionScan=function(e,t){return v()<=o.DEBUG&&T("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,Ae.MIN)},e}(),Ir=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=x(),this.batchesByDocumentKey=new Me(Vn.compareByKey)}return e.prototype.checkEmpty=function(e){return Ge.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,o=this.indexOfExistingBatchId(r,"acknowledged");C(0===o,"Can only acknowledge the first batch in the mutation queue");var c=this.mutationQueue[o];return C(r===c.batchId,"Queue ordering failure: expected batch "+r+", got batch "+c.batchId),this.lastStreamToken=n,Ge.resolve()},e.prototype.getLastStreamToken=function(e){return Ge.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Ge.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){C(0!==r.length,"Mutation batches should not be empty");var o=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&C(this.mutationQueue[this.mutationQueue.length-1].batchId<o,"Mutation batchIDs must be monotonically increasing order");var c=new Ke(o,t,n,r);this.mutationQueue.push(c);for(var l=0,h=r;l<h.length;l++){var d=h[l];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Vn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast())}return Ge.resolve(c)},e.prototype.lookupMutationBatch=function(e,t){return Ge.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return C(null!=n,"Failed to find local mutation batch."),Ge.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),o=r<0?0:r;return Ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Ge.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return Ge.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Vn(t,0),o=new Vn(t,Number.POSITIVE_INFINITY),c=[];return this.batchesByDocumentKey.forEachInRange([r,o],(function(e){C(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);C(null!==r,"Batches in the index must exist in the main table"),c.push(r)})),Ge.resolve(c)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Me(oe);return t.forEach((function(e){var t=new Vn(e,0),o=new Vn(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,o],(function(t){C(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),Ge.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){C(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,o=n;we.isDocumentKey(o)||(o=o.child(""));var c=new Vn(new we(o),0),l=new Me(oe);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(l=l.add(e.targetOrBatchId)),!0)}),c),Ge.resolve(this.findMutationBatches(l))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;C(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Ge.forEach(t.mutations,(function(o){var c=new Vn(o.key,t.batchId);return r=r.delete(c),n.referenceDelegate.removeMutationReference(e,o.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new Vn(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ge.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&C(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ge.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return C(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return C(n.batchId===e,"If found batch must match"),n},e}();var Ar,Dr=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new De(we.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){C(!n.isEqual(Ae.MIN),"Cannot add a document with a read time of zero");var r=t.key,o=this.docs.get(r),c=o?o.size:0,l=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:l,readTime:n}),this.size+=l-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Ge.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=qe();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),Ge.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){C(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Be(),o=new we(t.path.child("")),c=this.docs.getIteratorFrom(o);c.hasNext();){var l=c.getNext(),h=l.key,d=l.value,f=d.maybeDocument,m=d.readTime;if(!t.path.isPrefixOf(h.path))break;m.compareTo(n)<=0||f instanceof Yt&&t.matches(f)&&(r=r.insert(f.key,f))}return Ge.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return Ge.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.getLastReadTime=function(e){return Ge.resolve(Ae.MIN)},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return Ge.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return l.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,o){o?n.push(t.documentCache.addEntry(e,o,t.readTime)):t.documentCache.removeEntry(r)})),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(en),e}(),Nr=function(){function e(e){this.persistence=e,this.targets=new Zt((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=Ae.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new qn,this.targetCount=0,this.targetIdGenerator=ft.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),Ge.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Ge.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Ge.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Ge.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Ge.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return C(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,Ge.resolve()},e.prototype.updateTargetData=function(e,t){return C(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),Ge.resolve()},e.prototype.removeTargetData=function(e,t){return C(this.targetCount>0,"Removing a target from an empty cache"),C(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Ge.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,o=0,c=[];return this.targets.forEach((function(l,h){h.sequenceNumber<=t&&null===n.get(h.targetId)&&(r.targets.delete(l),c.push(r.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),Ge.waitFor(c).next((function(){return o}))},e.prototype.getTargetCount=function(e){return Ge.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return Ge.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return k("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((function(t){o.push(r.addReference(e,t))})),Ge.waitFor(o)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((function(t){o.push(r.removeReference(e,t))})),Ge.waitFor(o)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Ge.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Ge.resolve(n)},e.prototype.containsKey=function(e,t){return Ge.resolve(this.references.containsKey(t))},e}(),Lr=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new me(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new Nr(this);this.indexManager=new sn,this.remoteDocumentCache=new Dr(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n){return new e(t,(function(p){return new Pr(p,n)}))},e.createEagerPersistence=function(t){return new e(t,(function(p){return new Mr(p)}))},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Ir(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;T("MemoryPersistence","Starting transaction:",e);var o=new Or(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(o).next((function(e){return r.referenceDelegate.onTransactionCommitted(o).next((function(){return e}))})).toPromise().then((function(e){return o.raiseOnCommittedEvent(),e}))},e.prototype.mutationQueuesContainKey=function(e,t){return Ge.or((n=this.mutationQueues,r=[],M(n,(function(e,t){return r.push(t)})),r).map((function(n){return function(){return n.containsKey(e,t)}})));var n,r},e}(),Or=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return l.__extends(t,e),t}(Fn),Mr=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw k("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Ge.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Pr=function(){function e(e,t){this.persistence=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Zt((function(e){return ke(e.path)})),this.garbageCollector=new Kn(this,t)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Ge.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Ge.forEach(this.orphanedSequenceNumbers,(function(r,o){return n.isPinned(e,r,o).next((function(e){return e?Ge.resolve():t(o)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.forEachDocumentKey(e,(function(o){return n.isPinned(e,o,t).next((function(e){e||(r++,c.removeEntry(o))}))})).next((function(){return c.apply(e)})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.documentSize=function(e){var t=e.key.toString().length;return e instanceof Yt&&(t+=e.data().approximateByteSize()),t},e.prototype.isPinned=function(e,t,n){var r=this;return Ge.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Ge.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),Rr=function(){function e(e,t,n,r,o){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===o&&(o=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=o,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),o=Math.max(0,n-r);this.currentBaseMs>0&&T("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,o,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(Ar||(Ar={}));var Fr,qr,Vr=function(){function e(e,t,n,r,o,c){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=o,this.listener=c,this.state=Ar.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Rr(e,t)}return e.prototype.isStarted=function(){return this.state===Ar.Starting||this.state===Ar.Open||this.state===Ar.Backoff},e.prototype.isOpen=function(){return this.state===Ar.Open},e.prototype.start=function(){this.state!==Ar.Error?(C(this.state===Ar.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Ar.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){C(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Ar.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){return this.isOpen()?[2,this.close(Ar.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(n){switch(n.label){case 0:return C(this.isStarted(),"Only started streams should be closed."),C(e===Ar.Error||sr(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Ar.Error?this.backoff.reset():t&&t.code===I.RESOURCE_EXHAUSTED?(S(t.toString()),S("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===I.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;C(this.state===Ar.Initial,"Must be in initial state to auth"),this.state=Ar.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new A(I.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;C(this.state===Ar.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return C(t.state===Ar.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Ar.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;C(this.state===Ar.Error,"Should only perform backoff when in Error state"),this.state=Ar.Backoff,this.backoff.backoffAndRun((function(){return l.__awaiter(e,void 0,void 0,(function(){return l.__generator(this,(function(e){return C(this.state===Ar.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Ar.Initial,this.start(),C(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return C(this.isStarted(),"Can't handle server close on non-started stream"),T("PersistentStream","close with error: "+e),this.stream=null,this.close(Ar.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Br=function(e){function t(t,n,r,o,c){var l=e.call(this,t,le.ListenStreamConnectionBackoff,le.ListenStreamIdle,n,r,c)||this;return l.serializer=o,l}return l.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Vr),jr=function(e){function t(t,n,r,o,c){var l=e.call(this,t,le.WriteStreamConnectionBackoff,le.WriteStreamIdle,n,r,c)||this;return l.serializer=o,l.handshakeComplete_=!1,l.lastStreamToken=x(),l}return l.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(C(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return C(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){C(this.isOpen(),"Writing handshake requires an opened stream"),C(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;C(this.isOpen(),"Writing mutations requires an opened stream"),C(this.handshakeComplete_,"Handshake must be complete before writing mutations"),C(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(Vr),Ur=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new jr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Br(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Fe();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var o=[];return e.forEach((function(e){var t=r.get(e);C(!!t,"Missing entity in write response for "+e),o.push(t)})),o}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===I.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===I.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e}(),Hr=function(){function e(e){this.datastore=e,this.readVersions=Ue(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n=this;return l.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new A(I.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Xt||e instanceof Yt?n.recordVersion(e):k("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},e.prototype.set=function(e,data){this.write(data.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,data){try{this.write(data.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new Nt(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return l.__awaiter(this,void 0,void 0,(function(){var e,t=this;return l.__generator(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),e.forEach((function(e,n){t.mutations.push(new Lt(e,t.precondition(e)))})),[4,this.datastore.commit(this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof Yt)t=e.version;else{if(!(e instanceof Xt))throw k("Document in a transaction was a "+e.constructor.name);t=Ae.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new A(I.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?Et.updateTime(t):Et.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(Ae.forDeletedDoc()))throw new A(I.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Et.updateTime(t)}return Et.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){C(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(Fr||(Fr={})),function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(qr||(qr={}));var zr,Wr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Fr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Fr.Unknown),C(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(le.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,C(e.state===Fr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Fr.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===Fr.Online?(this.setAndBroadcast(Fr.Unknown),C(0===this.watchStreamFailures,"watchStreamFailures must be 0"),C(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Fr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Fr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(details){var e="Could not reach Cloud Firestore backend. "+details+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(S(e),this.shouldWarnClientIsOffline=!1):T("OnlineStateTracker",e)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function $r(code){switch(code){case I.OK:return k("Treated status OK as error");case I.CANCELLED:case I.UNKNOWN:case I.DEADLINE_EXCEEDED:case I.RESOURCE_EXHAUSTED:case I.INTERNAL:case I.UNAVAILABLE:case I.UNAUTHENTICATED:return!1;case I.INVALID_ARGUMENT:case I.NOT_FOUND:case I.ALREADY_EXISTS:case I.PERMISSION_DENIED:case I.FAILED_PRECONDITION:case I.ABORTED:case I.OUT_OF_RANGE:case I.UNIMPLEMENTED:case I.DATA_LOSS:return!0;default:return k("Unknown status code: "+code)}}function Kr(code){if(void 0===code)return S("GRPC error has no .code"),I.UNKNOWN;switch(code){case zr.OK:return I.OK;case zr.CANCELLED:return I.CANCELLED;case zr.UNKNOWN:return I.UNKNOWN;case zr.DEADLINE_EXCEEDED:return I.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return I.RESOURCE_EXHAUSTED;case zr.INTERNAL:return I.INTERNAL;case zr.UNAVAILABLE:return I.UNAVAILABLE;case zr.UNAUTHENTICATED:return I.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return I.INVALID_ARGUMENT;case zr.NOT_FOUND:return I.NOT_FOUND;case zr.ALREADY_EXISTS:return I.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return I.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return I.FAILED_PRECONDITION;case zr.ABORTED:return I.ABORTED;case zr.OUT_OF_RANGE:return I.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return I.UNIMPLEMENTED;case zr.DATA_LOSS:return I.DATA_LOSS;default:return k("Unknown status code: "+code)}}function Qr(code){if(void 0===code)return zr.OK;switch(code){case I.OK:return zr.OK;case I.CANCELLED:return zr.CANCELLED;case I.UNKNOWN:return zr.UNKNOWN;case I.DEADLINE_EXCEEDED:return zr.DEADLINE_EXCEEDED;case I.RESOURCE_EXHAUSTED:return zr.RESOURCE_EXHAUSTED;case I.INTERNAL:return zr.INTERNAL;case I.UNAVAILABLE:return zr.UNAVAILABLE;case I.UNAUTHENTICATED:return zr.UNAUTHENTICATED;case I.INVALID_ARGUMENT:return zr.INVALID_ARGUMENT;case I.NOT_FOUND:return zr.NOT_FOUND;case I.ALREADY_EXISTS:return zr.ALREADY_EXISTS;case I.PERMISSION_DENIED:return zr.PERMISSION_DENIED;case I.FAILED_PRECONDITION:return zr.FAILED_PRECONDITION;case I.ABORTED:return zr.ABORTED;case I.OUT_OF_RANGE:return zr.OUT_OF_RANGE;case I.UNIMPLEMENTED:return zr.UNIMPLEMENTED;case I.DATA_LOSS:return zr.DATA_LOSS;default:return k("Unknown status code: "+code)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(zr||(zr={}));var Gr,Yr,Xr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||we.comparator(t.key,n.key)}:function(e,t){return we.comparator(e.key,t.key)},this.keyedMap=Be(),this.sortedSet=new De(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(Gr||(Gr={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Yr||(Yr={}));var Jr,Zr=function(){function e(){this.changeMap=new De(we.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Gr.Added&&n.type===Gr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Gr.Metadata&&n.type!==Gr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Gr.Modified&&n.type===Gr.Modified?this.changeMap=this.changeMap.insert(t,{type:Gr.Modified,doc:e.doc}):e.type===Gr.Modified&&n.type===Gr.Added?this.changeMap=this.changeMap.insert(t,{type:Gr.Added,doc:e.doc}):e.type===Gr.Removed&&n.type===Gr.Added?this.changeMap=this.changeMap.remove(t):e.type===Gr.Removed&&n.type===Gr.Modified?this.changeMap=this.changeMap.insert(t,{type:Gr.Removed,doc:n.doc}):e.type===Gr.Added&&n.type===Gr.Removed?this.changeMap=this.changeMap.insert(t,{type:Gr.Modified,doc:e.doc}):k("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),ei=function(){function e(e,t,n,r,o,c,l,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=l,this.excludesMetadataChanges=h}return e.fromInitialDocuments=function(t,n,r,o){var c=[];return n.forEach((function(e){c.push({type:Gr.Added,doc:e})})),new e(t,n,Xr.emptySet(n),c,r,o,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0},e}(),ti=function(){function e(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,o=((r={})[t]=ni.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Ae.MIN,o,$e(),Fe(),ze())},e}(),ni=function(){function e(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(x(),n,ze(),ze(),ze())},e}(),ri=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},ii=function(e,t){this.targetId=e,this.existenceFilter=t};!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(Jr||(Jr={}));var oi=function(e,t,n,r){void 0===n&&(n=x()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},ai=function(){function e(){this.pendingResponses=0,this.documentChanges=ci(),this._resumeToken=x(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=ze(),t=ze(),n=ze();return this.documentChanges.forEach((function(r,o){switch(o){case Gr.Added:e=e.add(r);break;case Gr.Modified:t=t.add(r);break;case Gr.Removed:n=n.add(r);break;default:k("Encountered invalid change type: "+o)}})),new ni(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ci()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),si=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Fe(),this.pendingDocumentTargetMapping=ui(),this.pendingTargetResets=new Me(oe)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Yt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Xt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var o=0,c=e.removedTargetIds;o<c.length;o++){r=c[o];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Jr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Jr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Jr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),C(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Jr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Jr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:k("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):O(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var o=r.target;if(o.isDocumentQuery())if(0===n){var c=new we(o.path);this.removeDocumentFromTarget(t,c,new Xt(c,Ae.forDeletedDoc()))}else C(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};O(this.targetStates,(function(r,o){var c=t.targetDataForActiveTarget(r);if(c){if(o.current&&c.target.isDocumentQuery()){var l=new we(c.target.path);null!==t.pendingDocumentUpdates.get(l)||t.targetContainsDocument(r,l)||t.removeDocumentFromTarget(r,l,new Xt(l,e))}o.hasPendingChanges&&(n[r]=o.toTargetChange(),o.clearPendingChanges())}}));var r=ze();this.pendingDocumentTargetMapping.forEach((function(e,n){var o=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===En.LimboResolution||(o=!1,!1)})),o&&(r=r.add(e))}));var o=new ti(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Fe(),this.pendingDocumentTargetMapping=ui(),this.pendingTargetResets=new Me(oe),o},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Gr.Modified:Gr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Gr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new ai),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Me(oe),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;C(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new ai,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function ui(){return new De(we.comparator)}function ci(){return new De(we.comparator)}var hi=function(){function e(e,t,n,r,o){var c=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=o,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return l.__awaiter(c,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(T("RemoteStore","Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Wr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return l.__awaiter(this,void 0,void 0,(function(){var e;return l.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Fr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Fr.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(T("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return T("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Fr.Unknown),[2]}}))}))},e.prototype.listen=function(e){N(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){C(N(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),P(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Fr.Unknown))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){C(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new si(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!P(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return l.__awaiter(this,void 0,void 0,(function(){var e=this;return l.__generator(this,(function(t){return O(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){return void 0===e&&C(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Fr.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Fr.Online),e instanceof oi&&e.state===Jr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof ri?this.watchChangeAggregator.handleDocumentChange(e):e instanceof ii?this.watchChangeAggregator.handleExistenceFilter(e):(C(e instanceof oi,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Ae.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;C(!e.isEqual(Ae.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return O(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var o=t.listenTargets[n];o&&(t.listenTargets[n]=o.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(x(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new On(n.target,e,En.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;C(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return l.__awaiter(t,void 0,void 0,(function(){return l.__generator(this,(function(t){return N(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return l.__awaiter(this,void 0,void 0,(function(){var e,t;return l.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){C(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){C(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(jn)},e.prototype.onMutationResult=function(e,t){var n=this;C(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),o=Qe.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(o).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t=this;return l.__generator(this,(function(n){return void 0===e&&C(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]):[2]}))}))},e.prototype.handleHandshakeError=function(e){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){return $r(e.code)?(T("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=x(),[2,this.localStore.setLastStreamToken(x()).catch(jn)]):[2]}))}))},e.prototype.handleWriteError=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n=this;return l.__generator(this,(function(r){return $r(code=e.code)&&code!==I.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var code}))}))},e.prototype.createTransaction=function(){return new Hr(this.datastore)},e.prototype.restartNetwork=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Fr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},e.prototype.handleCredentialChange=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(T("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Fr.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),di=function(){function e(e,t){if(F("GeoPoint",arguments,2),U("GeoPoint","number",1,e),U("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new A(I.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new A(I.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return oe(this._lat,e._lat)||oe(this._long,e._long)},e}(),pi=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Ht(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),fi=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=gi(e),n=function(e){t.find((function(element){return element.isEqual(e)}))||t.push(e)},r=0,o=this.elements;r<o.length;r++){n(o[r])}return new Qt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&ae(t.elements,this.elements)},e}(),mi=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=gi(e),n=function(e){t=t.filter((function(element){return!element.isEqual(e)}))},r=0,o=this.elements;r<o.length;r++){n(o[r])}return new Qt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&ae(t.elements,this.elements)},e}(),yi=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Vt&&this.operand instanceof Vt){var r=n.internalValue+this.operand.internalValue;return new Vt(r)}r=n.internalValue+this.operand.internalValue;return new Bt(r)},e.prototype.applyToRemoteDocument=function(e,t){return C(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Ft?e:new Vt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function gi(e){return e instanceof Qt?e.internalValue.slice():[]}var vi,bi,wi=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),Ti=((vi={})[Sr.ASCENDING.name]="ASCENDING",vi[Sr.DESCENDING.name]="DESCENDING",vi),Si=((bi={})[fr.LESS_THAN.name]="LESS_THAN",bi[fr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",bi[fr.GREATER_THAN.name]="GREATER_THAN",bi[fr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",bi[fr.EQUAL.name]="EQUAL",bi[fr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",bi[fr.IN.name]="IN",bi[fr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",bi),_i=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(e,t){C(!sr(e),t+" is missing")}function Ci(e){return"number"==typeof e?e:"string"==typeof e?Number(e):k("can't parse "+e)}var Ei=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var code=void 0===e.code?I.UNKNOWN:Kr(e.code);return new A(code,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||sr(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return sr(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);C(!!e,"Cannot deserialize null or undefined timestamp.");var t=Ci(e.seconds||"0"),n=e.nanos||0;return new Ie(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=_i.exec(e);if(C(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var o=new Date(e),c=Math.floor(o.getTime()/1e3);return new Ie(c,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(C(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),he.fromBase64String(e)):(C(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),he.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return C(!!e,"Trying to deserialize version that isn't set"),Ae.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,path){return this.fullyQualifiedPrefixPath(e).child("documents").child(path).canonicalString()},e.prototype.fromResourceName=function(e){var t=ge.fromString(e);return C(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return C(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),C(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new we(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(path){return this.toResourceName(this.databaseId,path)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ge.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new ge(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new ge(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return C(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(path){return path.length>=4&&"projects"===path.get(0)&&"databases"===path.get(2)},e.prototype.toValue=function(e){if(e instanceof Pt)return{nullValue:"NULL_VALUE"};if(e instanceof Rt)return{booleanValue:e.value()};if(e instanceof Vt)return{integerValue:""+e.value()};if(e instanceof Bt){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof jt?{stringValue:e.value()}:e instanceof Kt?{mapValue:this.toMapValue(e)}:e instanceof Qt?{arrayValue:this.toArrayValue(e)}:e instanceof Ut?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof $t?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof zt?{bytesValue:this.toBytes(e.value())}:e instanceof Wt?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:k("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Pt.INSTANCE;if("booleanValue"in e)return Rt.of(e.booleanValue);if("integerValue"in e)return new Vt(Ci(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Bt.NAN;if("Infinity"===e.doubleValue)return Bt.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Bt.NEGATIVE_INFINITY}return new Bt(e.doubleValue)}if("stringValue"in e)return new jt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){ki(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Qt(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return ki(e.timestampValue,"timestampValue"),new Ut(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){ki(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,o=e.geoPointValue.longitude||0;return new $t(new di(r,o))}if("bytesValue"in e){ki(e.bytesValue,"bytesValue");var c=this.fromBlob(e.bytesValue);return new zt(c)}if("referenceValue"in e){ki(e.referenceValue,"referenceValue");var l=this.fromResourceName(e.referenceValue),h=new fe(l.get(1),l.get(3)),d=new we(this.extractLocalPathFromResourceName(l));return new Wt(h,d)}return k("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return C(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),o=this.fromVersion(e.updateTime);return new Yt(r,o,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(object){var e=this,map=object,t=Kt.EMPTY;return M(map,(function(n,r){t=t.set(new be([n]),e.fromValue(r))})),t},e.prototype.toMapValue=function(map){return{fields:this.toFields(map)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){var t=this;C(!!e.found,"Tried to deserialize a found document from a missing document."),ki(e.found.name,"doc.found.name"),ki(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Yt(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},e.prototype.fromMissing=function(e){C(!!e.missing,"Tried to deserialize a missing document from a found document."),C(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Xt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):k("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Jr.Added:return"ADD";case Jr.Current:return"CURRENT";case Jr.NoChange:return"NO_CHANGE";case Jr.Removed:return"REMOVE";case Jr.Reset:return"RESET";default:return k("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof ii)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof ri){if(e.newDoc instanceof Yt){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Xt){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof oi){var n=void 0;return e.cause&&(n={code:Qr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return k("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){ki(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=e.targetChange.resumeToken||this.emptyByteString(),l=e.targetChange.cause,h=l&&this.fromRpcStatus(l);t=new oi(r,o,c,h||null)}else if("documentChange"in e){ki(e.documentChange,"documentChange");var d=e.documentChange;ki(d.document,"documentChange.name"),ki(d.document.name,"documentChange.document.name"),ki(d.document.updateTime,"documentChange.document.updateTime");var f=this.fromName(d.document.name),m=this.fromVersion(d.document.updateTime),y=new Yt(f,m,{},void 0,d.document,(function(e){return n.fromValue(e)})),v=d.targetIds||[],w=d.removedTargetIds||[];t=new ri(v,w,y.key,y)}else if("documentDelete"in e){ki(e.documentDelete,"documentDelete");var T=e.documentDelete;ki(T.document,"documentDelete.document");f=this.fromName(T.document),m=T.readTime?this.fromVersion(T.readTime):Ae.forDeletedDoc(),y=new Xt(f,m),w=T.removedTargetIds||[];t=new ri([],w,y.key,y)}else if("documentRemove"in e){ki(e.documentRemove,"documentRemove");var S=e.documentRemove;ki(S.document,"documentRemove");f=this.fromName(S.document),w=S.removedTargetIds||[];t=new ri([],w,f,null)}else{if(!("filter"in e))return k("Unknown change type "+JSON.stringify(e));ki(e.filter,"filter");var filter=e.filter;ki(filter.targetId,"filter.targetId");var _=filter.count||0,C=new wi(_),E=filter.targetId;t=new ii(E,C)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Jr.NoChange:"ADD"===e?Jr.Added:"REMOVE"===e?Jr.Removed:"CURRENT"===e?Jr.Current:"RESET"===e?Jr.Reset:k("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Ae.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ae.MIN:t.readTime?this.fromVersion(t.readTime):Ae.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof It)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Nt)t={delete:this.toName(e.key)};else if(e instanceof At)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else if(e instanceof Dt)t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}};else{if(!(e instanceof Lt))return k("Unknown mutation type "+e.type);t={verify:this.toName(e.key)}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Et.NONE;if(e.update){ki(e.update.name,"name");var r=this.fromName(e.update.name),o=this.fromFields(e.update.fields||{});if(e.updateMask){var c=this.fromDocumentMask(e.updateMask);return new At(r,o,c,n)}return new It(r,o,n)}if(e.delete){r=this.fromName(e.delete);return new Nt(r,n)}if(e.transform){r=this.fromName(e.transform.document);var l=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return C(!0===n.exists,'Transforms only support precondition "exists == true"'),new Dt(r,l)}if(e.verify){r=this.fromName(e.verify);return new Lt(r,n)}return k("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return C(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:k("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Et.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Et.exists(e.exists):Et.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(Ae.MIN)&&(r=this.fromVersion(t));var o=null;return e.transformResults&&e.transformResults.length>0&&(o=e.transformResults.map((function(e){return n.fromValue(e)}))),new _t(r,o)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(C(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof pi)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fi)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof mi)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof yi)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw k("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)C("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=pi.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new fi(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e){r=e.removeAllFromArray.values||[];n=new mi(r.map((function(e){return t.fromValue(e)})))}else if("increment"in e){var o=this.fromValue(e.increment);C(o instanceof Ft,"NUMERIC_ADD transform requires a NumberValue"),n=new yi(o)}else k("Unknown transform proto: "+JSON.stringify(e));var c=be.fromServerFormat(e.fieldPath);return new St(c,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;C(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return dr.atPath(this.fromQueryPath(n)).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},path=e.path;null!==e.collectionGroup?(C(path.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(path),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(C(path.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(path.popLast()),t.structuredQuery.from=[{collectionId:path.lastSegment()}]);var n=this.toFilter(e.filters);n&&(t.structuredQuery.where=n);var r=this.toOrder(e.orderBy);r&&(t.structuredQuery.orderBy=r);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var path=this.fromQueryPath(e.parent),t=e.structuredQuery,n=t.from?t.from.length:0,r=null;if(n>0){C(1===n,"StructuredQuery.from with more than one collection is not supported.");var o=t.from[0];o.allDescendants?r=o.collectionId:path=path.child(o.collectionId)}var c=[];t.where&&(c=this.fromFilter(t.where));var l=[];t.orderBy&&(l=this.fromOrder(t.orderBy));var h=null;t.limit&&(h=this.fromInt32Value(t.limit));var d=null;t.startAt&&(d=this.fromCursor(t.startAt));var f=null;return t.endAt&&(f=this.fromCursor(t.endAt)),new dr(path,r,l,c,h,cr.First,d,f).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case En.Listen:return null;case En.ExistenceFilterMismatch:return"existence-filter-mismatch";case En.LimboResolution:return"limbo-document";default:return k("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(filter){return filter instanceof mr?t.toUnaryOrFieldFilter(filter):k("Unrecognized filter: "+JSON.stringify(filter))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(filter){var e=this;return filter?void 0!==filter.unaryFilter?[this.fromUnaryFilter(filter)]:void 0!==filter.fieldFilter?[this.fromFieldFilter(filter)]:void 0!==filter.compositeFilter?filter.compositeFilter.filters.map((function(t){return e.fromFilter(t)})).reduce((function(e,t){return e.concat(t)})):k("Unknown filter: "+JSON.stringify(filter)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(cursor){var e=this;return{before:cursor.before,values:cursor.position.map((function(component){return e.toValue(component)}))}},e.prototype.fromCursor=function(cursor){var e=this,t=!!cursor.before,n=cursor.values.map((function(component){return e.fromValue(component)}));return new _r(n,t)},e.prototype.toDirection=function(e){return Ti[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return Sr.ASCENDING;case"DESCENDING":return Sr.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return Si[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return fr.EQUAL;case"GREATER_THAN":return fr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return fr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return fr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return fr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return fr.ARRAY_CONTAINS;case"IN":return fr.IN;case"ARRAY_CONTAINS_ANY":return fr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return k("Unspecified operator");default:return k("Unknown operator")}},e.prototype.toFieldPathReference=function(path){return{fieldPath:path.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return be.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new kr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(filter){return mr.create(this.fromFieldPathReference(filter.fieldFilter.field),this.fromOperatorName(filter.fieldFilter.op),this.fromValue(filter.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(filter){if(filter.op===fr.EQUAL){if(filter.value.isEqual(Bt.NAN))return{unaryFilter:{field:this.toFieldPathReference(filter.field),op:"IS_NAN"}};if(filter.value.isEqual(Pt.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(filter.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(filter.field),op:this.toOperatorName(filter.op),value:this.toValue(filter.value)}}},e.prototype.fromUnaryFilter=function(filter){switch(filter.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(filter.unaryFilter.field);return mr.create(e,fr.EQUAL,Bt.NAN);case"IS_NULL":var t=this.fromFieldPathReference(filter.unaryFilter.field);return mr.create(t,fr.EQUAL,Pt.INSTANCE);case"OPERATOR_UNSPECIFIED":return k("Unspecified filter");default:return k("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(path){return be.fromServerFormat(path)}));return Tt.fromArray(t)},e}(),xi=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},Ii=function(){function e(e){this.syncEngine=e,this.queries=new Zt((function(q){return q.canonicalId()})),this.onlineState=Fr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);(r||(n=!0,r=new xi,this.queries.set(t,r)),r.listeners.push(e),C(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return l.__generator(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var o=r[n],c=o.query,l=this.queries.get(c);if(l){for(var h=0,d=l.listeners;h<d.length;h++){d[h].onViewSnapshot(o)&&(t=!0)}l.viewSnap=o}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,o=n.listeners;r<o.length;r++){o[r].onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var o=0,c=r.listeners;o<c.length;o++){c[o].applyOnlineStateChange(e)&&(t=!0)}})),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},e}(),Ai=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Fr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(C(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var o=r[n];o.type!==Gr.Metadata&&t.push(o)}e=new ei(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var c=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),c=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),c=!0),this.snap=e,c},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){if(C(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Fr.Offline;return this.options.waitForSyncWhenOnline&&n?(C(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Fr.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){C(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=ei.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Di=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=ze(),o=ze(),c=0,l=n.docChanges;c<l.length;c++){var h=l[c];switch(h.type){case Gr.Added:r=r.add(h.doc.key);break;case Gr.Removed:o=o.add(h.doc.key)}}return new e(t,n.fromCache,r,o)},e}(),Ni=function(e){this.key=e},Li=function(e){this.key=e},Oi=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=ze(),this.mutatedKeys=ze(),this.documentSet=new Xr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Zr,o=t?t.documentSet:this.documentSet,c=t?t.mutatedKeys:this.mutatedKeys,l=o,h=!1,d=this.query.hasLimitToFirst()&&o.size===this.query.limit?o.last():null,f=this.query.hasLimitToLast()&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((function(e,t){var m=o.get(e),y=t instanceof Yt?t:null;y&&(C(e.isEqual(y.key),"Mismatching keys found in document changes: "+e+" != "+y.key),y=n.query.matches(y)?y:null);var v=!!m&&n.mutatedKeys.has(m.key),w=!!y&&(y.hasLocalMutations||n.mutatedKeys.has(y.key)&&y.hasCommittedMutations),T=!1;m&&y?m.data().isEqual(y.data())?v!==w&&(r.track({type:Gr.Metadata,doc:y}),T=!0):n.shouldWaitForSyncedDocument(m,y)||(r.track({type:Gr.Modified,doc:y}),T=!0,(d&&n.query.docComparator(y,d)>0||f&&n.query.docComparator(y,f)<0)&&(h=!0)):!m&&y?(r.track({type:Gr.Added,doc:y}),T=!0):m&&!y&&(r.track({type:Gr.Removed,doc:m}),T=!0,(d||f)&&(h=!0));T&&(y?(l=l.add(y),c=w?c.add(e):c.delete(e)):(l=l.delete(e),c=c.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;l.size>this.query.limit;){var m=this.query.hasLimitToFirst()?l.last():l.first();l=l.delete(m.key),c=c.delete(m.key),r.track({type:Gr.Removed,doc:m})}return C(!h||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:l,changeSet:r,needsRefill:h,mutatedKeys:c}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;C(!e.needsRefill,"Cannot apply changes that need a refill");var o=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var c=e.changeSet.getChanges();c.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case Gr.Added:return 1;case Gr.Modified:case Gr.Metadata:return 2;case Gr.Removed:return 0;default:return k("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var l=t?this.updateLimboDocuments():[],h=0===this.limboDocuments.size&&this.current?Yr.Synced:Yr.Local,d=h!==this.syncState;return this.syncState=h,0!==c.length||d?{snapshot:new ei(this.query,e.documentSet,o,c,e.mutatedKeys,h===Yr.Local,d,!1),limboChanges:l}:{limboChanges:l}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Fr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Zr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return C(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=ze(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new Li(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new Ni(e))})),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=ze();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return ei.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Yr.Local)},e}();var Mi=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new Rr(this.asyncQueue,le.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return l.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return l.__generator(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!sr(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var code=e.code;return"aborted"===code||"failed-precondition"===code||!$r(code)}return!1},e}(),Pi=function(e,t,view){this.query=e,this.targetId=t,this.view=view},Ri=function(e){this.key=e,this.receivedDocument=!1},Fi=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Zt((function(q){return q.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new De(we.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new qn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=ft.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Fr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){C(null!==e,"SyncEngine listener cannot be null"),C(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,c;return l.__generator(this,(function(l){switch(l.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return o=l.sent(),c=this.sharedClientState.addLocalQueryTarget(o.targetId),t=o.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===c)];case 3:n=l.sent(),this.isPrimary&&this.remoteStore.listen(o),l.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return l.__awaiter(this,void 0,void 0,(function(){var r,view,o,c,h,data;return l.__generator(this,(function(l){switch(l.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=l.sent(),view=new Oi(e,r.remoteKeys),o=view.computeDocChanges(r.documents),c=ni.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Fr.Offline),C(0===(h=view.applyChanges(o,!0===this.isPrimary,c)).limboChanges.length,"View returned limbo docs before target ack from the server."),C(!!h.snapshot,"applyChanges for new view should always return a snapshot"),data=new Pi(e,t,view),this.queryViewsByQuery.set(e,data),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,h.snapshot]}}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n;return l.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},e.prototype.unlisten=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return l.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("unlisten()"),C(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),(n=this.queriesByTarget[t.targetId]).length>1?(this.queriesByTarget[t.targetId]=n.filter((function(q){return!q.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(jn)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},e.prototype.runTransaction=function(e,t,n){new Mi(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n=this;return l.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),M(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(C(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?C(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(C(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,jn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.applyOnlineStateChange=function(e,source){if(this.isPrimary&&source===qr.RemoteStore||!this.isPrimary&&source===qr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var t=[];this.queryViewsByQuery.forEach((function(n,r){var o=r.view.applyOnlineStateChange(e);C(0===o.limboChanges.length,"OnlineState should not affect limbo documents."),o.snapshot&&t.push(o.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(t),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return l.__awaiter(this,void 0,void 0,(function(){var n,r,o,c,h,d=this;return l.__generator(this,(function(l){switch(l.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],o=(o=new De(we.comparator)).insert(r,new Xt(r,Ae.forDeletedDoc())),c=ze().add(r),h=new ti(Ae.MIN,{},new Me(oe),o,c),[2,this.applyRemoteEvent(h)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return d.removeAndCleanupTarget(e,t)})).catch(jn)];case 2:l.sent(),l.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return l.__awaiter(this,void 0,void 0,(function(){var r;return l.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=o.sent())?(T("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return o.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):k("Unknown batchState: "+t),o.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return o.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n;return l.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,jn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.rejectFailedWrite=function(e,t){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,jn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.registerPendingWritesCallback=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n;return l.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||T("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}}))}))},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new A(I.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new De(oe)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(C(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),C(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,o=this.queriesByTarget[e];r<o.length;r++){var c=o[r];this.queryViewsByQuery.delete(c),t&&this.syncEngineListener.onWatchError(c,t)}if(delete this.queriesByTarget[e],this.isPrimary){var l=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),l.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o instanceof Ni)this.limboDocumentRefs.addReference(o.key,e),this.trackLimboChange(o);else if(o instanceof Li){T("SyncEngine","Document no longer in limbo: "+o.key),this.limboDocumentRefs.removeReference(o.key,e),this.limboDocumentRefs.containsKey(o.key)||this.removeLimboTarget(o.key)}else k("Unknown limbo change: "+JSON.stringify(o))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){T("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=dr.atPath(t.path);this.limboResolutionsByTarget[n]=new Ri(t),this.remoteStore.listen(new On(r.toTarget(),n,En.LimboResolution,me.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return l.__awaiter(this,void 0,void 0,(function(){var n,r,o,c=this;return l.__generator(this,(function(l){switch(l.label){case 0:return n=[],r=[],o=[],this.queryViewsByQuery.forEach((function(l,h){o.push(Promise.resolve().then((function(){var t=h.view.computeDocChanges(e);return t.needsRefill?c.localStore.executeQuery(h.query,!1).then((function(e){var n=e.documents;return h.view.computeDocChanges(n,t)})):t})).then((function(e){var o=t&&t.targetChanges[h.targetId],l=h.view.applyChanges(e,!0===c.isPrimary,o);if(c.updateTrackedLimbos(h.targetId,l.limboChanges),l.snapshot){c.isPrimary&&c.sharedClientState.updateQueryState(h.targetId,l.snapshot.fromCache?"not-current":"current"),n.push(l.snapshot);var d=Di.fromSnapshot(h.targetId,l.snapshot);r.push(d)}})))})),[4,Promise.all(o)];case 1:return l.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return l.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){C(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n;return l.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,c,h,d,f=this;return l.__generator(this,(function(l){switch(l.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return l.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=l.sent(),r=0,o=n;r<o.length;r++)c=o[r],this.remoteStore.listen(c);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,h=[],d=Promise.resolve(),O(this.queriesByTarget,(function(e,t){f.sharedClientState.isLocalQueryTarget(e)?h.push(e):d=d.then((function(){return f.removeAndCleanupTarget(e),f.localStore.releaseTarget(e,!0)})),f.remoteStore.unlisten(e)})),[4,d]);case 4:return l.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(h)];case 5:return l.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;O(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new De(we.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return l.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,c,h,d,f,m,y,v,w,T;return l.__generator(this,(function(l){switch(l.label){case 0:t=[],n=[],r=0,o=e,l.label=1;case 1:return r<o.length?(c=o[r],h=void 0,(d=this.queriesByTarget[c])&&0!==d.length?[4,this.localStore.releaseTarget(c,!0)]:[3,8]):[3,14];case 2:return l.sent(),[4,this.localStore.allocateTarget(d[0].toTarget())];case 3:h=l.sent(),f=0,m=d,l.label=4;case 4:return f<m.length?(y=m[f],C(!!(v=this.queryViewsByQuery.get(y)),"No query view found for "+y),[4,this.synchronizeViewAndComputeSnapshot(v)]):[3,7];case 5:(w=l.sent()).snapshot&&n.push(w.snapshot),l.label=6;case 6:return f++,[3,4];case 7:return[3,12];case 8:return C(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(c)];case 9:return C(!!(T=l.sent()),"Target for id "+c+" not found"),[4,this.localStore.allocateTarget(T)];case 10:return h=l.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(T),c,!1)];case 11:l.sent(),l.label=12;case 12:t.push(h),l.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},e.prototype.synthesizeTargetToQuery=function(e){return new dr(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,cr.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return l.__awaiter(this,void 0,void 0,(function(){var r,o;return l.__generator(this,(function(c){switch(c.label){case 0:if(this.isPrimary)return T("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=c.sent(),o=ti.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,o)];case 3:return c.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return c.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:k("Unexpected target state: "+t),c.label=7;case 7:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return l.__awaiter(this,void 0,void 0,(function(){var n,r,o,c,h,d,f,m,y,v=this;return l.__generator(this,(function(w){switch(w.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,w.label=1;case 1:return n<r.length?(y=r[n],C(!this.queriesByTarget[y],"Trying to add an already active target"),[4,this.localStore.getTarget(y)]):[3,6];case 2:return C(!!(o=w.sent()),"Query data for active target "+y+" not found"),[4,this.localStore.allocateTarget(o)];case 3:return c=w.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(o),c.targetId,!1)];case 4:w.sent(),this.remoteStore.listen(c),w.label=5;case 5:return n++,[3,1];case 6:h=function(e){return l.__generator(this,(function(t){switch(t.label){case 0:return d.queriesByTarget[e]?[4,d.localStore.releaseTarget(e,!1).then((function(){v.remoteStore.unlisten(e),v.removeAndCleanupTarget(e)})).catch(jn)]:[2,"continue"];case 1:return t.sent(),[2]}}))},d=this,f=0,m=t,w.label=7;case 7:return f<m.length?(y=m[f],[5,h(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return ze().add(t.key);var n=ze(),r=this.queriesByTarget[e];if(!r)return n;for(var o=0,c=r;o<c.length;o++){var l=c[o],h=this.queryViewsByQuery.get(l);C(!!h,"No query view found for "+l),n=n.unionWith(h.view.syncedDocuments)}return n},e}(),qi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}();function Vi(e,t){return C(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),"firestore_clients_"+e+"_"+t}function Bi(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function ji(e,t){return"firestore_targets_"+e+"_"+t}var Ui="SharedClientState",Hi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,C(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var o=JSON.parse(r),c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error),l=void 0;return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(l=new A(o.error.code,o.error.message)),c?new e(t,n,o.state,l):(S(Ui,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),zi=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,C(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),c=void 0;return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(c=new A(r.error.code,r.error.message)),o?new e(t,r.state,c):(S(Ui,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Wi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),o="object"==typeof r&&r.activeTargetIds instanceof Array,c=$e(),i=0;o&&i<r.activeTargetIds.length;++i)o=ur(r.activeTargetIds[i]),c=c.add(r.activeTargetIds[i]);return o?new e(t,c):(S(Ui,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),$i=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in Fr&&"string"==typeof n.clientId?new e(n.clientId,Fr[n.onlineState]):(S(Ui,"Failed to parse online state: "+t),null)},e}(),Ki=function(){function e(){this.activeTargetIds=$e()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var data={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(data)},e}(),Qi=function(){function e(t,n,r,o,c){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new A(I.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=c,this.localClientStorageKey=Vi(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new Ki,this.clientStateKeyRe=new RegExp("^firestore_clients_"+l+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+l+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+l+"_(\\d+)$"),this.onlineStateKey=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return l.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,o,c,h,d,f,m,y,v=this;return l.__generator(this,(function(l){switch(l.label){case 0:return C(!this.started,"WebStorageSharedClientState already started"),C(null!==this.syncEngine,"syncEngine property must be set before calling start()"),C(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=l.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(o=this.getItem(Vi(this.persistenceKey,r)))&&(c=Wi.fromWebStorageEntry(r,o))&&(this.activeClients[c.clientId]=c);for(this.persistClientState(),(h=this.storage.getItem(this.onlineStateKey))&&(d=this.fromWebStorageOnlineState(h))&&this.handleOnlineStateEvent(d),f=0,m=this.earlyEvents;f<m.length;f++)y=m[f],this.handleWebStorageEvent(y);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return v.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=$e();return M(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ji(this.persistenceKey,e));if(n){var r=zi.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(ji(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return T(Ui,"READ",e,t),t},e.prototype.setItem=function(e,t){T(Ui,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){T(Ui,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(T(Ui,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void S("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return l.__awaiter(t,void 0,void 0,(function(){var t,n,r,o,c,h;return l.__generator(this,(function(l){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(o=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(o)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(c=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(c)]}else e.key===this.sequenceNumberKey&&(C(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(h=function(e){var t=me.INVALID;if(null!=e)try{var n=JSON.parse(e);C("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){S(Ui,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==me.INVALID&&this.sequenceNumberHandler(h));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Hi(this.currentUser,e,t,n),o=Bi(this.persistenceKey,this.currentUser,e);this.setItem(o,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=Bi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Fr[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=ji(this.persistenceKey,e),o=new zi(e,t,n);this.setItem(r,o.toWebStorageJSON())},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return C(null!==n,"Cannot parse client state key '"+e+"'"),Wi.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);C(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),o=void 0!==n[2]?n[2]:null;return Hi.fromWebStorageEntry(new qi(o),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);C(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return zi.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return $i.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(T(Ui,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var o=this.getAllActiveQueryTargets(),c=[],h=[];return o.forEach((function(e){return l.__awaiter(n,void 0,void 0,(function(){return l.__generator(this,(function(t){return r.has(e)||c.push(e),[2]}))}))})),r.forEach((function(e){return l.__awaiter(n,void 0,void 0,(function(){return l.__generator(this,(function(t){return o.has(e)||h.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(c,h)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();var Gi=function(){function e(){this.localState=new Ki,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Ki,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Yi=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return Wn.withCacheSize(this.cacheSizeBytes)},e}(),Xi=function(){},Ji=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=ie.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new Te,r=new Te,o=!1;return this.credentials.setChangeListener((function(c){o?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(c)})):(o=!0,t.initializePersistence(e,r,c).then((function(e){return t.initializeRest(c,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Yi?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof A?e.code===I.FAILED_PRECONDITION||e.code===I.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new A(I.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Xn.buildStoragePrefix(this.databaseInfo),o=new Ei(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return l.__awaiter(n,void 0,void 0,(function(){var n,c;return l.__generator(this,(function(l){switch(l.label){case 0:if(t.synchronizeTabs&&!Qi.isAvailable(this.platform))throw new A(I.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Qi(this.asyncQueue,this.platform,r,this.clientId,e):new Gi,[4,Xn.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:o,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return c=l.sent(),this.persistence=c,[2,c.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=Lr.createEagerPersistence(this.clientId),this.sharedClientState=new Gi,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return T("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return l.__awaiter(n,void 0,void 0,(function(){var n,o,c,h,d,f,m=this;return l.__generator(this,(function(y){switch(y.label){case 0:return n=new xr,this.localStore=new Bn(this.persistence,n,e),[4,this.localStore.start()];case 1:return y.sent(),t&&(this.lruScheduler=new $n(t,this.asyncQueue,this.localStore)),o=this.platform.newConnectivityMonitor(),c=this.platform.newSerializer(this.databaseInfo.databaseId),h=new Ur(this.asyncQueue,r,this.credentials,c),d=function(e){return m.syncEngine.applyOnlineStateChange(e,qr.RemoteStore)},f=function(e){return m.syncEngine.applyOnlineStateChange(e,qr.SharedClientState)},this.remoteStore=new hi(this.localStore,h,this.asyncQueue,d,o),this.syncEngine=new Fi(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=f,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Ii(this.syncEngine),[4,this.sharedClientState.start()];case 2:return y.sent(),[4,this.remoteStore.start()];case 3:return y.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return l.__awaiter(m,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return y.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return l.__awaiter(m,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return y.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return l.__awaiter(e,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new Te;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var o=new Ai(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(o)})),o},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Yt)return e;if(e instanceof Xt)return null;throw new A(I.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return l.__awaiter(t,void 0,void 0,(function(){var t,view,n;return l.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=r.sent(),view=new Oi(e,t.remoteKeys),n=view.computeDocChanges(t.documents),[2,view.applyChanges(n,!1).snapshot]}}))}))}))},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new Te;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new Te;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},e}(),Zi=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),eo=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];j("FieldPath",e,"fieldNames",1);for(var i=0;i<e.length;++i)if(U("FieldPath","string",i,e[i]),0===e[i].length)throw new A(I.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ee("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(be.keyField().canonicalString()),e}(),to=new RegExp("[~\\*/\\[\\]]");var no=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},ro=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){C(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(qi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){C(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),io=function(){function e(e){var t=this;this.tokenListener=null,this.currentUser=qi.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}return e.prototype.getToken=function(){var e=this;C(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new A(I.ABORTED,"getToken aborted due to token change.");return n?(C("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new no(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){C(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){C(null!=this.tokenListener,"removeChangeListener() called twice"),C(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return C(null===e||"string"==typeof e,"Received invalid UID: "+e),new qi(e)},e}(),oo=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=qi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),ao=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new oo(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(qi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function so(e){if(!e)return new ro;switch(e.type){case"gapi":var t=e.client;return C(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new ao(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new A(I.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function uo(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var object=e,n=0,r=t;n<r.length;n++){var o=r[n];if(o in object&&"function"==typeof object[o])return!0}return!1}(e,["next","error","complete"])}var co,lo=function(){function e(e){this._methodName=e}return e.delete=function(){return R("FieldValue.delete",arguments),ho.instance},e.serverTimestamp=function(){return R("FieldValue.serverTimestamp",arguments),po.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return V("FieldValue.arrayUnion",arguments,1),new fo(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return V("FieldValue.arrayRemove",arguments,1),new mo(e)},e.increment=function(e){return U("FieldValue.increment","number",1,e),F("FieldValue.increment",arguments,1),new yo(e)},e.prototype.isEqual=function(e){return this===e},e}(),ho=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return l.__extends(t,e),t.instance=new t,t}(lo),po=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return l.__extends(t,e),t.instance=new t,t}(lo),fo=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return l.__extends(t,e),t}(lo),mo=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return l.__extends(t,e),t}(lo),yo=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return l.__extends(t,e),t}(lo),go=D(lo,"Use FieldValue.<field>() instead."),vo=/^__.*__$/,bo=function(){function e(data,e,t){this.data=data,this.fieldMask=e,this.fieldTransforms=t}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new At(e,this.data,this.fieldMask,t)):n.push(new It(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new Dt(e,this.fieldTransforms)),n},e}(),wo=function(){function e(data,e,t){this.data=data,this.fieldMask=e,this.fieldTransforms=t}return e.prototype.toMutations=function(e,t){var n=[new At(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new Dt(e,this.fieldTransforms)),n},e}();function To(e){switch(e){case co.Set:case co.MergeSet:case co.Update:return!0;case co.Argument:case co.ArrayArgument:return!1;default:throw k("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e[e.ArrayArgument=4]="ArrayArgument"}(co||(co={}));var So=function(){function e(e,t,path,n,r,o){this.dataSource=e,this.methodName=t,this.path=path,this.arrayElement=n,void 0===r&&this.validatePath(),this.arrayElement=void 0!==n&&n,this.fieldTransforms=r||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new A(I.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var i=0;i<this.path.length;i++)this.validatePathSegment(this.path.get(i))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(To(this.dataSource)&&vo.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),_o=function(e,t){this.databaseId=e,this.key=t},ko=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,input){var t=new So(co.Set,e,be.EMPTY_PATH);Eo("Data must be an object, but it was:",t,input);var n=this.parseData(input,t);return new bo(n,null,t.fieldTransforms)},e.prototype.parseMergeData=function(e,input,t){var n=new So(co.MergeSet,e,be.EMPTY_PATH);Eo("Data must be an object, but it was:",n,input);var r,o,c=this.parseData(input,n);if(t){for(var l=new Me(be.comparator),h=0,d=t;h<d.length;h++){var f=d[h],m=void 0;if(f instanceof eo)m=f._internalPath;else{if("string"!=typeof f)throw k("Expected stringOrFieldPath to be a string or a FieldPath");m=Io(e,f)}if(!n.contains(m))throw new A(I.INVALID_ARGUMENT,"Field '"+m+"' is specified in your field mask but missing from your input data.");l=l.add(m)}r=Tt.fromSet(l),o=n.fieldTransforms.filter((function(e){return r.covers(e.field)}))}else r=Tt.fromArray(n.fieldMask),o=n.fieldTransforms;return new bo(c,r,o)},e.prototype.parseUpdateData=function(e,input){var t=this,n=new So(co.Update,e,be.EMPTY_PATH);Eo("Data must be an object, but it was:",n,input);var r=new Me(be.comparator),o=Kt.EMPTY;M(input,(function(c,l){var path=Io(e,c),h=n.childContextForFieldPath(path);if((l=t.runPreConverter(l,h))instanceof ho)r=r.add(path);else{var d=t.parseData(l,h);null!=d&&(r=r.add(path),o=o.set(path,d))}}));var mask=Tt.fromSet(r);return new wo(o,mask,n.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var o=new So(co.Update,e,be.EMPTY_PATH),c=[xo(e,t)],l=[n];if(r.length%2!=0)throw new A(I.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var i=0;i<r.length;i+=2)c.push(xo(e,r[i])),l.push(r[i+1]);var h=new Me(be.comparator),d=Kt.EMPTY;for(i=0;i<c.length;++i){var path=c[i],f=o.childContextForFieldPath(path),m=this.runPreConverter(l[i],f);if(m instanceof ho)h=h.add(path);else{var y=this.parseData(m,f);null!=y&&(h=h.add(path),d=d.set(path,y))}}var mask=Tt.fromSet(h);return new wo(d,mask,o.fieldTransforms)},e.prototype.parseQueryValue=function(e,input,t){void 0===t&&(t=!1);var n=new So(t?co.ArrayArgument:co.Argument,e,be.EMPTY_PATH),r=this.parseData(input,n);return C(null!=r,"Parsed data should not be null."),C(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(input,e){try{return this.preConverter(input)}catch(n){var t=Ao(n);throw e.createError(t)}},e.prototype.parseData=function(input,e){if(Co(input=this.runPreConverter(input,e)))return Eo("Unsupported field value:",e,input),this.parseObject(input,e);if(input instanceof lo)return this.parseSentinelFieldValue(input,e),null;if(e.path&&e.fieldMask.push(e.path),input instanceof Array){if(e.arrayElement&&e.dataSource!==co.ArrayArgument)throw e.createError("Nested arrays are not supported");return this.parseArray(input,e)}return this.parseScalarValue(input,e)},e.prototype.parseObject=function(e,t){var n=this,r=new De(oe);return P(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):M(e,(function(e,o){var c=n.parseData(o,t.childContextForField(e));null!=c&&(r=r.insert(e,c))})),new Kt(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,o=0,c=e;o<c.length;o++){var l=c[o],h=this.parseData(l,t.childContextForArray(r));null==h&&(h=Pt.INSTANCE),n.push(h),r++}return new Qt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!To(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof ho){if(t.dataSource!==co.MergeSet)throw t.dataSource===co.Update?(C(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof po)t.fieldTransforms.push(new St(t.path,pi.instance));else if(e instanceof fo){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new fi(n);t.fieldTransforms.push(new St(t.path,r))}else if(e instanceof mo){n=this.parseArrayTransformElements(e._methodName,e._elements);var o=new mi(n);t.fieldTransforms.push(new St(t.path,o))}else if(e instanceof yo){var c=this.parseQueryValue("FieldValue.increment",e._operand),l=new yi(c);t.fieldTransforms.push(new St(t.path,l))}else k("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Pt.INSTANCE;if("number"==typeof e)return ur(e)?new Vt(e):new Bt(e);if("boolean"==typeof e)return Rt.of(e);if("string"==typeof e)return new jt(e);if(e instanceof Date)return new Ut(Ie.fromDate(e));if(e instanceof Ie)return new Ut(new Ie(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof di)return new $t(e);if(e instanceof he)return new zt(e);if(e instanceof _o)return new Wt(e.databaseId,e.key);throw t.createError("Unsupported field value: "+X(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(element,i){var t=new So(co.Argument,e,be.EMPTY_PATH);return n.parseData(element,t.childContextForArray(i))}))},e}();function Co(input){return!("object"!=typeof input||null===input||input instanceof Array||input instanceof Date||input instanceof Ie||input instanceof di||input instanceof he||input instanceof _o||input instanceof lo)}function Eo(e,t,input){if(!Co(input)||!Y(input)){var n=X(input);throw"an object"===n?t.createError(e+" a custom object"):t.createError(e+" "+n)}}function xo(e,path){if(path instanceof eo)return path._internalPath;if("string"==typeof path)return Io(e,path);throw new A(I.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Io(e,path){try{return function(path){if(path.search(to)>=0)throw new A(I.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(eo.bind.apply(eo,l.__spreadArrays([void 0],path.split("."))))}catch(e){throw new A(I.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(path)._internalPath}catch(n){var t=Ao(n);throw new A(I.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+t)}}function Ao(e){return e instanceof Error?e.message:e.toString()}var Do=Wn.COLLECTION_DISABLED,No=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new A(I.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else z("settings","non-empty string","host",e.host),this.host=e.host,W("settings","boolean","ssl",e.ssl),this.ssl=L(e.ssl,!0);if(Z("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),W("settings","object","credentials",e.credentials),this.credentials=e.credentials,W("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?S("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&S("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=L(e.timestampsInSnapshots,!0),W("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Wn.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Do&&e.cacheSizeBytes<Wn.MINIMUM_CACHE_SIZE_BYTES)throw new A(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Wn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}W("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),Lo=function(){function e(t,n){var r=this;if(this._firebaseApp=null,this._queue=new _e,this.INTERNAL={delete:function(){return l.__awaiter(r,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var o=t;this._firebaseApp=o,this._databaseId=e.databaseIdFromApp(o),this._persistenceKey=o.name,this._credentials=new io(n)}else{var c=t;if(!c.projectId)throw new A(I.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new fe(c.projectId,c.database),this._persistenceKey="[DEFAULT]",this._credentials=new ro}this._settings=new No({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(F("Firestore.settings",arguments,1),U("Firestore.settings","object",1,e),N(e,"persistence"))throw new A(I.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new No(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new A(I.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=so(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new A(I.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&S("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=L(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Yi(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Xn.buildStoragePrefix(this.makeDatabaseInfo()),n=new Te;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return l.__awaiter(e,void 0,void 0,(function(){var e;return l.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new A(I.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Xn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),uo(e))return this.onSnapshotsInSyncInternal(e);U("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Zi({next:function(){e.next&&e.next()},error:function(e){throw k("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Xi),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new pe(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){C(!!this._settings.host,"FirestoreSettings.host is not set"),C(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Ji(E.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new ko((function(t){if(t instanceof Po){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new A(I.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new _o(e,t._key)}return t}))},e.databaseIdFromApp=function(e){var t=e.options;if(!N(t,"projectId"))throw new A(I.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new A(I.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new fe(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new A(I.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return F("Firestore.collection",arguments,1),U("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new jo(ge.fromString(e),this)},e.prototype.doc=function(e){return F("Firestore.doc",arguments,1),U("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Po.forPath(ge.fromString(e),this)},e.prototype.collectionGroup=function(e){if(F("Firestore.collectionGroup",arguments,1),U("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new A(I.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Vo(new dr(ge.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return F("Firestore.runTransaction",arguments,1),U("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Oo(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new Mo(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(v()){case o.DEBUG:return"debug";case o.ERROR:return"error";case o.SILENT:return"silent";default:return k("Unknown log level: "+v())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(F("Firestore.setLogLevel",arguments,1),U("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":w(o.DEBUG);break;case"error":w(o.ERROR);break;case"silent":w(o.SILENT);break;default:throw new A(I.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Oo=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;F("Transaction.get",arguments,1);var n=Wo("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return k("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Xt)return new Fo(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Yt)return new Fo(t._firestore,n._key,r,!1,!1,n._converter);throw k("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){B("Transaction.set",arguments,2,3);var r=Wo("Transaction.set",e,this._firestore);n=Uo("Transaction.set",n);var o=Ko(r._converter,t,"Transaction.set"),c=o[0],l=o[1],h=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(l,c,n.mergeFields):this._firestore._dataConverter.parseSetData(l,c);return this._transaction.set(r._key,h),this},e.prototype.update=function(e,t,n){for(var r,o,c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return"string"==typeof t||t instanceof eo?(V("Transaction.update",arguments,3),r=Wo("Transaction.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,c)):(F("Transaction.update",arguments,2),r=Wo("Transaction.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,o),this},e.prototype.delete=function(e){F("Transaction.delete",arguments,1);var t=Wo("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Mo=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){B("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Wo("WriteBatch.set",e,this._firestore);n=Uo("WriteBatch.set",n);var o=Ko(r._converter,t,"WriteBatch.set"),c=o[0],l=o[1],h=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(l,c,n.mergeFields):this._firestore._dataConverter.parseSetData(l,c);return this._mutations=this._mutations.concat(h.toMutations(r._key,Et.NONE)),this},e.prototype.update=function(e,t,n){for(var r,o,c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return this.verifyNotCommitted(),"string"==typeof t||t instanceof eo?(V("WriteBatch.update",arguments,3),r=Wo("WriteBatch.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,c)):(F("WriteBatch.update",arguments,2),r=Wo("WriteBatch.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(o.toMutations(r._key,Et.exists(!0))),this},e.prototype.delete=function(e){F("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Wo("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Nt(t._key,Et.NONE)),this},e.prototype.commit=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new A(I.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Po=function(){function e(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(path,t,n){if(path.length%2!=0)throw new A(I.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+path.canonicalString()+" has "+path.length);return new e(new we(path),t,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new jo(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(F("DocumentReference.collection",arguments,1),U("DocumentReference.collection","non-empty string",1,e),!e)throw new A(I.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var path=ge.fromString(e);return new jo(this._key.path.child(path),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ee("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},e.prototype.set=function(e,t){B("DocumentReference.set",arguments,1,2),t=Uo("DocumentReference.set",t);var n=Ko(this._converter,e,"DocumentReference.set"),r=n[0],o=n[1],c=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(o,r,t.mergeFields):this.firestore._dataConverter.parseSetData(o,r);return this._firestoreClient.write(c.toMutations(this._key,Et.NONE))},e.prototype.update=function(e,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return"string"==typeof e||e instanceof eo?(V("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(F("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,Et.exists(!0)))},e.prototype.delete=function(){return F("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Nt(this._key,Et.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];B("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||uo(e[o])||(Z("DocumentReference.onSnapshot",r=e[o],["includeMetadataChanges"]),W("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++);var c={includeMetadataChanges:r.includeMetadataChanges};return uo(e[o])?n=e[o]:(U("DocumentReference.onSnapshot","function",o,e[o]),H("DocumentReference.onSnapshot","function",o+1,e[o+1]),H("DocumentReference.onSnapshot","function",o+2,e[o+2]),n={next:e[o],error:e[o+1],complete:e[o+2]}),this.onSnapshotInternal(c,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var o=new Zi({next:function(e){if(t.next){C(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Fo(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),c=this._firestoreClient.listen(dr.atPath(this._key.path),o,e);return function(){o.mute(),n._firestoreClient.unlisten(c)}},e.prototype.get=function(e){var t=this;return B("DocumentReference.get",arguments,0,1),zo("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new Fo(t.firestore,t._key,e,!0,e instanceof Yt&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),!o.exists&&o.metadata.fromCache?t(new A(I.UNAVAILABLE,"Failed to get document because the client is offline.")):o.exists&&o.metadata.fromCache&&n&&"server"===n.source?t(new A(I.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(o)},error:t})},e.prototype.withConverter=function(t){return new e(this._key,this.firestore,t)},e}(),Ro=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Fo=function(){function e(e,t,n,r,o,c){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=o,this._converter=c}return e.prototype.data=function(e){if(B("DocumentSnapshot.data",arguments,0,1),e=Ho("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new qo(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),Ot.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},e.prototype.get=function(e,t){if(B("DocumentSnapshot.get",arguments,1,2),t=Ho("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(xo("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,Ot.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Po(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Ro(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw ee("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},e.prototype.toJSObject=function(data,e){var t=this,n={};return data.forEach((function(r,o){n[r]=t.toJSValue(o,e)})),n},e.prototype.toJSValue=function(e,t){if(e instanceof Kt)return this.toJSObject(e,t);if(e instanceof Qt)return this.toJSArray(e,t);if(e instanceof Wt){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||S("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Po(n,this._firestore,this._converter)}return e.value(t)},e.prototype.toJSArray=function(data,e){var t=this;return data.internalValue.map((function(n){return t.toJSValue(n,e)}))},e}(),qo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(t,e),t.prototype.data=function(t){var data=e.prototype.data.call(this,t);return C(void 0!==data,"Document in a QueryDocumentSnapshot should exist"),data},t}(Fo),Vo=function(){function e(e,t,n){this._query=e,this.firestore=t,this._converter=n}return e.prototype.where=function(t,n,r){F("Query.where",arguments,3),J("Query.where",3,r);var o,c=["<","<=","==",">=",">","array-contains","in","array-contains-any"];Q("Query.where",c,2,n);var l=xo("Query.where",t),h=fr.fromString(n);if(l.isKeyField()){if(h===fr.ARRAY_CONTAINS||h===fr.ARRAY_CONTAINS_ANY)throw new A(I.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+h.toString()+"' queries on FieldPath.documentId().");if(h===fr.IN){this.validateDisjunctiveFilterElements(r,h);for(var d=[],f=0,m=r;f<m.length;f++){var y=m[f];d.push(this.parseDocumentIdValue(y))}o=new Qt(d)}else o=this.parseDocumentIdValue(r)}else h!==fr.IN&&h!==fr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,h),o=this.firestore._dataConverter.parseQueryValue("Query.where",r,h===fr.IN);var filter=mr.create(l,h,o);return this.validateNewFilter(filter),new e(this._query.addFilter(filter),this.firestore,this._converter)},e.prototype.orderBy=function(t,n){var r;if(B("Query.orderBy",arguments,1,2),H("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Sr.ASCENDING;else{if("desc"!==n)throw new A(I.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Sr.DESCENDING}if(null!==this._query.startAt)throw new A(I.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new A(I.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var o=xo("Query.orderBy",t),c=new kr(o,r);return this.validateNewOrderBy(c),new e(this._query.addOrderBy(c),this.firestore,this._converter)},e.prototype.limit=function(t){return F("Query.limit",arguments,1),U("Query.limit","number",1,t),te("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore,this._converter)},e.prototype.limitToLast=function(t){return F("Query.limitToLast",arguments,1),U("Query.limitToLast","number",1,t),te("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore,this._converter)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];V("Query.startAt",arguments,1);var o=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(o),this.firestore,this._converter)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];V("Query.startAfter",arguments,1);var o=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(o),this.firestore,this._converter)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];V("Query.endBefore",arguments,1);var o=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(o),this.firestore,this._converter)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];V("Query.endAt",arguments,1);var o=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(o),this.firestore,this._converter)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ee("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.withConverter=function(t){return new e(this._query,this.firestore,t)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(J(e,1,t),t instanceof Fo){if(n.length>0)throw new A(I.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var o=t;if(!o.exists)throw new A(I.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,o._document,r)}var c=[t].concat(n);return this.boundFromFields(e,c,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],o=0,c=this._query.orderBy;o<c.length;o++){var l=c[o];if(l.field.isKeyField())r.push(new Wt(this.firestore._databaseId,t.key));else{var h=t.field(l.field);if(h instanceof Ht)throw new A(I.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var d=l.field.canonicalString();throw new A(I.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+d+"' (used as the orderBy) does not exist.")}r.push(h)}}return new _r(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new A(I.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var o=[],i=0;i<t.length;i++){var c=t[i];if(r[i].field.isKeyField()){if("string"!=typeof c)throw new A(I.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof c);if(!this._query.isCollectionGroupQuery()&&-1!==c.indexOf("/"))throw new A(I.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+c+"' contains a slash.");var path=this._query.path.child(ge.fromString(c));if(!we.isDocumentKey(path))throw new A(I.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+path+"' is not because it contains an odd number of segments.");var l=new we(path);o.push(new Wt(this.firestore._databaseId,l))}else{var h=this.firestore._dataConverter.parseQueryValue(e,c);o.push(h)}}return new _r(o,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];B("Query.onSnapshot",arguments,1,4);var n,r={},o=0;return"object"!=typeof e[o]||uo(e[o])||(Z("Query.onSnapshot",r=e[o],["includeMetadataChanges"]),W("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++),uo(e[o])?n=e[o]:(U("Query.onSnapshot","function",o,e[o]),H("Query.onSnapshot","function",o+1,e[o+1]),H("Query.onSnapshot","function",o+2,e[o+2]),n={next:e[o],error:e[o+1],complete:e[o+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var o=new Zi({next:function(e){t.next&&t.next(new Bo(n.firestore,n._query,e,n._converter))},error:r}),c=this.firestore.ensureClientConfigured(),l=c.listen(this._query,o,e);return function(){o.mute(),c.unlisten(l)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new A(I.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return B("Query.get",arguments,0,1),zo("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new Bo(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),o.metadata.fromCache&&n&&"server"===n.source?t(new A(I.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(o)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new A(I.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new A(I.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var path=this._query.path.child(ge.fromString(e));if(!we.isDocumentKey(path))throw new A(I.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+path+"' is not because it has an odd number of segments ("+path.length+").");return new Wt(this.firestore._databaseId,new we(path))}if(e instanceof Po){var t=e;return new Wt(this.firestore._databaseId,t._key)}throw new A(I.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+X(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new A(I.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new A(I.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new A(I.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(element){return Number.isNaN(element)})).length>0)throw new A(I.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(filter){if(filter instanceof mr){var e=[fr.ARRAY_CONTAINS,fr.ARRAY_CONTAINS_ANY],t=[fr.IN,fr.ARRAY_CONTAINS_ANY],n=e.indexOf(filter.op)>=0,r=t.indexOf(filter.op)>=0;if(filter.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(filter.field))throw new A(I.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+filter.field.toString()+"'");var c=this._query.getFirstOrderByField();null!==c&&this.validateOrderByAndInequalityMatch(filter.field,c)}else if(r||n){var l=null;if(r&&(l=this._query.findFilterOperator(t)),null===l&&n&&(l=this._query.findFilterOperator(e)),null!=l)throw l===filter.op?new A(I.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+filter.op.toString()+"' filter."):new A(I.INVALID_ARGUMENT,"Invalid query. You cannot use '"+filter.op.toString()+"' filters with '"+l.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new A(I.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Bo=function(){function e(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Ro(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;B("QuerySnapshot.forEach",arguments,1,2),U("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new Vo(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(Z("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),W("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new A(I.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var o,c=0;return n.docChanges.map((function(t){var l=new qo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return C(t.type===Gr.Added,"Invalid event type for first snapshot"),C(!o||n.query.docComparator(o,t.doc)<0,"Got added events in wrong order"),o=t.doc,{type:"added",doc:l,oldIndex:-1,newIndex:c++}}))}var l=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==Gr.Metadata})).map((function(t){var o=new qo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),c=-1,h=-1;return t.type!==Gr.Added&&(C((c=l.indexOf(t.doc.key))>=0,"Index for document not found"),l=l.delete(t.doc.key)),t.type!==Gr.Removed&&(h=(l=l.add(t.doc)).indexOf(t.doc.key)),{type:$o(t.type),doc:o,oldIndex:c,newIndex:h}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ee("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},e.prototype.convertToDocumentImpl=function(e){return new qo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},e}();l.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(Bo.prototype.docChanges,e,{get:function(){return function(){throw new A(I.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var jo=function(e){function t(t,n,r){var o=e.call(this,dr.atPath(t),n,r)||this;if(o._path=t,t.length%2!=1)throw new A(I.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return o}return l.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Po(new we(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(B("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=ie.newId()),U("CollectionReference.doc","non-empty string",1,e),""===e)throw new A(I.INVALID_ARGUMENT,"Document path must be a non-empty string");var path=ge.fromString(e);return Po.forPath(this._query.path.child(path),this.firestore,this._converter)},t.prototype.add=function(e){F("CollectionReference.add",arguments,1);var t=this._converter?this._converter.toFirestore(e):e;U("CollectionReference.add","object",1,t);var n=this.doc();return n.set(e).then((function(){return n}))},t.prototype.withConverter=function(e){return new t(this._path,this.firestore,e)},t}(Vo);function Uo(e,t){if(void 0===t)return{merge:!1};if(Z(e,t,["merge","mergeFields"]),W(e,"boolean","merge",t.merge),$(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(element){return"string"==typeof element||element instanceof eo})),void 0!==t.mergeFields&&void 0!==t.merge)throw new A(I.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Ho(e,t){return void 0===t?{}:(Z(e,t,["serverTimestamps"]),K(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function zo(e,t){H(e,"object",1,t),t&&(Z(e,t,["source"]),K(e,0,"source",t.source,["default","server","cache"]))}function Wo(e,t,n){if(t instanceof Po){if(t.firestore!==n)throw new A(I.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw ee(e,"DocumentReference",1,t)}function $o(e){switch(e){case Gr.Added:return"added";case Gr.Modified:case Gr.Metadata:return"modified";case Gr.Removed:return"removed";default:return k("Unknown change type: "+e)}}function Ko(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Qo=D(Lo,"Use firebase.firestore() instead."),Go=D(Oo,"Use firebase.firestore().runTransaction() instead."),Yo=D(Mo,"Use firebase.firestore().batch() instead."),Xo=D(Po,"Use firebase.firestore().doc() instead."),Jo=D(Fo),Zo=D(qo),ea=D(Vo),ta=D(Bo),na=D(jo,"Use firebase.firestore().collection() instead."),ra={Firestore:Qo,GeoPoint:di,Timestamp:Ie,Blob:de,Transaction:Go,WriteBatch:Yo,DocumentReference:Xo,DocumentSnapshot:Jo,Query:ea,QueryDocumentSnapshot:Zo,QuerySnapshot:ta,CollectionReference:na,FieldPath:eo,FieldValue:go,setLogLevel:Lo.setLogLevel,CACHE_SIZE_UNLIMITED:Do};function ia(e){e.INTERNAL.registerComponent(new component.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new Lo(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){C(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(ra)))}var oa=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),aa=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(0)}},e.prototype.onNetworkUnavailable=function(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(1)}},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),sa=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){C(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){C(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){C(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){C(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){C(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){C(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),ua="Connection",ca={BatchGetDocuments:"batchGet",Commit:"commit"},la="gl-js/ fire/"+m,ha=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var header in t.authHeaders)t.authHeaders.hasOwnProperty(header)&&(e[header]=t.authHeaders[header]);e["X-Goog-Api-Client"]=la},e.prototype.invokeRPC=function(e,t,n){var r=this,o=this.makeUrl(e);return new Promise((function(c,h){var d=new f.XhrIo;d.listenOnce(f.EventType.COMPLETE,(function(){try{switch(d.getLastErrorCode()){case f.ErrorCode.NO_ERROR:var t=d.getResponseJson();T(ua,"XHR received:",JSON.stringify(t)),c(t);break;case f.ErrorCode.TIMEOUT:T(ua,'RPC "'+e+'" timed out'),h(new A(I.DEADLINE_EXCEEDED,"Request time out"));break;case f.ErrorCode.HTTP_ERROR:var n=d.getStatus();if(T(ua,'RPC "'+e+'" failed with status:',n,"response text:",d.getResponseText()),n>0){var r=d.getResponseJson().error;if(r&&r.status&&r.message){var o=(l=r.status,m=l.toLowerCase().replace("_","-"),Object.values(I).indexOf(m)>=0?m:I.UNKNOWN);h(new A(o,r.message))}else h(new A(I.UNKNOWN,"Server responded with status "+d.getStatus()))}else T(ua,'RPC "'+e+'" failed'),h(new A(I.UNAVAILABLE,"Connection failed."));break;default:k('RPC "'+e+'" failed with unanticipated webchannel error '+d.getLastErrorCode()+": "+d.getLastError()+", giving up.")}}finally{T(ua,'RPC "'+e+'" completed.')}var l,m}));var m=l.__assign({},t);delete m.database;var y=JSON.stringify(m);T(ua,"XHR sending: ",o+" "+y);var v={"Content-Type":"text/plain"};r.modifyHeadersForRequest(v,n),d.send(o,"POST",y,v,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=f.createWebChannelTransport(),o={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(o.initMessageHeaders,t),d.isReactNative()||d.isElectron()||d.isIE()||d.isUWP()||d.isBrowserExtension()||(o.httpHeadersOverwriteParam="$httpHeaders");var c=n.join("");T(ua,"Creating WebChannel: "+c+" "+o);var l=r.createWebChannel(c,o),h=!1,m=!1,y=new sa({sendFn:function(e){m?T(ua,"Not sending because WebChannel is closed:",e):(h||(T(ua,"Opening WebChannel transport."),l.open(),h=!0),T(ua,"WebChannel sending:",e),l.send(e))},closeFn:function(){return l.close()}}),v=function(e,t){l.listen(e,(function(param){try{t(param)}catch(e){setTimeout((function(){throw e}),0)}}))};return v(f.WebChannel.EventType.OPEN,(function(){m||T(ua,"WebChannel transport opened.")})),v(f.WebChannel.EventType.CLOSE,(function(){m||(m=!0,T(ua,"WebChannel transport closed"),y.callOnClose())})),v(f.WebChannel.EventType.ERROR,(function(e){m||(m=!0,T(ua,"WebChannel transport errored:",e),y.callOnClose(new A(I.UNAVAILABLE,"The operation could not be completed")))})),v(f.WebChannel.EventType.MESSAGE,(function(e){var t;if(!m){var n=e.data[0];C(!!n,"Got a webchannel message without data.");var r=n,o=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(o){T(ua,"WebChannel received error:",o);var c=o.status,code=function(e){var code=zr[e];if(void 0!==code)return Kr(code)}(c),h=o.message;void 0===code&&(code=I.INTERNAL,h="Unknown error status: "+c+" with message "+o.message),m=!0,y.callOnClose(new A(code,h)),l.close()}else T(ua,"WebChannel received:",n),y.callOnMessage(n)}})),setTimeout((function(){y.callOnOpen()}),0),y},e.prototype.makeUrl=function(e){var t=ca[e];return C(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}(),da=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new ha(e))},e.prototype.newConnectivityMonitor=function(){return aa.isAvailable()?new aa:new oa},e.prototype.newSerializer=function(e){return new Ei(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();E.setPlatform(new da);function pa(e){ia(e),e.registerVersion("@firebase/firestore","1.10.2")}pa(c),t.registerFirestore=pa}).call(this,n(117))},187:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return fr})),n.d(t,"EventType",(function(){return mr})),n.d(t,"WebChannel",(function(){return yr})),n.d(t,"XhrIo",(function(){return gr})),n.d(t,"createWebChannelTransport",(function(){return pr}));var g,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o=o||{},c=r;function l(a){return"string"==typeof a}function h(a){return"number"==typeof a}function d(a,b){a=a.split("."),b=b||c;for(var e=0;e<a.length;e++)if(null==(b=b[a[e]]))return null;return b}function f(){}function p(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var e=Object.prototype.toString.call(a);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function q(a){return"array"==p(a)}function m(a){var b=p(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var v="closure_uid_"+(1e9*Math.random()>>>0),w=0;function T(a,b,e){return a.call.apply(a.bind,arguments)}function S(a,b,e){if(!a)throw Error();if(2<arguments.length){var t=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,t),a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function u(a,b,e){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T:S).apply(null,arguments)}function _(a,b){var e=Array.prototype.slice.call(arguments,1);return function(){var t=e.slice();return t.push.apply(t,arguments),a.apply(this,t)}}var k=Date.now||function(){return+new Date};function C(a,b){function e(){}e.prototype=b.prototype,a.N=b.prototype,a.prototype=new e,a.prototype.constructor=a,a.xb=function(e,t,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[t].apply(e,r)}}function E(){this.j=this.j,this.i=this.i}E.prototype.j=!1,E.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[v]||(this[v]=++w)},E.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var x=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(l(a))return l(b)&&1==b.length?a.indexOf(b,0):-1;for(var e=0;e<a.length;e++)if(e in a&&a[e]===b)return e;return-1},I=Array.prototype.forEach?function(a,b,e){Array.prototype.forEach.call(a,b,e)}:function(a,b,e){for(var t=a.length,n=l(a)?a.split(""):a,r=0;r<t;r++)r in n&&b.call(e,n[r],r,a)};function A(a){return Array.prototype.concat.apply([],arguments)}function D(a){var b=a.length;if(0<b){for(var e=Array(b),t=0;t<b;t++)e[t]=a[t];return e}return[]}function N(a){return/^[\s\xa0]*$/.test(a)}var L,O=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function M(a,b){return-1!=a.indexOf(b)}function P(a,b){return a<b?-1:a>b?1:0}e:{var R=c.navigator;if(R){var F=R.userAgent;if(F){L=F;break e}}L=""}function V(a,b,e){for(var t in a)b.call(e,a[t],t,a)}function B(a){var e,b={};for(e in a)b[e]=a[e];return b}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(a,b){for(var e,t,n=1;n<arguments.length;n++){for(e in t=arguments[n])a[e]=t[e];for(var r=0;r<j.length;r++)e=j[r],Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])}}function H(a){return H[" "](a),a}H[" "]=f;var z,a,W=M(L,"Opera"),$=M(L,"Trident")||M(L,"MSIE"),K=M(L,"Edge"),Q=K||$,G=M(L,"Gecko")&&!(M(L.toLowerCase(),"webkit")&&!M(L,"Edge"))&&!(M(L,"Trident")||M(L,"MSIE"))&&!M(L,"Edge"),Y=M(L.toLowerCase(),"webkit")&&!M(L,"Edge");function X(){var a=c.document;return a?a.documentMode:void 0}e:{var J="",Z=(a=L,G?/rv:([^\);]+)(\)|;)/.exec(a):K?/Edge\/([\d\.]+)/.exec(a):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Y?/WebKit\/(\S+)/.exec(a):W?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Z&&(J=Z?Z[1]:""),$){var ee=X();if(null!=ee&&ee>parseFloat(J)){z=String(ee);break e}}z=J}var te,ne={};function re(a){return function(a,b){var e=ne;return Object.prototype.hasOwnProperty.call(e,a)?e[a]:e[a]=b(a)}(a,(function(){for(var b=0,e=O(String(z)).split("."),t=O(String(a)).split("."),n=Math.max(e.length,t.length),r=0;0==b&&r<n;r++){var o=e[r]||"",c=t[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;b=P(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||P(0==o[2].length,0==c[2].length)||P(o[2],c[2]),o=o[3],c=c[3]}while(0==b)}return 0<=b}))}var ie=c.document;te=ie&&$?X()||("CSS1Compat"==ie.compatMode?parseInt(z,10):5):void 0;var oe=!$||9<=Number(te),ae=$&&!re("9"),se=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{c.addEventListener("test",f,b),c.removeEventListener("test",f,b)}catch(e){}return a}();function ue(a,b){this.type=a,this.a=this.target=b,this.Ia=!0}function ce(a,b){if(ue.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var e=this.type=a.type,t=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if(G){e:{try{H(b.nodeName);var n=!0;break e}catch(e){}n=!1}n||(b=null)}}else"mouseover"==e?b=a.fromElement:"mouseout"==e&&(b=a.toElement);this.relatedTarget=b,t?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=l(a.pointerType)?a.pointerType:le[a.pointerType]||"",this.c=a,a.defaultPrevented&&this.b()}}ue.prototype.b=function(){this.Ia=!1},C(ce,ue);var le={2:"touch",3:"pen",4:"mouse"};ce.prototype.b=function(){ce.N.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ae)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(e){}};var he="closure_listenable_"+(1e6*Math.random()|0),de=0;function pe(a,b,e,t,n){this.listener=a,this.proxy=null,this.src=b,this.type=e,this.capture=!!t,this.da=n,this.key=++de,this.X=this.Z=!1}function fe(a){a.X=!0,a.listener=null,a.proxy=null,a.src=null,a.da=null}function me(a){this.src=a,this.a={},this.b=0}function ye(a,b){var e=b.type;if(e in a.a){var t,n=a.a[e],r=x(n,b);(t=0<=r)&&Array.prototype.splice.call(n,r,1),t&&(fe(b),0==a.a[e].length&&(delete a.a[e],a.b--))}}function ge(a,b,e,t){for(var n=0;n<a.length;++n){var r=a[n];if(!r.X&&r.listener==b&&r.capture==!!e&&r.da==t)return n}return-1}me.prototype.add=function(a,b,e,t,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var o=ge(a,b,t,n);return-1<o?(b=a[o],e||(b.Z=!1)):((b=new pe(b,this.src,r,!!t,n)).Z=e,a.push(b)),b};var ve="closure_lm_"+(1e6*Math.random()|0),be={};function we(a,b,e,t,n){if(t&&t.once)return function e(a,b,t,n,r){if(q(b)){for(var o=0;o<b.length;o++)e(a,b[o],t,n,r);return null}return t=Ie(t),a&&a[he]?a.Aa(b,t,y(n)?!!n.capture:!!n,r):Te(a,b,t,!0,n,r)}(a,b,e,t,n);if(q(b)){for(var r=0;r<b.length;r++)we(a,b[r],e,t,n);return null}return e=Ie(e),a&&a[he]?a.za(b,e,y(t)?!!t.capture:!!t,n):Te(a,b,e,!1,t,n)}function Te(a,b,e,t,n,r){if(!b)throw Error("Invalid event type");var o=y(n)?!!n.capture:!!n;if(o&&!oe)return null;var c=Ee(a);if(c||(a[ve]=c=new me(a)),(e=c.add(b,e,t,o,r)).proxy)return e;if(t=function(){var a=Ce,b=oe?function(e){return a.call(b.src,b.listener,e)}:function(e){if(!(e=a.call(b.src,b.listener,e)))return e};return b}(),e.proxy=t,t.src=a,t.listener=e,a.addEventListener)se||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),t,n);else if(a.attachEvent)a.attachEvent(_e(b.toString()),t);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(t)}return e}function Se(a){if(!h(a)&&a&&!a.X){var b=a.src;if(b&&b[he])ye(b.c,a);else{var e=a.type,t=a.proxy;b.removeEventListener?b.removeEventListener(e,t,a.capture):b.detachEvent?b.detachEvent(_e(e),t):b.addListener&&b.removeListener&&b.removeListener(t),(e=Ee(b))?(ye(e,a),0==e.b&&(e.src=null,b[ve]=null)):fe(a)}}}function _e(a){return a in be?be[a]:be[a]="on"+a}function ke(a,b){var e=a.listener,t=a.da||a.src;return a.Z&&Se(a),e.call(t,b)}function Ce(a,b){return!!a.X||(oe?ke(a,new ce(b,this)):ke(a,b=new ce(b||d("window.event"),this)))}function Ee(a){return(a=a[ve])instanceof me?a:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(a){return"function"==p(a)?a:(a[xe]||(a[xe]=function(b){return a.handleEvent(b)}),a[xe])}function Ae(){E.call(this),this.c=new me(this),this.J=this,this.B=null}function De(a,b,e,t){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.X&&o.capture==e){var c=o.listener,l=o.da||o.src;o.Z&&ye(a.c,o),n=!1!==c.call(l,t)&&n}}return n&&0!=t.Ia}C(Ae,E),Ae.prototype[he]=!0,(g=Ae.prototype).addEventListener=function(a,b,e,t){we(this,a,b,e,t)},g.removeEventListener=function(a,b,e,t){!function e(a,b,t,n,r){if(q(b))for(var o=0;o<b.length;o++)e(a,b[o],t,n,r);else n=y(n)?!!n.capture:!!n,t=Ie(t),a&&a[he]?(a=a.c,(b=String(b).toString())in a.a&&(-1<(t=ge(o=a.a[b],t,n,r))&&(fe(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete a.a[b],a.b--)))):a&&(a=Ee(a))&&(b=a.a[b.toString()],a=-1,b&&(a=ge(b,t,n,r)),(t=-1<a?b[a]:null)&&Se(t))}(this,a,b,e,t)},g.dispatchEvent=function(a){var b,e=this.B;if(e)for(b=[];e;e=e.B)b.push(e);e=this.J;var t=a.type||a;if(l(a))a=new ue(a,e);else if(a instanceof ue)a.target=a.target||e;else{var n=a;U(a=new ue(t,e),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var o=a.a=b[r];n=De(o,t,!0,a)&&n}if(n=De(o=a.a=e,t,!0,a)&&n,n=De(o,t,!1,a)&&n,b)for(r=0;r<b.length;r++)n=De(o=a.a=b[r],t,!1,a)&&n;return n},g.G=function(){if(Ae.N.G.call(this),this.c){var e,a=this.c;for(e in a.a){for(var t=a.a[e],n=0;n<t.length;n++)fe(t[n]);delete a.a[e],a.b--}}this.B=null},g.za=function(a,b,e,t){return this.c.add(String(a),b,!1,e,t)},g.Aa=function(a,b,e,t){return this.c.add(String(a),b,!0,e,t)};var Ne=c.JSON.stringify;function Le(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function Oe(){this.b=this.a=null}Le.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var Me,Pe=new Le((function(){return new Fe}),(function(a){a.reset()}));function Re(){var a=je,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Fe(){this.next=this.b=this.a=null}function qe(a){c.setTimeout((function(){throw a}),0)}function Ve(a,b){Me||function(){var a=c.Promise.resolve(void 0);Me=function(){a.then(Ue)}}(),Be||(Me(),Be=!0),je.add(a,b)}Oe.prototype.add=function(a,b){var e=Pe.get();e.set(a,b),this.b?this.b.next=e:this.a=e,this.b=e},Fe.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Fe.prototype.reset=function(){this.next=this.b=this.a=null};var Be=!1,je=new Oe;function Ue(){for(var a;a=Re();){try{a.a.call(a.b)}catch(e){qe(e)}var b=Pe;b.f(a),100>b.b&&(b.b++,a.next=b.a,b.a=a)}Be=!1}function He(a,b){Ae.call(this),this.b=a||1,this.a=b||c,this.f=u(this.fb,this),this.g=k()}function ze(a){a.ba=!1,a.L&&(a.a.clearTimeout(a.L),a.L=null)}function We(a,b,e){if("function"==p(a))e&&(a=u(a,e));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=u(a.handleEvent,a)}return 2147483647<Number(b)?-1:c.setTimeout(a,b||0)}function $e(a,b,e){E.call(this),this.f=null!=e?u(a,e):a,this.c=b,this.b=u(this.$a,this),this.a=[]}function Ke(a){a.U=We(a.b,a.c),a.f.apply(null,a.a)}function Qe(a){E.call(this),this.b=a,this.a={}}C(He,Ae),(g=He.prototype).ba=!1,g.L=null,g.fb=function(){if(this.ba){var a=k()-this.g;0<a&&a<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-a):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(ze(this),this.start()))}},g.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=k())},g.G=function(){He.N.G.call(this),ze(this),delete this.a},C($e,E),(g=$e.prototype).ea=!1,g.U=null,g.Ta=function(a){this.a=arguments,this.U?this.ea=!0:Ke(this)},g.G=function(){$e.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},g.$a=function(){this.U=null,this.ea&&(this.ea=!1,Ke(this))},C(Qe,E);var Ge=[];function Ye(a,b,e,t){q(e)||(e&&(Ge[0]=e.toString()),e=Ge);for(var n=0;n<e.length;n++){var r=we(b,e[n],t||a.handleEvent,!1,a.b||a);if(!r)break;a.a[r.key]=r}}function Xe(a){V(a.a,(function(b,e){this.a.hasOwnProperty(e)&&Se(b)}),a),a.a={}}function Je(){}Qe.prototype.G=function(){Qe.N.G.call(this),Xe(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=new Ae;function et(a){ue.call(this,"serverreachability",a)}function tt(a){Ze.dispatchEvent(new et(Ze,a))}function nt(a){ue.call(this,"statevent",a)}function it(a){Ze.dispatchEvent(new nt(Ze,a))}function ot(a){ue.call(this,"timingevent",a)}function at(a,b){if("function"!=p(a))throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){a()}),b)}C(et,ue),C(nt,ue),C(ot,ue);var st={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},ut={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function ct(){}function lt(a){var b;return(b=a.a)||(b=a.a={}),b}function ht(){}ct.prototype.a=null;var pt,ft={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function mt(){ue.call(this,"d")}function yt(){ue.call(this,"c")}function gt(){}function vt(a,b,e){this.g=a,this.W=b,this.V=e||1,this.I=new Qe(this),this.O=bt,a=Q?125:void 0,this.P=new He(a),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}C(mt,ue),C(yt,ue),C(gt,ct),pt=new gt;var bt=45e3,wt={},Tt={};function St(a,b,e){a.F=1,a.f=Kt(Bt(b)),a.l=e,a.H=!0,kt(a,null)}function _t(a,b,e,t){a.F=1,a.f=Kt(Bt(b)),a.l=null,a.H=e,kt(a,t)}function kt(a,b){a.v=k(),xt(a),a.D=Bt(a.f),$t(a.D,"t",a.V),a.A=0,a.a=a.g.$(a.g.Y()?b:null),0<a.J&&(a.B=new $e(u(a.Ja,a,a.a),a.J)),Ye(a.I,a.a,"readystatechange",a.cb),b=a.h?B(a.h):{},a.l?(a.w||(a.w="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.a.ca(a.D,a.w,a.l,b)):(a.w="GET",a.a.ca(a.D,a.w,null,b)),tt(1)}function Ct(a,b,e){for(var t=!0;!a.m&&a.A<e.length;){var n=Et(a,e);if(n==Tt){4==b&&(a.c=4,it(14),t=!1);break}if(n==wt){a.c=4,it(15),t=!1;break}Lt(a,n)}4==b&&0==e.length&&(a.c=1,it(16),t=!1),a.b=a.b&&t,t||(Nt(a),Dt(a))}function Et(a,b){var e=a.A,t=b.indexOf("\n",e);return-1==t?Tt:(e=Number(b.substring(e,t)),isNaN(e)?wt:(t+=1)+e>b.length?Tt:(b=b.substr(t,e),a.A=t+e,b))}function xt(a){a.R=k()+a.O,It(a,a.O)}function It(a,b){if(null!=a.i)throw Error("WatchDog timer not null");a.i=at(u(a.ab,a),b)}function At(a){a.i&&(c.clearTimeout(a.i),a.i=null)}function Dt(a){a.g.Ca()||a.m||a.g.na(a)}function Nt(a){At(a);var b=a.B;b&&"function"==typeof b.la&&b.la(),a.B=null,ze(a.P),Xe(a.I),a.a&&(b=a.a,a.a=null,b.abort(),b.la())}function Lt(a,b){try{a.g.Fa(a,b),tt(4)}catch(e){}}function Ot(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(m(a)||l(a))I(a,b,void 0);else{if(a.K&&"function"==typeof a.K)var e=a.K();else if(a.C&&"function"==typeof a.C)e=void 0;else if(m(a)||l(a)){e=[];for(var t=a.length,n=0;n<t;n++)e.push(n)}else for(n in e=[],t=0,a)e[t++]=n;n=(t=function(a){if(a.C&&"function"==typeof a.C)return a.C();if(l(a))return a.split("");if(m(a)){for(var b=[],e=a.length,t=0;t<e;t++)b.push(a[t]);return b}for(t in b=[],e=0,a)b[e++]=a[t];return b}(a)).length;for(var r=0;r<n;r++)b.call(void 0,t[r],e&&e[r],a)}}function Mt(a,b){this.b={},this.a=[],this.c=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var t=0;t<e;t+=2)this.set(arguments[t],arguments[t+1])}else if(a)if(a instanceof Mt)for(e=a.K(),t=0;t<e.length;t++)this.set(e[t],a.get(e[t]));else for(t in a)this.set(t,a[t])}function Pt(a,b){Ft(a.b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Rt(a))}function Rt(a){if(a.c!=a.a.length){for(var b=0,e=0;b<a.a.length;){var t=a.a[b];Ft(a.b,t)&&(a.a[e++]=t),b++}a.a.length=e}if(a.c!=a.a.length){var n={};for(e=b=0;b<a.a.length;)Ft(n,t=a.a[b])||(a.a[e++]=t,n[t]=1),b++;a.a.length=e}}function Ft(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(g=vt.prototype).setTimeout=function(a){this.O=a},g.cb=function(a){a=a.target;var b=this.B;b&&3==qn(a)?b.Ta():this.Ja(a)},g.Ja=function(a){try{if(a==this.a)e:{var b=qn(this.a),e=this.a.ya(),t=this.a.T();if(!(3>b||3==b&&!Q&&!this.a.aa())){this.m||4!=b||7==e||tt(8==e||0>=t?3:2),At(this);var n=this.a.T();this.o=n;var r=this.a.aa();if(this.b=200==n){if(this.S&&!this.s){t:{if(this.a){var o=Vn(this.a,"X-HTTP-Initial-Response");if(o&&!N(o)){var c=o;break t}}c=null}if(!c){this.b=!1,this.c=3,it(12),Nt(this),Dt(this);break e}this.s=!0,Lt(this,c)}this.H?(Ct(this,b,r),Q&&this.b&&3==b&&(Ye(this.I,this.P,"tick",this.bb),this.P.start())):Lt(this,r),4==b&&Nt(this),this.b&&!this.m&&(4==b?this.g.na(this):(this.b=!1,xt(this)))}else 400==n&&0<r.indexOf("Unknown SID")?(this.c=3,it(12)):(this.c=0,it(13)),Nt(this),Dt(this)}}}catch(e){}},g.bb=function(){if(this.a){var a=qn(this.a),b=this.a.aa();this.A<b.length&&(At(this),Ct(this,a,b),this.b&&4!=a&&xt(this))}},g.cancel=function(){this.m=!0,Nt(this)},g.ab=function(){this.i=null;var a=k();0<=a-this.R?(2!=this.F&&(tt(3),it(17)),Nt(this),this.c=2,Dt(this)):It(this,this.R-a)},(g=Mt.prototype).C=function(){Rt(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},g.K=function(){return Rt(this),this.a.concat()},g.get=function(a,b){return Ft(this.b,a)?this.b[a]:b},g.set=function(a,b){Ft(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},g.forEach=function(a,b){for(var e=this.K(),t=0;t<e.length;t++){var n=e[t],r=this.get(n);a.call(b,r,n,this)}};var qt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vt(a,b){var e;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,a instanceof Vt?(this.h=void 0!==b?b:a.h,jt(this,a.f),this.j=a.j,Ut(this,a.b),Ht(this,a.i),this.a=a.a,zt(this,un(a.c)),this.g=a.g):a&&(e=String(a).match(qt))?(this.h=!!b,jt(this,e[1]||"",!0),this.j=Qt(e[2]||""),Ut(this,e[3]||"",!0),Ht(this,e[4]),this.a=Qt(e[5]||"",!0),zt(this,e[6]||"",!0),this.g=Qt(e[7]||"")):(this.h=!!b,this.c=new nn(null,this.h))}function Bt(a){return new Vt(a)}function jt(a,b,e){a.f=e?Qt(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Ut(a,b,e){a.b=e?Qt(b,!0):b}function Ht(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.i=b}else a.i=null}function zt(a,b,e){b instanceof nn?(a.c=b,function(a,b){b&&!a.f&&(rn(a),a.c=null,a.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(on(this,t),sn(this,n,e))}),a)),a.f=b}(a.c,a.h)):(e||(b=Gt(b,en)),a.c=new nn(b,a.h))}function Wt(a,b,e){a.c.set(b,e)}function $t(a,b,e){q(e)||(e=[String(e)]),sn(a.c,b,e)}function Kt(a){return Wt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^k()).toString(36)),a}function Qt(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gt(a,b,e){return l(a)?(a=encodeURI(a).replace(b,Yt),e&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Yt(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Vt.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Gt(b,Xt,!0),":");var e=this.b;return(e||"file"==b)&&(a.push("//"),(b=this.j)&&a.push(Gt(b,Xt,!0),"@"),a.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.i)&&a.push(":",String(e))),(e=this.a)&&(this.b&&"/"!=e.charAt(0)&&a.push("/"),a.push(Gt(e,"/"==e.charAt(0)?Zt:Jt,!0))),(e=this.c.toString())&&a.push("?",e),(e=this.g)&&a.push("#",Gt(e,tn)),a.join("")},Vt.prototype.resolve=function(a){var b=Bt(this),e=!!a.f;e?jt(b,a.f):e=!!a.j,e?b.j=a.j:e=!!a.b,e?Ut(b,a.b):e=null!=a.i;var t=a.a;if(e)Ht(b,a.i);else if(e=!!a.a){if("/"!=t.charAt(0))if(this.b&&!this.a)t="/"+t;else{var n=b.a.lastIndexOf("/");-1!=n&&(t=b.a.substr(0,n+1)+t)}if(".."==(n=t)||"."==n)t="";else if(M(n,"./")||M(n,"/.")){t=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],o=0;o<n.length;){var c=n[o++];"."==c?t&&o==n.length&&r.push(""):".."==c?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),t&&o==n.length&&r.push("")):(r.push(c),t=!0)}t=r.join("/")}else t=n}return e?b.a=t:e=""!==a.c.toString(),e?zt(b,un(a.c)):e=!!a.g,e&&(b.g=a.g),b};var Xt=/[#\/\?@]/g,Jt=/[#\?:]/g,Zt=/[#\?]/g,en=/[#\?@]/g,tn=/#/g;function nn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function rn(a){a.a||(a.a=new Mt,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var e=0;e<a.length;e++){var t=a[e].indexOf("="),n=null;if(0<=t){var r=a[e].substring(0,t);n=a[e].substring(t+1)}else r=a[e];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,e){a.add(decodeURIComponent(b.replace(/\+/g," ")),e)})))}function on(a,b){rn(a),b=cn(a,b),Ft(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Pt(a.a,b))}function an(a,b){return rn(a),b=cn(a,b),Ft(a.a.b,b)}function sn(a,b,e){on(a,b),0<e.length&&(a.c=null,a.a.set(cn(a,b),D(e)),a.b+=e.length)}function un(a){var b=new nn;return b.c=a.c,a.a&&(b.a=new Mt(a.a),b.b=a.b),b}function cn(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function ln(a){this.a=a,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function hn(a){var b=a.a.F.a;if(null!=b)it(4),b?(it(10),Xn(a.a,a,!1)):(it(11),Xn(a.a,a,!0));else{a.b=new vt(a,void 0,void 0),a.b.h=a.h,b=rr(b=a.a,b.Y()?a.f:null,a.i),it(4),$t(b,"TYPE","xmlhttp");var e=a.a.j,t=a.a.I;e&&t&&Wt(b,e,t),_t(a.b,b,!1,a.f)}}function dn(){this.a=this.b=null}function pn(){this.a=new Mt}function fn(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[v]||(a[v]=++w)):b.charAt(0)+a}function mn(a,b){this.b=a,this.a=b}function yn(a){this.g=a||gn,c.PerformanceNavigationTiming?a=0<(a=c.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(c.ka&&c.ka.Da&&c.ka.Da()&&c.ka.Da().yb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new pn),this.b=null,this.c=[]}(g=nn.prototype).add=function(a,b){rn(this),this.c=null,a=cn(this,a);var e=this.a.get(a);return e||this.a.set(a,e=[]),e.push(b),this.b+=1,this},g.forEach=function(a,b){rn(this),this.a.forEach((function(e,t){I(e,(function(e){a.call(b,e,t,this)}),this)}),this)},g.K=function(){rn(this);for(var a=this.a.C(),b=this.a.K(),e=[],t=0;t<b.length;t++)for(var n=a[t],r=0;r<n.length;r++)e.push(b[t]);return e},g.C=function(a){rn(this);var b=[];if(l(a))an(this,a)&&(b=A(b,this.a.get(cn(this,a))));else{a=this.a.C();for(var e=0;e<a.length;e++)b=A(b,a[e])}return b},g.set=function(a,b){return rn(this),this.c=null,an(this,a=cn(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},g.get=function(a,b){return a&&0<(a=this.C(a)).length?String(a[0]):b},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.K(),e=0;e<b.length;e++){var t=b[e],n=encodeURIComponent(String(t));t=this.C(t);for(var r=0;r<t.length;r++){var o=n;""!==t[r]&&(o+="="+encodeURIComponent(String(t[r]))),a.push(o)}}return this.c=a.join("&")},C((function(){}),(function(){})),(g=ln.prototype).M=null,g.$=function(a){return this.a.$(a)},g.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},g.Ca=function(){return!1},g.Fa=function(a,b){if(this.c=a.o,0==this.M){if(!this.a.o&&(a=a.a)){var e=Vn(a,"X-Client-Wire-Protocol");this.l=e||null,this.a.j&&(a=Vn(a,"X-HTTP-Session-Id"))&&(this.a.I=a)}if(b){try{var t=this.a.ja.a.parse(b)}catch(e){return(b=this.a).m=this.c,void er(b,2)}this.f=t[0]}else(b=this.a).m=this.c,er(b,2)}else 1==this.M&&(this.g?it(6):"11111"==b?(it(5),this.g=!0,(!$||10<=Number(te))&&(this.c=200,this.b.cancel(),it(11),Xn(this.a,this,!0))):(it(7),this.g=!1))},g.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,hn(this)):1==this.M&&(this.g?(it(11),Xn(this.a,this,!0)):(it(10),Xn(this.a,this,!1)));else{0==this.M?it(8):1==this.M&&it(9);var a=this.a;a.m=this.c,er(a,2)}},g.Y=function(){return this.a.Y()},g.ma=function(){return this.a.ma()},pn.prototype.add=function(a){this.a.set(fn(a),a)},pn.prototype.C=function(){return this.a.C()};var gn=10;function vn(a,b){!a.a&&(M(b,"spdy")||M(b,"quic")||M(b,"h2"))&&(a.f=a.g,a.a=new pn,a.b&&(dd(a,a.b),a.b=null))}function bn(a){return!!a.b||!!a.a&&a.a.a.c>=a.f}function wn(a){return a.b?1:a.a?a.a.a.c:0}function Tn(a,b){return a.b?a=a.b==b:a.a?(b=fn(b),a=Ft(a.a.a.b,b)):a=!1,a}function dd(a,b){a.a?a.a.add(b):a.b=b}function Sn(a,b){var e;a.b&&a.b==b?a.b=null:((e=a.a)&&(e=fn(b),e=Ft(a.a.a.b,e)),e&&Pt(a.a.a,fn(b)))}function _n(a){if(null!=a.b)return a.c.concat(a.b.j);if(null!=a.a&&0!=a.a.a.c){var b=a.c;return I(a.a.C(),(function(e){b=b.concat(e.j)})),b}return D(a.c)}function kn(){}function Cn(){this.a=new kn}function En(a,b,e){var t=e||"";try{Ot(a,(function(e,n){var r=e;y(e)&&(r=Ne(e)),b.push(t+n+"="+encodeURIComponent(r))}))}catch(e){throw b.push(t+"type="+encodeURIComponent("_badmap")),e}}function xn(a,b,e,t,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(t)}catch(e){}}yn.prototype.cancel=function(){this.c=_n(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(I(this.a.C(),(function(a){a.cancel()})),function(a){a.b={},a.a.length=0,a.c=0}(this.a.a))},kn.prototype.stringify=function(a){return c.JSON.stringify(a,void 0)},kn.prototype.parse=function(a){return c.JSON.parse(a,void 0)};var In=c.JSON.parse;function An(a){Ae.call(this),this.headers=new Mt,this.H=a||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Dn,this.D=this.F=!1}C(An,Ae);var Dn="",Nn=/^https?$/i,Ln=["POST","PUT"];function On(a){return"content-type"==a.toLowerCase()}function Mn(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,Pn(a),Fn(a)}function Pn(a){a.v||(a.v=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Rn(a){if(a.b&&void 0!==o&&(!a.s[1]||4!=qn(a)||2!=a.T()))if(a.l&&4==qn(a))We(a.Ea,0,a);else if(a.dispatchEvent("readystatechange"),4==qn(a)){a.b=!1;try{var e,b=a.T();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}if(!(e=t)){var n;if(n=0===b){var r=String(a.A).match(qt)[1]||null;if(!r&&c.self&&c.self.location){var l=c.self.location.protocol;r=l.substr(0,l.length-1)}n=!Nn.test(r?r.toLowerCase():"")}e=n}if(e)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.h=6;try{var h=2<qn(a)?a.a.statusText:""}catch(e){h=""}a.f=h+" ["+a.T()+"]",Pn(a)}}finally{Fn(a)}}}function Fn(a,b){if(a.a){td(a);var e=a.a,t=a.s[0]?f:null;a.a=null,a.s=null,b||a.dispatchEvent("ready");try{e.onreadystatechange=t}catch(e){}}}function td(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(c.clearTimeout(a.m),a.m=null)}function qn(a){return a.a?a.a.readyState:0}function Vn(a,b){return a.a?a.a.getResponseHeader(b):null}function Bn(a,b,e){e:{for(t in e){var t=!1;break e}t=!0}if(t)return a;if(e=function(a){var b="";return V(a,(function(e,t){b+=t,b+=":",b+=e,b+="\r\n"})),b}(e),l(a)){if(b=encodeURIComponent(String(b)),b+=e=null!=e?"="+encodeURIComponent(String(e)):""){if(0>(e=a.indexOf("#"))&&(e=a.length),0>(t=a.indexOf("?"))||t>e){t=e;var n=""}else n=a.substring(t+1,e);e=(a=[a.substr(0,t),n,a.substr(e)])[1],a[1]=b?e?e+"&"+b:b:e,a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a}return Wt(a,b,e),a}function jn(a){this.f=[],this.F=new dn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!d("internalChannelParams.failFast",a),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=d("internalChannelParams.baseRetryDelayMs",a)||5e3,this.Ra=d("internalChannelParams.retryDelaySeedMs",a)||1e4,this.Pa=d("internalChannelParams.forwardChannelMaxRetries",a)||2,this.qa=d("internalChannelParams.forwardChannelRequestTimeoutMs",a)||2e4,this.Ka=a&&a.zb||void 0,this.D=void 0,this.R=a&&a.supportsCrossDomainXhr||!1,this.H="",this.b=new yn(a&&a.concurrentRequestLimit),this.ja=new Cn,this.o=!a||void 0===a.backgroundChannelTest||a.backgroundChannelTest,(this.W=a&&a.fastHandshake||!1)&&!this.o&&(this.o=!0),a&&a.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Un(a){if(Hn(a),3==a.u){var b=a.P++,e=Bt(a.B);Wt(e,"SID",a.H),Wt(e,"RID",b),Wt(e,"TYPE","terminate"),Kn(a,e),(b=new vt(a,b,void 0)).F=2,b.f=Kt(Bt(e)),e=!1,c.navigator&&c.navigator.sendBeacon&&(e=c.navigator.sendBeacon(b.f.toString(),"")),!e&&c.Image&&((new Image).src=b.f,e=!0),e||(b.a=b.g.$(null),b.a.ca(b.f)),b.v=k(),xt(b)}nr(a)}function Hn(a){a.w&&(a.w.abort(),a.w=null),a.a&&(a.a.cancel(),a.a=null),a.l&&(c.clearTimeout(a.l),a.l=null),Jn(a),a.b.cancel(),a.h&&(h(a.h)&&c.clearTimeout(a.h),a.h=null)}function zn(a,b){a.f.push(new mn(a.Qa++,b)),3==a.u&&Wn(a)}function Wn(a){bn(a.b)||a.h||(a.h=!0,Ve(a.Ha,a),a.A=0)}function $n(a,b){var e;e=b?b.W:a.P++;var t=Bt(a.B);Wt(t,"SID",a.H),Wt(t,"RID",e),Wt(t,"AID",a.O),Kn(a,t),a.g&&a.i&&Bn(t,a.g,a.i),e=new vt(a,e,a.A+1),null===a.g&&(e.h=a.i),b&&(a.f=b.j.concat(a.f)),b=Qn(a,e,1e3),e.setTimeout(Math.round(.5*a.qa)+Math.round(.5*a.qa*Math.random())),dd(a.b,e),St(e,t,b)}function Kn(a,b){a.c&&Ot({},(function(e,t){Wt(b,t,e)}))}function Qn(a,b,e){e=Math.min(a.f.length,e);var t=a.c?u(a.c.Sa,a.c,a):null;e:for(var n=a.f,r=-1;;){var o=["count="+e];-1==r?0<e?(r=n[0].b,o.push("ofs="+r)):r=0:o.push("ofs="+r);for(var c=!0,l=0;l<e;l++){var h=n[l].b,d=n[l].a;if(0>(h-=r))r=Math.max(0,n[l].b-100),c=!1;else try{En(d,o,"req"+h+"_")}catch(e){t&&t(d)}}if(c){t=o.join("&");break e}}return a=a.f.splice(0,e),b.j=a,t}function Gn(a){a.a||a.l||(a.S=1,Ve(a.Ga,a),a.v=0)}function Yn(a){return!(a.a||a.l||3<=a.v)&&(a.S++,a.l=at(u(a.Ga,a),Zn(a,a.v)),a.v++,!0)}function Xn(a,b,e){var t=b.l;t&&vn(a.b,t),a.ia=a.oa&&e,a.m=b.c,a.B=rr(a,null,a.ha),Wn(a)}function Jn(a){null!=a.s&&(c.clearTimeout(a.s),a.s=null)}function Zn(a,b){var e=a.Na+Math.floor(Math.random()*a.Ra);return a.ma()||(e*=2),e*b}function er(a,b){if(2==b){var e=null;a.c&&(e=null);var t=u(a.eb,a);e||(e=new Vt("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||jt(e,"https"),Kt(e)),function(a,b){var e=new Je;if(c.Image){var t=new Image;t.onload=_(xn,e,t,"TestLoadImage: loaded",!0,b),t.onerror=_(xn,e,t,"TestLoadImage: error",!1,b),t.onabort=_(xn,e,t,"TestLoadImage: abort",!1,b),t.ontimeout=_(xn,e,t,"TestLoadImage: timeout",!1,b),c.setTimeout((function(){t.ontimeout&&t.ontimeout()}),1e4),t.src=a}else b(!1)}(e.toString(),t)}else it(2);a.u=0,a.c&&a.c.ta(b),nr(a),Hn(a)}function nr(a){a.u=0,a.m=-1,a.c&&(0==_n(a.b).length&&0==a.f.length||(a.b.c.length=0,D(a.f),a.f.length=0),a.c.sa())}function rr(a,b,e){var t=function(a){return a instanceof Vt?Bt(a):new Vt(a,void 0)}(e);if(""!=t.b)b&&Ut(t,b+"."+t.b),Ht(t,t.i);else{var n,r=c.location;n=b?b+"."+r.hostname:r.hostname,t=function(a,b,e,t){var n=new Vt(null,void 0);return a&&jt(n,a),b&&Ut(n,b),e&&Ht(n,e),t&&(n.a=t),n}(r.protocol,n,+r.port,e)}return a.V&&V(a.V,(function(e,n){Wt(t,n,e)})),b=a.j,e=a.I,b&&e&&Wt(t,b,e),Wt(t,"VER",a.wa),Kn(a,t),t}function ir(){}function or(){if($&&!(10<=Number(te)))throw Error("Environmental error: no available transport.")}function ar(a,b){Ae.call(this),this.a=new jn(b),this.g=a,this.m=b&&b.testUrl?b.testUrl:function(a){for(var b=arguments[0],e=1;e<arguments.length;e++){var t,n=arguments[e];if(0==n.lastIndexOf("/",0))b=n;else(t=""==b)||(t=0<=(t=b.length-1)&&b.indexOf("/",t)==t),b+=t?n:"/"+n}return b}(this.g,"test"),this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.a.i=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.xa&&(a?a["X-WebChannel-Client-Profile"]=b.xa:a={"X-WebChannel-Client-Profile":b.xa}),this.a.J=a,(a=b&&b.httpHeadersOverwriteParam)&&!N(a)&&(this.a.g=a),this.l=b&&b.supportsCrossDomainXhr||!1,this.h=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!N(b)&&(this.a.j=b,null!==(a=this.b)&&b in a&&(b in(a=this.b)&&delete a[b])),this.f=new cr(this)}function sr(a){mt.call(this);var b=a.__sm__;if(b){e:{for(var e in b){a=e;break e}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function ur(){yt.call(this),this.status=1}function cr(a){this.a=a}(g=An.prototype).ca=function(a,b,e,t){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+a);b=b?b.toUpperCase():"GET",this.A=a,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?lt(this.H):lt(pt),this.a.onreadystatechange=u(this.Ea,this);try{this.w=!0,this.a.open(b,String(a),!0),this.w=!1}catch(e){return void Mn(this,e)}a=e||"";var n=new Mt(this.headers);t&&Ot(t,(function(e,t){n.set(t,e)})),t=function(a){e:{for(var b=On,e=a.length,t=l(a)?a.split(""):a,n=0;n<e;n++)if(n in t&&b.call(void 0,t[n],n,a)){b=n;break e}b=-1}return 0>b?null:l(a)?a.charAt(b):a[b]}(n.K()),e=c.FormData&&a instanceof c.FormData,!(0<=x(Ln,b))||t||e||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{td(this),0<this.o&&((this.D=function(a){return $&&re(9)&&h(a.timeout)&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=u(this.Ba,this)):this.m=We(this.Ba,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(e){Mn(this,e)}},g.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Fn(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Fn(this,!0)),An.N.G.call(this)},g.Ea=function(){this.j||(this.w||this.l||this.g?Rn(this):this.Za())},g.Za=function(){Rn(this)},g.T=function(){try{return 2<qn(this)?this.a.status:-1}catch(e){return-1}},g.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},g.Ua=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),In(b)}},g.ya=function(){return this.h},g.Xa=function(){return l(this.f)?this.f:String(this.f)},(g=jn.prototype).wa=8,g.u=1,g.Ca=function(){return 0==this.u},g.Ha=function(a){if(this.h)if(this.h=null,1==this.u){if(!a){this.P=Math.floor(1e5*Math.random());var e,b=new vt(this,a=this.P++,void 0),t=this.i;if(this.J&&(t?U(t=B(t),this.J):t=this.J),null===this.g&&(b.h=t),this.W)e:{for(var n=e=0;n<this.f.length;n++){var r=this.f[n];if(void 0===(r="__data__"in r.a&&l(r=r.a.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.f.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Qn(this,b,e),Wt(n=Bt(this.B),"RID",a),Wt(n,"CVER",22),this.o&&this.j&&Wt(n,"X-HTTP-Session-Id",this.j),Kn(this,n),this.g&&t&&Bn(n,this.g,t),dd(this.b,b),this.W?(Wt(n,"$req",e),Wt(n,"SID","null"),b.S=!0,St(b,n,null)):St(b,n,e),this.u=2}}else 3==this.u&&(a?$n(this,a):0==this.f.length||bn(this.b)||$n(this))},g.Ga=function(){this.l=null,this.a=new vt(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var a=Bt(this.pa);Wt(a,"RID","rpc"),Wt(a,"SID",this.H),Wt(a,"CI",this.ia?"0":"1"),Wt(a,"AID",this.O),Kn(this,a),Wt(a,"TYPE","xmlhttp"),this.g&&this.i&&Bn(a,this.g,this.i),this.D&&this.a.setTimeout(this.D),_t(this.a,a,!0,this.ga)},g.Fa=function(a,b){if(0!=this.u&&(this.a==a||Tn(this.b,a)))if(this.m=a.o,!a.s&&Tn(this.b,a)&&3==this.u){try{var e=this.ja.a.parse(b)}catch(t){e=null}if(q(e)&&3==e.length){if(0==(b=e)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<a.v))break e;Jn(this),this.a.cancel(),this.a=null}Yn(this),it(18)}}else this.ra=b[1],0<this.ra-this.O&&37500>b[2]&&this.ia&&0==this.v&&!this.s&&(this.s=at(u(this.Ya,this),6e3));if(1>=wn(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else er(this,11)}else if((a.s||this.a==a)&&Jn(this),!N(b))for(b=e=this.ja.a.parse(b),e=0;e<b.length;e++){var t=b[e];if(this.O=t[0],t=t[1],2==this.u)if("c"==t[0]){this.H=t[1],this.ga=t[2];var n=t[3];null!=n&&(this.wa=n),null!=(t=t[5])&&h(t)&&0<t&&(this.D=1.5*t),this.o&&(t=a.a)&&((n=Vn(t,"X-Client-Wire-Protocol"))&&vn(this.b,n),this.j&&(t=Vn(t,"X-HTTP-Session-Id")))&&(this.I=t,Wt(this.B,this.j,t)),this.u=3,this.c&&this.c.va(),t=a,this.pa=rr(this,this.Y()?this.ga:null,this.ha),t.s?(Sn(this.b,t),(n=this.D)&&t.setTimeout(n),t.i&&(At(t),xt(t)),this.a=t):Gn(this),0<this.f.length&&Wn(this)}else"stop"!=t[0]&&"close"!=t[0]||er(this,7);else 3==this.u&&("stop"==t[0]||"close"==t[0]?"stop"==t[0]?er(this,7):Un(this):"noop"!=t[0]&&this.c&&this.c.ua(t),this.v=0)}},g.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Yn(this),it(19))},g.na=function(a){var b=null;if(this.a==a){Jn(this),this.a=null;var e=2}else{if(!Tn(this.b,a))return;b=a.j,Sn(this.b,a),e=1}if(this.m=a.o,0!=this.u)if(a.b)1==e?(b=k()-a.v,Ze.dispatchEvent(new ot(Ze,a.l?a.l.length:0,b,this.A)),Wn(this)):Gn(this);else{var t=a.c;if(3==t||0==t&&0<this.m||!(1==e&&function(a,b){return!(wn(a.b)>=a.b.f-(a.h?1:0))&&(a.h?(a.f=b.j.concat(a.f),!0):!(1==a.u||2==a.u||a.A>=(a.Oa?0:a.Pa))&&(a.h=at(u(a.Ha,a,b),Zn(a,a.A)),a.A++,!0))}(this,a)||2==e&&Yn(this)))switch(b&&0<b.length&&(a=this.b,a.c=a.c.concat(b)),t){case 1:er(this,5);break;case 4:er(this,10);break;case 3:er(this,6);break;default:er(this,2)}}},g.eb=function(a){it(a?2:1)},g.$=function(a){if(a&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(a=new An(this.Ka)).F=this.R,a},g.ma=function(){return!!this.c&&!0},g.Y=function(){return this.R},(g=ir.prototype).va=function(){},g.ua=function(){},g.ta=function(){},g.sa=function(){},g.Sa=function(){},or.prototype.a=function(a,b){return new ar(a,b)},C(ar,Ae),(g=ar.prototype).addEventListener=function(a,b,e,t){ar.N.addEventListener.call(this,a,b,e,t)},g.removeEventListener=function(a,b,e,t){ar.N.removeEventListener.call(this,a,b,e,t)},g.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var a=this.a,b=this.m,e=this.g,t=this.b||void 0;it(0),a.ha=e,a.V=t||{},a.o&&(a.F.b=[],a.F.a=!1),a.w=new ln(a),null===a.g&&(a.w.h=a.i),e=b,a.g&&a.i&&(e=Bn(b,a.g,a.i)),(a=a.w).i=e,b=rr(a.a,null,a.i),it(3),null!=(e=a.a.F.b)?(a.f=e[0],a.M=1,hn(a)):($t(b,"MODE","init"),!a.a.o&&a.a.j&&$t(b,"X-HTTP-Session-Id",a.a.j),a.b=new vt(a,void 0,void 0),a.b.h=a.h,_t(a.b,b,!1,null),a.M=0)},g.close=function(){Un(this.a)},g.Wa=function(a){if(l(a)){var b={};b.__data__=a,zn(this.a,b)}else this.h?((b={}).__data__=Ne(a),zn(this.a,b)):zn(this.a,a)},g.G=function(){this.a.c=null,delete this.f,Un(this.a),delete this.a,ar.N.G.call(this)},C(sr,mt),C(ur,yt),C(cr,ir),cr.prototype.va=function(){this.a.dispatchEvent("a")},cr.prototype.ua=function(a){this.a.dispatchEvent(new sr(a))},cr.prototype.ta=function(a){this.a.dispatchEvent(new ur(a))},cr.prototype.sa=function(){this.a.dispatchEvent("b")};var lr=_((function(a,b){function e(){}e.prototype=a.prototype;var t=new e;return a.apply(t,Array.prototype.slice.call(arguments,1)),t}),or);or.prototype.createWebChannel=or.prototype.a,ar.prototype.send=ar.prototype.Wa,ar.prototype.open=ar.prototype.Va,ar.prototype.close=ar.prototype.close,st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,ut.COMPLETE="complete",ht.EventType=ft,ft.OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",Ae.prototype.listen=Ae.prototype.za,An.prototype.listenOnce=An.prototype.Aa,An.prototype.getLastError=An.prototype.Xa,An.prototype.getLastErrorCode=An.prototype.ya,An.prototype.getStatus=An.prototype.T,An.prototype.getResponseJson=An.prototype.Ua,An.prototype.getResponseText=An.prototype.aa,An.prototype.send=An.prototype.ca;var dr={createWebChannelTransport:lr,ErrorCode:st,EventType:ut,WebChannel:ht,XhrIo:An},pr=dr.createWebChannelTransport,fr=dr.ErrorCode,mr=dr.EventType,yr=dr.WebChannel,gr=dr.XhrIo;t.default=dr}.call(this,n(25))},23:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return h}));n(71),n(94),n(30),n(42),n(55),n(56);function r(e,t,n){if(n&&(t={_isVue:!0,$parent:n,$options:t}),t){if(t.$_alreadyWarned=t.$_alreadyWarned||[],t.$_alreadyWarned.includes(e))return;t.$_alreadyWarned.push(e)}return"[Vuetify] ".concat(e)+(t?function(e){if(e._isVue&&e.$parent){for(var t=[],n=0;e;){if(t.length>0){var r=t[t.length-1];if(r.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[r,n],n=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map((function(e,i){return"".concat(0===i?"---\x3e ":" ".repeat(5+2*i)).concat(Array.isArray(e)?"".concat(f(e[0]),"... (").concat(e[1]," recursive calls)"):f(e))})).join("\n")}return"\n\n(found in ".concat(f(e),")")}(t):"")}function o(e,t,n){var o=r(e,t,n);null!=o&&console.warn(o)}function c(e,t,n){var o=r(e,t,n);null!=o&&console.error(o)}function l(e,t,n,r){c("[BREAKING] '".concat(e,"' has been removed, use '").concat(t,"' instead. For more information, see the upgrade guide https://github.com/vuetifyjs/vuetify/releases/tag/v2.0.0#user-content-upgrade-guide"),n,r)}function h(e,t,n){o("[REMOVED] '".concat(e,"' has been removed. You can safely omit it."),t,n)}var d=/(?:^|[-_])(\w)/g;function f(e,t){if(e.$root===e)return"<Root>";var n="function"==typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e||{},r=n.name||n._componentTag,o=n.__file;if(!r&&o){var c=o.match(/([^/\\]+)\.vue$/);r=c&&c[1]}return(r?"<".concat(r.replace(d,(function(e){return e.toUpperCase()})).replace(/[-_]/g,""),">"):"<Anonymous>")+(o&&!1!==t?" at ".concat(o):"")}},4:function(e,t,n){var r;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,o){"use strict";var c=[],l=Object.getPrototypeOf,h=c.slice,d=c.flat?function(e){return c.flat.call(e)}:function(e){return c.concat.apply([],e)},f=c.push,m=c.indexOf,y={},v=y.toString,w=y.hasOwnProperty,T=w.toString,S=T.call(Object),_={},k=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},C=function(e){return null!=e&&e===e.window},E=n.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function I(code,e,t){var i,n,script=(t=t||E).createElement("script");if(script.text=code,e)for(i in x)(n=e[i]||e.getAttribute&&e.getAttribute(i))&&script.setAttribute(i,n);t.head.appendChild(script).parentNode.removeChild(script)}function A(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?y[v.call(e)]||"object":typeof e}var D=function(e,t){return new D.fn.init(e,t)};function N(e){var t=!!e&&"length"in e&&e.length,n=A(e);return!k(e)&&!C(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}D.fn=D.prototype={jquery:"3.5.0",constructor:D,length:0,toArray:function(){return h.call(this)},get:function(e){return null==e?h.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=D.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return D.each(this,e)},map:function(e){return this.pushStack(D.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(D.grep(this,(function(e,i){return(i+1)%2})))},odd:function(){return this.pushStack(D.grep(this,(function(e,i){return i%2})))},eq:function(i){var e=this.length,t=+i+(i<0?e:0);return this.pushStack(t>=0&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:c.sort,splice:c.splice},D.extend=D.fn.extend=function(){var e,t,n,r,o,c,l=arguments[0]||{},i=1,h=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[i]||{},i++),"object"==typeof l||k(l)||(l={}),i===h&&(l=this,i--);i<h;i++)if(null!=(e=arguments[i]))for(t in e)r=e[t],"__proto__"!==t&&l!==r&&(d&&r&&(D.isPlainObject(r)||(o=Array.isArray(r)))?(n=l[t],c=o&&!Array.isArray(n)?[]:o||D.isPlainObject(n)?n:{},o=!1,l[t]=D.extend(d,c,r)):void 0!==r&&(l[t]=r));return l},D.extend({expando:"jQuery"+("3.5.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==v.call(e))&&(!(t=l(e))||"function"==typeof(n=w.call(t,"constructor")&&t.constructor)&&T.call(n)===S)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(code,e,t){I(code,{nonce:e&&e.nonce},t)},each:function(e,t){var n,i=0;if(N(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(N(Object(e))?D.merge(n,"string"==typeof e?[e]:e):f.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:m.call(t,e,i)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,c=!n;i<o;i++)!t(e[i],i)!==c&&r.push(e[i]);return r},map:function(e,t,n){var r,o,i=0,c=[];if(N(e))for(r=e.length;i<r;i++)null!=(o=t(e[i],i,n))&&c.push(o);else for(i in e)null!=(o=t(e[i],i,n))&&c.push(o);return d(c)},guid:1,support:_}),"function"==typeof Symbol&&(D.fn[Symbol.iterator]=c[Symbol.iterator]),D.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){y["[object "+t+"]"]=t.toLowerCase()}));var L=function(e){var i,t,n,r,o,c,l,select,h,d,f,m,y,v,w,T,S,_,k,C="sizzle"+1*new Date,E=e.document,x=0,I=0,A=fe(),D=fe(),N=fe(),L=fe(),O=function(a,b){return a===b&&(f=!0),0},M={}.hasOwnProperty,P=[],R=P.pop,F=P.push,V=P.push,B=P.slice,j=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},U="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",H="[\\x20\\t\\r\\n\\f]",z="(?:\\\\[\\da-fA-F]{1,6}"+H+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+H+"*("+z+")(?:"+H+"*([*^$|!~]?=)"+H+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+H+"*\\]",$=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",K=new RegExp(H+"+","g"),Q=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),G=new RegExp("^"+H+"*,"+H+"*"),Y=new RegExp("^"+H+"*([>+~]|"+H+")"+H+"*"),X=new RegExp(H+"|>"),J=new RegExp($),Z=new RegExp("^"+z+"$"),ee={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),bool:new RegExp("^(?:"+U+")$","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},te=/HTML$/i,ne=/^(?:input|select|textarea|button)$/i,re=/^h\d$/i,ie=/^[^{]+\{\s*\[native \w/,oe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ae=/[+~]/,se=new RegExp("\\\\[\\da-fA-F]{1,6}"+H+"?|\\\\([^\\r\\n\\f])","g"),ue=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,le=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},he=function(){m()},de=Ee((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{V.apply(P=B.call(E.childNodes),E.childNodes),P[E.childNodes.length].nodeType}catch(e){V={apply:P.length?function(e,t){F.apply(e,B.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function pe(e,n,r,o){var l,i,h,d,f,v,S,_=n&&n.ownerDocument,E=n?n.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==E&&9!==E&&11!==E)return r;if(!o&&(m(n),n=n||y,w)){if(11!==E&&(f=oe.exec(e)))if(l=f[1]){if(9===E){if(!(h=n.getElementById(l)))return r;if(h.id===l)return r.push(h),r}else if(_&&(h=_.getElementById(l))&&k(n,h)&&h.id===l)return r.push(h),r}else{if(f[2])return V.apply(r,n.getElementsByTagName(e)),r;if((l=f[3])&&t.getElementsByClassName&&n.getElementsByClassName)return V.apply(r,n.getElementsByClassName(l)),r}if(t.qsa&&!L[e+" "]&&(!T||!T.test(e))&&(1!==E||"object"!==n.nodeName.toLowerCase())){if(S=e,_=n,1===E&&(X.test(e)||Y.test(e))){for((_=ae.test(e)&&_e(n.parentNode)||n)===n&&t.scope||((d=n.getAttribute("id"))?d=d.replace(ce,le):n.setAttribute("id",d=C)),i=(v=c(e)).length;i--;)v[i]=(d?"#"+d:":scope")+" "+Ce(v[i]);S=v.join(",")}try{return V.apply(r,_.querySelectorAll(S)),r}catch(t){L(e,!0)}finally{d===C&&n.removeAttribute("id")}}}return select(e.replace(Q,"$1"),n,r,o)}function fe(){var e=[];return function t(r,o){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=o}}function me(e){return e[C]=!0,e}function ye(e){var t=y.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ge(e,t){for(var r=e.split("|"),i=r.length;i--;)n.attrHandle[r[i]]=t}function ve(a,b){var e=b&&a,t=e&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(t)return t;if(e)for(;e=e.nextSibling;)if(e===b)return-1;return a?1:-1}function be(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function we(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function Te(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&de(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function Se(e){return me((function(t){return t=+t,me((function(n,r){for(var o,c=e([],n.length,t),i=c.length;i--;)n[o=c[i]]&&(n[o]=!(r[o]=n[o]))}))}))}function _e(e){return e&&void 0!==e.getElementsByTagName&&e}for(i in t=pe.support={},o=pe.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!te.test(t||n&&n.nodeName||"HTML")},m=pe.setDocument=function(e){var r,c,l=e?e.ownerDocument||e:E;return l!=y&&9===l.nodeType&&l.documentElement?(v=(y=l).documentElement,w=!o(y),E!=y&&(c=y.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",he,!1):c.attachEvent&&c.attachEvent("onunload",he)),t.scope=ye((function(e){return v.appendChild(e).appendChild(y.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),t.attributes=ye((function(e){return e.className="i",!e.getAttribute("className")})),t.getElementsByTagName=ye((function(e){return e.appendChild(y.createComment("")),!e.getElementsByTagName("*").length})),t.getElementsByClassName=ie.test(y.getElementsByClassName),t.getById=ye((function(e){return v.appendChild(e).id=C,!y.getElementsByName||!y.getElementsByName(C).length})),t.getById?(n.filter.ID=function(e){var t=e.replace(se,ue);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&w){var n=t.getElementById(e);return n?[n]:[]}}):(n.filter.ID=function(e){var t=e.replace(se,ue);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&w){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),n.find.TAG=t.getElementsByTagName?function(e,n){return void 0!==n.getElementsByTagName?n.getElementsByTagName(e):t.qsa?n.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},n.find.CLASS=t.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&w)return t.getElementsByClassName(e)},S=[],T=[],(t.qsa=ie.test(y.querySelectorAll))&&(ye((function(e){var input;v.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&T.push("[*^$]="+H+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||T.push("\\["+H+"*(?:value|"+U+")"),e.querySelectorAll("[id~="+C+"-]").length||T.push("~="),(input=y.createElement("input")).setAttribute("name",""),e.appendChild(input),e.querySelectorAll("[name='']").length||T.push("\\["+H+"*name"+H+"*="+H+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||T.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||T.push(".#.+[+~]"),e.querySelectorAll("\\\f"),T.push("[\\r\\n\\f]")})),ye((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var input=y.createElement("input");input.setAttribute("type","hidden"),e.appendChild(input).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&T.push("name"+H+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&T.push(":enabled",":disabled"),v.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&T.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),T.push(",.*:")}))),(t.matchesSelector=ie.test(_=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.oMatchesSelector||v.msMatchesSelector))&&ye((function(e){t.disconnectedMatch=_.call(e,"*"),_.call(e,"[s!='']:x"),S.push("!=",$)})),T=T.length&&new RegExp(T.join("|")),S=S.length&&new RegExp(S.join("|")),r=ie.test(v.compareDocumentPosition),k=r||ie.test(v.contains)?function(a,b){var e=9===a.nodeType?a.documentElement:a,t=b&&b.parentNode;return a===t||!(!t||1!==t.nodeType||!(e.contains?e.contains(t):a.compareDocumentPosition&&16&a.compareDocumentPosition(t)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},O=r?function(a,b){if(a===b)return f=!0,0;var e=!a.compareDocumentPosition-!b.compareDocumentPosition;return e||(1&(e=(a.ownerDocument||a)==(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!t.sortDetached&&b.compareDocumentPosition(a)===e?a==y||a.ownerDocument==E&&k(E,a)?-1:b==y||b.ownerDocument==E&&k(E,b)?1:d?j(d,a)-j(d,b):0:4&e?-1:1)}:function(a,b){if(a===b)return f=!0,0;var e,i=0,t=a.parentNode,n=b.parentNode,r=[a],o=[b];if(!t||!n)return a==y?-1:b==y?1:t?-1:n?1:d?j(d,a)-j(d,b):0;if(t===n)return ve(a,b);for(e=a;e=e.parentNode;)r.unshift(e);for(e=b;e=e.parentNode;)o.unshift(e);for(;r[i]===o[i];)i++;return i?ve(r[i],o[i]):r[i]==E?-1:o[i]==E?1:0},y):y},pe.matches=function(e,t){return pe(e,null,null,t)},pe.matchesSelector=function(e,n){if(m(e),t.matchesSelector&&w&&!L[n+" "]&&(!S||!S.test(n))&&(!T||!T.test(n)))try{var r=_.call(e,n);if(r||t.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){L(n,!0)}return pe(n,y,null,[e]).length>0},pe.contains=function(e,t){return(e.ownerDocument||e)!=y&&m(e),k(e,t)},pe.attr=function(e,r){(e.ownerDocument||e)!=y&&m(e);var o=n.attrHandle[r.toLowerCase()],c=o&&M.call(n.attrHandle,r.toLowerCase())?o(e,r,!w):void 0;return void 0!==c?c:t.attributes||!w?e.getAttribute(r):(c=e.getAttributeNode(r))&&c.specified?c.value:null},pe.escape=function(e){return(e+"").replace(ce,le)},pe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},pe.uniqueSort=function(e){var n,r=[],o=0,i=0;if(f=!t.detectDuplicates,d=!t.sortStable&&e.slice(0),e.sort(O),f){for(;n=e[i++];)n===e[i]&&(o=r.push(i));for(;o--;)e.splice(r[o],1)}return d=null,e},r=pe.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(n=pe.selectors={cacheLength:50,createPseudo:me,match:ee,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(se,ue),e[3]=(e[3]||e[4]||e[5]||"").replace(se,ue),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||pe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&pe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ee.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&J.test(n)&&(t=c(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(se,ue).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var pattern=A[e+" "];return pattern||(pattern=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&A(e,(function(e){return pattern.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var o=pe.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(K," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var c="nth"!==e.slice(0,3),l="last"!==e.slice(-4),h="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,d){var f,m,y,v,w,T,S=c!==l?"nextSibling":"previousSibling",_=t.parentNode,k=h&&t.nodeName.toLowerCase(),E=!d&&!h,I=!1;if(_){if(c){for(;S;){for(v=t;v=v[S];)if(h?v.nodeName.toLowerCase()===k:1===v.nodeType)return!1;T=S="only"===e&&!T&&"nextSibling"}return!0}if(T=[l?_.firstChild:_.lastChild],l&&E){for(I=(w=(f=(m=(y=(v=_)[C]||(v[C]={}))[v.uniqueID]||(y[v.uniqueID]={}))[e]||[])[0]===x&&f[1])&&f[2],v=w&&_.childNodes[w];v=++w&&v&&v[S]||(I=w=0)||T.pop();)if(1===v.nodeType&&++I&&v===t){m[e]=[x,w,I];break}}else if(E&&(I=w=(f=(m=(y=(v=t)[C]||(v[C]={}))[v.uniqueID]||(y[v.uniqueID]={}))[e]||[])[0]===x&&f[1]),!1===I)for(;(v=++w&&v&&v[S]||(I=w=0)||T.pop())&&((h?v.nodeName.toLowerCase()!==k:1!==v.nodeType)||!++I||(E&&((m=(y=v[C]||(v[C]={}))[v.uniqueID]||(y[v.uniqueID]={}))[e]=[x,I]),v!==t)););return(I-=o)===r||I%r==0&&I/r>=0}}},PSEUDO:function(e,t){var r,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||pe.error("unsupported pseudo: "+e);return o[C]?o(t):o.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?me((function(e,n){for(var r,c=o(e,t),i=c.length;i--;)e[r=j(e,c[i])]=!(n[r]=c[i])})):function(e){return o(e,0,r)}):o}},pseudos:{not:me((function(e){var input=[],t=[],n=l(e.replace(Q,"$1"));return n[C]?me((function(e,t,r,o){for(var c,l=n(e,null,o,[]),i=e.length;i--;)(c=l[i])&&(e[i]=!(t[i]=c))})):function(e,r,o){return input[0]=e,n(input,null,o,t),input[0]=null,!t.pop()}})),has:me((function(e){return function(t){return pe(e,t).length>0}})),contains:me((function(text){return text=text.replace(se,ue),function(e){return(e.textContent||r(e)).indexOf(text)>-1}})),lang:me((function(e){return Z.test(e||"")||pe.error("unsupported lang: "+e),e=e.replace(se,ue).toLowerCase(),function(t){var n;do{if(n=w?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===v},focus:function(e){return e===y.activeElement&&(!y.hasFocus||y.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:Te(!1),disabled:Te(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return re.test(e.nodeName)},input:function(e){return ne.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:Se((function(){return[0]})),last:Se((function(e,t){return[t-1]})),eq:Se((function(e,t,n){return[n<0?n+t:n]})),even:Se((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:Se((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:Se((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:Se((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[i]=be(i);for(i in{submit:!0,reset:!0})n.pseudos[i]=we(i);function ke(){}function Ce(e){for(var i=0,t=e.length,n="";i<t;i++)n+=e[i].value;return n}function Ee(e,t,base){var n=t.dir,r=t.next,o=r||n,c=base&&"parentNode"===o,l=I++;return t.first?function(t,r,o){for(;t=t[n];)if(1===t.nodeType||c)return e(t,r,o);return!1}:function(t,h,d){var f,m,y,v=[x,l];if(d){for(;t=t[n];)if((1===t.nodeType||c)&&e(t,h,d))return!0}else for(;t=t[n];)if(1===t.nodeType||c)if(m=(y=t[C]||(t[C]={}))[t.uniqueID]||(y[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((f=m[o])&&f[0]===x&&f[1]===l)return v[2]=f[2];if(m[o]=v,v[2]=e(t,h,d))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Ie(e,map,filter,t,n){for(var r,o=[],i=0,c=e.length,l=null!=map;i<c;i++)(r=e[i])&&(filter&&!filter(r,t,n)||(o.push(r),l&&map.push(i)));return o}function Ae(e,t,n,r,o,c){return r&&!r[C]&&(r=Ae(r)),o&&!o[C]&&(o=Ae(o,c)),me((function(c,l,h,d){var f,i,m,y=[],v=[],w=l.length,T=c||function(e,t,n){for(var i=0,r=t.length;i<r;i++)pe(e,t[i],n);return n}(t||"*",h.nodeType?[h]:h,[]),S=!e||!c&&t?T:Ie(T,y,e,h,d),_=n?o||(c?e:w||r)?[]:l:S;if(n&&n(S,_,h,d),r)for(f=Ie(_,v),r(f,[],h,d),i=f.length;i--;)(m=f[i])&&(_[v[i]]=!(S[v[i]]=m));if(c){if(o||e){if(o){for(f=[],i=_.length;i--;)(m=_[i])&&f.push(S[i]=m);o(null,_=[],f,d)}for(i=_.length;i--;)(m=_[i])&&(f=o?j(c,m):y[i])>-1&&(c[f]=!(l[f]=m))}}else _=Ie(_===l?_.splice(w,_.length):_),o?o(null,l,_,d):V.apply(l,_)}))}function De(e){for(var t,r,o,c=e.length,l=n.relative[e[0].type],d=l||n.relative[" "],i=l?1:0,f=Ee((function(e){return e===t}),d,!0),m=Ee((function(e){return j(t,e)>-1}),d,!0),y=[function(e,n,r){var o=!l&&(r||n!==h)||((t=n).nodeType?f(e,n,r):m(e,n,r));return t=null,o}];i<c;i++)if(r=n.relative[e[i].type])y=[Ee(xe(y),r)];else{if((r=n.filter[e[i].type].apply(null,e[i].matches))[C]){for(o=++i;o<c&&!n.relative[e[o].type];o++);return Ae(i>1&&xe(y),i>1&&Ce(e.slice(0,i-1).concat({value:" "===e[i-2].type?"*":""})).replace(Q,"$1"),r,i<o&&De(e.slice(i,o)),o<c&&De(e=e.slice(o)),o<c&&Ce(e))}y.push(r)}return xe(y)}return ke.prototype=n.filters=n.pseudos,n.setFilters=new ke,c=pe.tokenize=function(e,t){var r,o,c,l,h,d,f,m=D[e+" "];if(m)return t?0:m.slice(0);for(h=e,d=[],f=n.preFilter;h;){for(l in r&&!(o=G.exec(h))||(o&&(h=h.slice(o[0].length)||h),d.push(c=[])),r=!1,(o=Y.exec(h))&&(r=o.shift(),c.push({value:r,type:o[0].replace(Q," ")}),h=h.slice(r.length)),n.filter)!(o=ee[l].exec(h))||f[l]&&!(o=f[l](o))||(r=o.shift(),c.push({value:r,type:l,matches:o}),h=h.slice(r.length));if(!r)break}return t?h.length:h?pe.error(e):D(e,d).slice(0)},l=pe.compile=function(e,t){var i,r=[],o=[],l=N[e+" "];if(!l){for(t||(t=c(e)),i=t.length;i--;)(l=De(t[i]))[C]?r.push(l):o.push(l);(l=N(e,function(e,t){var r=t.length>0,o=e.length>0,c=function(c,l,d,f,v){var T,S,_,k=0,i="0",C=c&&[],E=[],I=h,A=c||o&&n.find.TAG("*",v),D=x+=null==I?1:Math.random()||.1,N=A.length;for(v&&(h=l==y||l||v);i!==N&&null!=(T=A[i]);i++){if(o&&T){for(S=0,l||T.ownerDocument==y||(m(T),d=!w);_=e[S++];)if(_(T,l||y,d)){f.push(T);break}v&&(x=D)}r&&((T=!_&&T)&&k--,c&&C.push(T))}if(k+=i,r&&i!==k){for(S=0;_=t[S++];)_(C,E,l,d);if(c){if(k>0)for(;i--;)C[i]||E[i]||(E[i]=R.call(f));E=Ie(E)}V.apply(f,E),v&&!c&&E.length>0&&k+t.length>1&&pe.uniqueSort(f)}return v&&(x=D,h=I),C};return r?me(c):c}(o,r))).selector=e}return l},select=pe.select=function(e,t,r,o){var i,h,d,f,m,y="function"==typeof e&&e,v=!o&&c(e=y.selector||e);if(r=r||[],1===v.length){if((h=v[0]=v[0].slice(0)).length>2&&"ID"===(d=h[0]).type&&9===t.nodeType&&w&&n.relative[h[1].type]){if(!(t=(n.find.ID(d.matches[0].replace(se,ue),t)||[])[0]))return r;y&&(t=t.parentNode),e=e.slice(h.shift().value.length)}for(i=ee.needsContext.test(e)?0:h.length;i--&&(d=h[i],!n.relative[f=d.type]);)if((m=n.find[f])&&(o=m(d.matches[0].replace(se,ue),ae.test(h[0].type)&&_e(t.parentNode)||t))){if(h.splice(i,1),!(e=o.length&&Ce(h)))return V.apply(r,o),r;break}}return(y||l(e,v))(o,t,!w,r,!t||ae.test(e)&&_e(t.parentNode)||t),r},t.sortStable=C.split("").sort(O).join("")===C,t.detectDuplicates=!!f,m(),t.sortDetached=ye((function(e){return 1&e.compareDocumentPosition(y.createElement("fieldset"))})),ye((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ge("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),t.attributes&&ye((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ge("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ye((function(e){return null==e.getAttribute("disabled")}))||ge(U,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),pe}(n);D.find=L,D.expr=L.selectors,D.expr[":"]=D.expr.pseudos,D.uniqueSort=D.unique=L.uniqueSort,D.text=L.getText,D.isXMLDoc=L.isXML,D.contains=L.contains,D.escapeSelector=L.escape;var O=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&D(e).is(n))break;r.push(e)}return r},M=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},P=D.expr.match.needsContext;function R(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(e,t,n){return k(t)?D.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?D.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?D.grep(e,(function(e){return m.call(t,e)>-1!==n})):D.filter(t,e,n)}D.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?D.find.matchesSelector(r,e)?[r]:[]:D.find.matches(e,D.grep(t,(function(e){return 1===e.nodeType})))},D.fn.extend({find:function(e){var i,t,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(D(e).filter((function(){for(i=0;i<n;i++)if(D.contains(r[i],this))return!0})));for(t=this.pushStack([]),i=0;i<n;i++)D.find(e,r[i],t);return n>1?D.uniqueSort(t):t},filter:function(e){return this.pushStack(V(this,e||[],!1))},not:function(e){return this.pushStack(V(this,e||[],!0))},is:function(e){return!!V(this,"string"==typeof e&&P.test(e)?D(e):e||[],!1).length}});var B,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(D.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||B,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof D?t[0]:t,D.merge(this,D.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),F.test(r[1])&&D.isPlainObject(t))for(r in t)k(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=E.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):k(e)?void 0!==n.ready?n.ready(e):e(D):D.makeArray(e,this)}).prototype=D.fn,B=D(E);var U=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function z(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}D.fn.extend({has:function(e){var t=D(e,this),n=t.length;return this.filter((function(){for(var i=0;i<n;i++)if(D.contains(this,t[i]))return!0}))},closest:function(e,t){var n,i=0,r=this.length,o=[],c="string"!=typeof e&&D(e);if(!P.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(c?c.index(n)>-1:1===n.nodeType&&D.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?D.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?m.call(D(e),this[0]):m.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(D.uniqueSort(D.merge(this.get(),D(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),D.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O(e,"parentNode")},parentsUntil:function(e,t,n){return O(e,"parentNode",n)},next:function(e){return z(e,"nextSibling")},prev:function(e){return z(e,"previousSibling")},nextAll:function(e){return O(e,"nextSibling")},prevAll:function(e){return O(e,"previousSibling")},nextUntil:function(e,t,n){return O(e,"nextSibling",n)},prevUntil:function(e,t,n){return O(e,"previousSibling",n)},siblings:function(e){return M((e.parentNode||{}).firstChild,e)},children:function(e){return M(e.firstChild)},contents:function(e){return null!=e.contentDocument&&l(e.contentDocument)?e.contentDocument:(R(e,"template")&&(e=e.content||e),D.merge([],e.childNodes))}},(function(e,t){D.fn[e]=function(n,r){var o=D.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=D.filter(r,o)),this.length>1&&(H[e]||D.uniqueSort(o),U.test(e)&&o.reverse()),this.pushStack(o)}}));var W=/[^\x20\t\r\n\f]+/g;function $(e){return e}function K(e){throw e}function Q(e,t,n,r){var o;try{e&&k(o=e.promise)?o.call(e).done(t).fail(n):e&&k(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}D.Callbacks=function(e){e="string"==typeof e?function(e){var object={};return D.each(e.match(W)||[],(function(e,t){object[t]=!0})),object}(e):D.extend({},e);var t,n,r,o,c=[],l=[],h=-1,d=function(){for(o=o||e.once,r=t=!0;l.length;h=-1)for(n=l.shift();++h<c.length;)!1===c[h].apply(n[0],n[1])&&e.stopOnFalse&&(h=c.length,n=!1);e.memory||(n=!1),t=!1,o&&(c=n?[]:"")},f={add:function(){return c&&(n&&!t&&(h=c.length-1,l.push(n)),function t(n){D.each(n,(function(n,r){k(r)?e.unique&&f.has(r)||c.push(r):r&&r.length&&"string"!==A(r)&&t(r)}))}(arguments),n&&!t&&d()),this},remove:function(){return D.each(arguments,(function(e,t){for(var n;(n=D.inArray(t,c,n))>-1;)c.splice(n,1),n<=h&&h--})),this},has:function(e){return e?D.inArray(e,c)>-1:c.length>0},empty:function(){return c&&(c=[]),this},disable:function(){return o=l=[],c=n="",this},disabled:function(){return!c},lock:function(){return o=l=[],n||t||(c=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],l.push(n),t||d()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},D.extend({Deferred:function(e){var t=[["notify","progress",D.Callbacks("memory"),D.Callbacks("memory"),2],["resolve","done",D.Callbacks("once memory"),D.Callbacks("once memory"),0,"resolved"],["reject","fail",D.Callbacks("once memory"),D.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return c.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return D.Deferred((function(n){D.each(t,(function(t,r){var o=k(e[r[4]])&&e[r[4]];c[r[1]]((function(){var e=o&&o.apply(this,arguments);e&&k(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,o){var c=0;function l(e,t,r,o){return function(){var h=this,d=arguments,f=function(){var n,f;if(!(e<c)){if((n=r.apply(h,d))===t.promise())throw new TypeError("Thenable self-resolution");f=n&&("object"==typeof n||"function"==typeof n)&&n.then,k(f)?o?f.call(n,l(c,t,$,o),l(c,t,K,o)):(c++,f.call(n,l(c,t,$,o),l(c,t,K,o),l(c,t,$,t.notifyWith))):(r!==$&&(h=void 0,d=[n]),(o||t.resolveWith)(h,d))}},m=o?f:function(){try{f()}catch(n){D.Deferred.exceptionHook&&D.Deferred.exceptionHook(n,m.stackTrace),e+1>=c&&(r!==K&&(h=void 0,d=[n]),t.rejectWith(h,d))}};e?m():(D.Deferred.getStackHook&&(m.stackTrace=D.Deferred.getStackHook()),n.setTimeout(m))}}return D.Deferred((function(n){t[0][3].add(l(0,n,k(o)?o:$,n.notifyWith)),t[1][3].add(l(0,n,k(e)?e:$)),t[2][3].add(l(0,n,k(r)?r:K))})).promise()},promise:function(e){return null!=e?D.extend(e,o):o}},c={};return D.each(t,(function(i,e){var n=e[2],l=e[5];o[e[1]]=n.add,l&&n.add((function(){r=l}),t[3-i][2].disable,t[3-i][3].disable,t[0][2].lock,t[0][3].lock),n.add(e[3].fire),c[e[0]]=function(){return c[e[0]+"With"](this===c?void 0:this,arguments),this},c[e[0]+"With"]=n.fireWith})),o.promise(c),e&&e.call(c,c),c},when:function(e){var t=arguments.length,i=t,n=Array(i),r=h.call(arguments),o=D.Deferred(),c=function(i){return function(e){n[i]=this,r[i]=arguments.length>1?h.call(arguments):e,--t||o.resolveWith(n,r)}};if(t<=1&&(Q(e,o.done(c(i)).resolve,o.reject,!t),"pending"===o.state()||k(r[i]&&r[i].then)))return o.then();for(;i--;)Q(r[i],c(i),o.reject);return o.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;D.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&G.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},D.readyException=function(e){n.setTimeout((function(){throw e}))};var Y=D.Deferred();function X(){E.removeEventListener("DOMContentLoaded",X),n.removeEventListener("load",X),D.ready()}D.fn.ready=function(e){return Y.then(e).catch((function(e){D.readyException(e)})),this},D.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--D.readyWait:D.isReady)||(D.isReady=!0,!0!==e&&--D.readyWait>0||Y.resolveWith(E,[D]))}}),D.ready.then=Y.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?n.setTimeout(D.ready):(E.addEventListener("DOMContentLoaded",X),n.addEventListener("load",X));var J=function(e,t,n,r,o,c,l){var i=0,h=e.length,d=null==n;if("object"===A(n))for(i in o=!0,n)J(e,t,i,n[i],!0,c,l);else if(void 0!==r&&(o=!0,k(r)||(l=!0),d&&(l?(t.call(e,r),t=null):(d=t,t=function(e,t,n){return d.call(D(e),n)})),t))for(;i<h;i++)t(e[i],n,l?r:r.call(e[i],i,t(e[i],n)));return o?e:d?t.call(e):h?t(e[0],n):c},Z=/^-ms-/,ee=/-([a-z])/g;function te(e,t){return t.toUpperCase()}function ne(e){return e.replace(Z,"ms-").replace(ee,te)}var re=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ie(){this.expando=D.expando+ie.uid++}ie.uid=1,ie.prototype={cache:function(e){var t=e[this.expando];return t||(t=Object.create(null),re(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,data,t){var n,r=this.cache(e);if("string"==typeof data)r[ne(data)]=t;else for(n in data)r[ne(n)]=data[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ne(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(ne):(t=ne(t))in n?[t]:t.match(W)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||D.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!D.isEmptyObject(t)}};var oe=new ie,ae=new ie,se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function ce(e,t,data){var n;if(void 0===data&&1===e.nodeType)if(n="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(data=e.getAttribute(n))){try{data=function(data){return"true"===data||"false"!==data&&("null"===data?null:data===+data+""?+data:se.test(data)?JSON.parse(data):data)}(data)}catch(e){}ae.set(e,t,data)}else data=void 0;return data}D.extend({hasData:function(e){return ae.hasData(e)||oe.hasData(e)},data:function(e,t,data){return ae.access(e,t,data)},removeData:function(e,t){ae.remove(e,t)},_data:function(e,t,data){return oe.access(e,t,data)},_removeData:function(e,t){oe.remove(e,t)}}),D.fn.extend({data:function(e,t){var i,n,data,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(data=ae.get(r),1===r.nodeType&&!oe.get(r,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=ne(n.slice(5)),ce(r,n,data[n]));oe.set(r,"hasDataAttrs",!0)}return data}return"object"==typeof e?this.each((function(){ae.set(this,e)})):J(this,(function(t){var data;if(r&&void 0===t)return void 0!==(data=ae.get(r,e))?data:void 0!==(data=ce(r,e))?data:void 0;this.each((function(){ae.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ae.remove(this,e)}))}}),D.extend({queue:function(e,t,data){var n;if(e)return t=(t||"fx")+"queue",n=oe.get(e,t),data&&(!n||Array.isArray(data)?n=oe.access(e,t,D.makeArray(data)):n.push(data)),n||[]},dequeue:function(e,t){t=t||"fx";var n=D.queue(e,t),r=n.length,o=n.shift(),c=D._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete c.stop,o.call(e,(function(){D.dequeue(e,t)}),c)),!r&&c&&c.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return oe.get(e,n)||oe.access(e,n,{empty:D.Callbacks("once memory").add((function(){oe.remove(e,[t+"queue",n])}))})}}),D.fn.extend({queue:function(e,data){var t=2;return"string"!=typeof e&&(data=e,e="fx",t--),arguments.length<t?D.queue(this[0],e):void 0===data?this:this.each((function(){var t=D.queue(this,e,data);D._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&D.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){D.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=D.Deferred(),c=this,i=this.length,l=function(){--r||o.resolveWith(c,[c])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=oe.get(c[i],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(l));return l(),o.promise(t)}});var le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=new RegExp("^(?:([+-])=|)("+le+")([a-z%]*)$","i"),de=["Top","Right","Bottom","Left"],pe=E.documentElement,fe=function(e){return D.contains(e.ownerDocument,e)},me={composed:!0};pe.getRootNode&&(fe=function(e){return D.contains(e.ownerDocument,e)||e.getRootNode(me)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&fe(e)&&"none"===D.css(e,"display")};function ge(e,t,n,r){var o,c,l=20,h=r?function(){return r.cur()}:function(){return D.css(e,t,"")},d=h(),f=n&&n[3]||(D.cssNumber[t]?"":"px"),m=e.nodeType&&(D.cssNumber[t]||"px"!==f&&+d)&&he.exec(D.css(e,t));if(m&&m[3]!==f){for(d/=2,f=f||m[3],m=+d||1;l--;)D.style(e,t,m+f),(1-c)*(1-(c=h()/d||.5))<=0&&(l=0),m/=c;m*=2,D.style(e,t,m+f),n=n||[]}return n&&(m=+m||+d||0,o=n[1]?m+(n[1]+1)*n[2]:+n[2],r&&(r.unit=f,r.start=m,r.end=o)),o}var ve={};function be(e){var t,n=e.ownerDocument,r=e.nodeName,o=ve[r];return o||(t=n.body.appendChild(n.createElement(r)),o=D.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),ve[r]=o,o)}function we(e,t){for(var n,r,o=[],c=0,l=e.length;c<l;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(o[c]=oe.get(r,"display")||null,o[c]||(r.style.display="")),""===r.style.display&&ye(r)&&(o[c]=be(r))):"none"!==n&&(o[c]="none",oe.set(r,"display",n)));for(c=0;c<l;c++)null!=o[c]&&(e[c].style.display=o[c]);return e}D.fn.extend({show:function(){return we(this,!0)},hide:function(){return we(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ye(this)?D(this).show():D(this).hide()}))}});var div,input,Te=/^(?:checkbox|radio)$/i,Se=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,_e=/^$|^module$|\/(?:java|ecma)script/i;div=E.createDocumentFragment().appendChild(E.createElement("div")),(input=E.createElement("input")).setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),_.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",_.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue,div.innerHTML="<option></option>",_.option=!!div.lastChild;var ke={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ce(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&R(e,t)?D.merge([e],n):n}function Ee(e,t){for(var i=0,n=e.length;i<n;i++)oe.set(e[i],"globalEval",!t||oe.get(t[i],"globalEval"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,_.option||(ke.optgroup=ke.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function Ie(e,t,n,r,o){for(var c,l,h,d,f,m,y=t.createDocumentFragment(),v=[],i=0,w=e.length;i<w;i++)if((c=e[i])||0===c)if("object"===A(c))D.merge(v,c.nodeType?[c]:c);else if(xe.test(c)){for(l=l||y.appendChild(t.createElement("div")),h=(Se.exec(c)||["",""])[1].toLowerCase(),d=ke[h]||ke._default,l.innerHTML=d[1]+D.htmlPrefilter(c)+d[2],m=d[0];m--;)l=l.lastChild;D.merge(v,l.childNodes),(l=y.firstChild).textContent=""}else v.push(t.createTextNode(c));for(y.textContent="",i=0;c=v[i++];)if(r&&D.inArray(c,r)>-1)o&&o.push(c);else if(f=fe(c),l=Ce(y.appendChild(c),"script"),f&&Ee(l),n)for(m=0;c=l[m++];)_e.test(c.type||"")&&n.push(c);return y}var Ae=/^key/,De=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ne=/^([^.]*)(?:\.(.+)|)/;function Le(){return!0}function Oe(){return!1}function Me(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Pe(e,t,n,data,r,o){var c,l;if("object"==typeof t){for(l in"string"!=typeof n&&(data=data||n,n=void 0),t)Pe(e,l,n,data,t[l],o);return e}if(null==data&&null==r?(r=n,data=n=void 0):null==r&&("string"==typeof n?(r=data,data=void 0):(r=data,data=n,n=void 0)),!1===r)r=Oe;else if(!r)return e;return 1===o&&(c=r,(r=function(e){return D().off(e),c.apply(this,arguments)}).guid=c.guid||(c.guid=D.guid++)),e.each((function(){D.event.add(this,t,r,data,n)}))}function Re(e,t,n){n?(oe.set(e,t,!1),D.event.add(e,t,{namespace:!1,handler:function(e){var r,o,c=oe.get(this,t);if(1&e.isTrigger&&this[t]){if(c.length)(D.event.special[t]||{}).delegateType&&e.stopPropagation();else if(c=h.call(arguments),oe.set(this,t,c),r=n(this,t),this[t](),c!==(o=oe.get(this,t))||r?oe.set(this,t,!1):o={},c!==o)return e.stopImmediatePropagation(),e.preventDefault(),o.value}else c.length&&(oe.set(this,t,{value:D.event.trigger(D.extend(c[0],D.Event.prototype),c.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===oe.get(e,t)&&D.event.add(e,t,Le)}D.event={global:{},add:function(e,t,n,data,r){var o,c,l,h,d,f,m,y,v,w,T,S=oe.get(e);if(re(e))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&D.find.matchesSelector(pe,r),n.guid||(n.guid=D.guid++),(h=S.events)||(h=S.events=Object.create(null)),(c=S.handle)||(c=S.handle=function(t){return void 0!==D&&D.event.triggered!==t.type?D.event.dispatch.apply(e,arguments):void 0}),d=(t=(t||"").match(W)||[""]).length;d--;)v=T=(l=Ne.exec(t[d])||[])[1],w=(l[2]||"").split(".").sort(),v&&(m=D.event.special[v]||{},v=(r?m.delegateType:m.bindType)||v,m=D.event.special[v]||{},f=D.extend({type:v,origType:T,data:data,handler:n,guid:n.guid,selector:r,needsContext:r&&D.expr.match.needsContext.test(r),namespace:w.join(".")},o),(y=h[v])||((y=h[v]=[]).delegateCount=0,m.setup&&!1!==m.setup.call(e,data,w,c)||e.addEventListener&&e.addEventListener(v,c)),m.add&&(m.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),r?y.splice(y.delegateCount++,0,f):y.push(f),D.event.global[v]=!0)},remove:function(e,t,n,r,o){var c,l,h,d,f,m,y,v,w,T,S,_=oe.hasData(e)&&oe.get(e);if(_&&(d=_.events)){for(f=(t=(t||"").match(W)||[""]).length;f--;)if(w=S=(h=Ne.exec(t[f])||[])[1],T=(h[2]||"").split(".").sort(),w){for(y=D.event.special[w]||{},v=d[w=(r?y.delegateType:y.bindType)||w]||[],h=h[2]&&new RegExp("(^|\\.)"+T.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=c=v.length;c--;)m=v[c],!o&&S!==m.origType||n&&n.guid!==m.guid||h&&!h.test(m.namespace)||r&&r!==m.selector&&("**"!==r||!m.selector)||(v.splice(c,1),m.selector&&v.delegateCount--,y.remove&&y.remove.call(e,m));l&&!v.length&&(y.teardown&&!1!==y.teardown.call(e,T,_.handle)||D.removeEvent(e,w,_.handle),delete d[w])}else for(w in d)D.event.remove(e,w+t[f],n,r,!0);D.isEmptyObject(d)&&oe.remove(e,"handle events")}},dispatch:function(e){var i,t,n,r,o,c,l=new Array(arguments.length),h=D.event.fix(e),d=(oe.get(this,"events")||Object.create(null))[h.type]||[],f=D.event.special[h.type]||{};for(l[0]=h,i=1;i<arguments.length;i++)l[i]=arguments[i];if(h.delegateTarget=this,!f.preDispatch||!1!==f.preDispatch.call(this,h)){for(c=D.event.handlers.call(this,h,d),i=0;(r=c[i++])&&!h.isPropagationStopped();)for(h.currentTarget=r.elem,t=0;(o=r.handlers[t++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!1!==o.namespace&&!h.rnamespace.test(o.namespace)||(h.handleObj=o,h.data=o.data,void 0!==(n=((D.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(h.result=n)&&(h.preventDefault(),h.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,h),h.result}},handlers:function(e,t){var i,n,r,o,c,l=[],h=t.delegateCount,d=e.target;if(h&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(o=[],c={},i=0;i<h;i++)void 0===c[r=(n=t[i]).selector+" "]&&(c[r]=n.needsContext?D(r,this).index(d)>-1:D.find(r,this,null,[d]).length),c[r]&&o.push(n);o.length&&l.push({elem:d,handlers:o})}return d=this,h<t.length&&l.push({elem:d,handlers:t.slice(h)}),l},addProp:function(e,t){Object.defineProperty(D.Event.prototype,e,{enumerable:!0,configurable:!0,get:k(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[D.expando]?e:new D.Event(e)},special:{load:{noBubble:!0},click:{setup:function(data){var e=this||data;return Te.test(e.type)&&e.click&&R(e,"input")&&Re(e,"click",Le),!1},trigger:function(data){var e=this||data;return Te.test(e.type)&&e.click&&R(e,"input")&&Re(e,"click"),!0},_default:function(e){var t=e.target;return Te.test(t.type)&&t.click&&R(t,"input")&&oe.get(t,"click")||R(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},D.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},D.Event=function(e,t){if(!(this instanceof D.Event))return new D.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Le:Oe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&D.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[D.expando]=!0},D.Event.prototype={constructor:D.Event,isDefaultPrevented:Oe,isPropagationStopped:Oe,isImmediatePropagationStopped:Oe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Le,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Le,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Le,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},D.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var button=e.button;return null==e.which&&Ae.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==button&&De.test(e.type)?1&button?1:2&button?3:4&button?2:0:e.which}},D.event.addProp),D.each({focus:"focusin",blur:"focusout"},(function(e,t){D.event.special[e]={setup:function(){return Re(this,e,Me),!1},trigger:function(){return Re(this,e),!0},delegateType:t}})),D.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){D.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,c=e.handleObj;return o&&(o===r||D.contains(r,o))||(e.type=c.origType,n=c.handler.apply(this,arguments),e.type=t),n}}})),D.fn.extend({on:function(e,t,data,n){return Pe(this,e,t,data,n)},one:function(e,t,data,n){return Pe(this,e,t,data,n,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,D(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Oe),this.each((function(){D.event.remove(this,e,n,t)}))}});var Fe=/<script|<style|<link/i,qe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Be(e,content){return R(e,"table")&&R(11!==content.nodeType?content:content.firstChild,"tr")&&D(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function He(e,t){var i,n,r,o,c,l;if(1===t.nodeType){if(oe.hasData(e)&&(l=oe.get(e).events))for(r in oe.remove(t,"handle events"),l)for(i=0,n=l[r].length;i<n;i++)D.event.add(t,r,l[r][i]);ae.hasData(e)&&(o=ae.access(e),c=D.extend({},o),ae.set(t,c))}}function ze(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Te.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function We(e,t,n,r){t=d(t);var o,c,l,h,f,m,i=0,y=e.length,v=y-1,w=t[0],T=k(w);if(T||y>1&&"string"==typeof w&&!_.checkClone&&qe.test(w))return e.each((function(o){var c=e.eq(o);T&&(t[0]=w.call(this,o,c.html())),We(c,t,n,r)}));if(y&&(c=(o=Ie(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=c),c||r)){for(h=(l=D.map(Ce(o,"script"),je)).length;i<y;i++)f=o,i!==v&&(f=D.clone(f,!0,!0),h&&D.merge(l,Ce(f,"script"))),n.call(e[i],f,i);if(h)for(m=l[l.length-1].ownerDocument,D.map(l,Ue),i=0;i<h;i++)f=l[i],_e.test(f.type||"")&&!oe.access(f,"globalEval")&&D.contains(m,f)&&(f.src&&"module"!==(f.type||"").toLowerCase()?D._evalUrl&&!f.noModule&&D._evalUrl(f.src,{nonce:f.nonce||f.getAttribute("nonce")},m):I(f.textContent.replace(Ve,""),f,m))}return e}function $e(e,t,n){for(var r,o=t?D.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||D.cleanData(Ce(r)),r.parentNode&&(n&&fe(r)&&Ee(Ce(r,"script")),r.parentNode.removeChild(r));return e}D.extend({htmlPrefilter:function(html){return html},clone:function(e,t,n){var i,r,o,c,l=e.cloneNode(!0),h=fe(e);if(!(_.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||D.isXMLDoc(e)))for(c=Ce(l),i=0,r=(o=Ce(e)).length;i<r;i++)ze(o[i],c[i]);if(t)if(n)for(o=o||Ce(e),c=c||Ce(l),i=0,r=o.length;i<r;i++)He(o[i],c[i]);else He(e,l);return(c=Ce(l,"script")).length>0&&Ee(c,!h&&Ce(e,"script")),l},cleanData:function(e){for(var data,t,n,r=D.event.special,i=0;void 0!==(t=e[i]);i++)if(re(t)){if(data=t[oe.expando]){if(data.events)for(n in data.events)r[n]?D.event.remove(t,n):D.removeEvent(t,n,data.handle);t[oe.expando]=void 0}t[ae.expando]&&(t[ae.expando]=void 0)}}}),D.fn.extend({detach:function(e){return $e(this,e,!0)},remove:function(e){return $e(this,e)},text:function(e){return J(this,(function(e){return void 0===e?D.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return We(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Be(this,e).appendChild(e)}))},prepend:function(){return We(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Be(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,i=0;null!=(e=this[i]);i++)1===e.nodeType&&(D.cleanData(Ce(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return D.clone(this,e,t)}))},html:function(e){return J(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Fe.test(e)&&!ke[(Se.exec(e)||["",""])[1].toLowerCase()]){e=D.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(D.cleanData(Ce(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,(function(t){var n=this.parentNode;D.inArray(this,e)<0&&(D.cleanData(Ce(this)),n&&n.replaceChild(t,this))}),e)}}),D.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){D.fn[e]=function(e){for(var n,r=[],o=D(e),c=o.length-1,i=0;i<=c;i++)n=i===c?this:this.clone(!0),D(o[i])[t](n),f.apply(r,n.get());return this.pushStack(r)}}));var Ke=new RegExp("^("+le+")(?!px)[a-z%]+$","i"),Qe=function(e){var view=e.ownerDocument.defaultView;return view&&view.opener||(view=n),view.getComputedStyle(e)},Ge=function(e,t,n){var r,o,c={};for(o in t)c[o]=e.style[o],e.style[o]=t[o];for(o in r=n.call(e),t)e.style[o]=c[o];return r},Ye=new RegExp(de.join("|"),"i");function Xe(e,t,n){var r,o,c,l,style=e.style;return(n=n||Qe(e))&&(""!==(l=n.getPropertyValue(t)||n[t])||fe(e)||(l=D.style(e,t)),!_.pixelBoxStyles()&&Ke.test(l)&&Ye.test(t)&&(r=style.width,o=style.minWidth,c=style.maxWidth,style.minWidth=style.maxWidth=style.width=l,l=n.width,style.width=r,style.minWidth=o,style.maxWidth=c)),void 0!==l?l+"":l}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(div){f.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",div.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pe.appendChild(f).appendChild(div);var e=n.getComputedStyle(div);r="1%"!==e.top,d=12===t(e.marginLeft),div.style.right="60%",l=36===t(e.right),o=36===t(e.width),div.style.position="absolute",c=12===t(div.offsetWidth/3),pe.removeChild(f),div=null}}function t(e){return Math.round(parseFloat(e))}var r,o,c,l,h,d,f=E.createElement("div"),div=E.createElement("div");div.style&&(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",_.clearCloneStyle="content-box"===div.style.backgroundClip,D.extend(_,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),l},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),d},scrollboxSize:function(){return e(),c},reliableTrDimensions:function(){var table,tr,e,t;return null==h&&(table=E.createElement("table"),tr=E.createElement("tr"),e=E.createElement("div"),table.style.cssText="position:absolute;left:-11111px",tr.style.height="1px",e.style.height="9px",pe.appendChild(table).appendChild(tr).appendChild(e),t=n.getComputedStyle(tr),h=parseInt(t.height)>3,pe.removeChild(table)),h}}))}();var Ze=["Webkit","Moz","ms"],et=E.createElement("div").style,tt={};function nt(e){var t=D.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=Ze.length;i--;)if((e=Ze[i]+t)in et)return e}(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,ot=/^--/,at={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function ut(e,t,n){var r=he.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ct(e,t,n,r,o,c){var i="width"===t?1:0,l=0,h=0;if(n===(r?"border":"content"))return 0;for(;i<4;i+=2)"margin"===n&&(h+=D.css(e,n+de[i],!0,o)),r?("content"===n&&(h-=D.css(e,"padding"+de[i],!0,o)),"margin"!==n&&(h-=D.css(e,"border"+de[i]+"Width",!0,o))):(h+=D.css(e,"padding"+de[i],!0,o),"padding"!==n?h+=D.css(e,"border"+de[i]+"Width",!0,o):l+=D.css(e,"border"+de[i]+"Width",!0,o));return!r&&c>=0&&(h+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-c-h-l-.5))||0),h}function lt(e,t,n){var r=Qe(e),o=(!_.boxSizingReliable()||n)&&"border-box"===D.css(e,"boxSizing",!1,r),c=o,l=Xe(e,t,r),h="offset"+t[0].toUpperCase()+t.slice(1);if(Ke.test(l)){if(!n)return l;l="auto"}return(!_.boxSizingReliable()&&o||!_.reliableTrDimensions()&&R(e,"tr")||"auto"===l||!parseFloat(l)&&"inline"===D.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===D.css(e,"boxSizing",!1,r),(c=h in e)&&(l=e[h])),(l=parseFloat(l)||0)+ct(e,t,n||(o?"border":"content"),c,r,l)+"px"}function ht(e,t,n,r,o){return new ht.prototype.init(e,t,n,r,o)}D.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Xe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,c,l,h=ne(t),d=ot.test(t),style=e.style;if(d||(t=nt(h)),l=D.cssHooks[t]||D.cssHooks[h],void 0===n)return l&&"get"in l&&void 0!==(o=l.get(e,!1,r))?o:style[t];"string"===(c=typeof n)&&(o=he.exec(n))&&o[1]&&(n=ge(e,t,o),c="number"),null!=n&&n==n&&("number"!==c||d||(n+=o&&o[3]||(D.cssNumber[h]?"":"px")),_.clearCloneStyle||""!==n||0!==t.indexOf("background")||(style[t]="inherit"),l&&"set"in l&&void 0===(n=l.set(e,n,r))||(d?style.setProperty(t,n):style[t]=n))}},css:function(e,t,n,r){var o,c,l,h=ne(t);return ot.test(t)||(t=nt(h)),(l=D.cssHooks[t]||D.cssHooks[h])&&"get"in l&&(o=l.get(e,!0,n)),void 0===o&&(o=Xe(e,t,r)),"normal"===o&&t in st&&(o=st[t]),""===n||n?(c=parseFloat(o),!0===n||isFinite(c)?c||0:o):o}}),D.each(["height","width"],(function(e,t){D.cssHooks[t]={get:function(e,n,r){if(n)return!it.test(D.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?lt(e,t,r):Ge(e,at,(function(){return lt(e,t,r)}))},set:function(e,n,r){var o,c=Qe(e),l=!_.scrollboxSize()&&"absolute"===c.position,h=(l||r)&&"border-box"===D.css(e,"boxSizing",!1,c),d=r?ct(e,t,r,h,c):0;return h&&l&&(d-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(c[t])-ct(e,t,"border",!1,c)-.5)),d&&(o=he.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=D.css(e,t)),ut(0,n,d)}}})),D.cssHooks.marginLeft=Je(_.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Xe(e,"marginLeft"))||e.getBoundingClientRect().left-Ge(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),D.each({margin:"",padding:"",border:"Width"},(function(e,t){D.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+de[i]+t]=o[i]||o[i-2]||o[0];return r}},"margin"!==e&&(D.cssHooks[e+t].set=ut)})),D.fn.extend({css:function(e,t){return J(this,(function(e,t,n){var r,o,map={},i=0;if(Array.isArray(t)){for(r=Qe(e),o=t.length;i<o;i++)map[t[i]]=D.css(e,t[i],!1,r);return map}return void 0!==n?D.style(e,t,n):D.css(e,t)}),e,t,arguments.length>1)}}),D.Tween=ht,ht.prototype={constructor:ht,init:function(e,t,n,r,o,c){this.elem=e,this.prop=n,this.easing=o||D.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=c||(D.cssNumber[n]?"":"px")},cur:function(){var e=ht.propHooks[this.prop];return e&&e.get?e.get(this):ht.propHooks._default.get(this)},run:function(e){var t,n=ht.propHooks[this.prop];return this.options.duration?this.pos=t=D.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ht.propHooks._default.set(this),this}},ht.prototype.init.prototype=ht.prototype,ht.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=D.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){D.fx.step[e.prop]?D.fx.step[e.prop](e):1!==e.elem.nodeType||!D.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:D.style(e.elem,e.prop,e.now+e.unit)}}},ht.propHooks.scrollTop=ht.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},D.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"},D.fx=ht.prototype.init,D.fx.step={};var pt,ft,mt=/^(?:toggle|show|hide)$/,yt=/queueHooks$/;function gt(){ft&&(!1===E.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(gt):n.setTimeout(gt,D.fx.interval),D.fx.tick())}function vt(){return n.setTimeout((function(){pt=void 0})),pt=Date.now()}function bt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=de[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function wt(e,t,n){for(var r,o=(Tt.tweeners[t]||[]).concat(Tt.tweeners["*"]),c=0,l=o.length;c<l;c++)if(r=o[c].call(n,t,e))return r}function Tt(e,t,n){var r,o,c=0,l=Tt.prefilters.length,h=D.Deferred().always((function(){delete d.elem})),d=function(){if(o)return!1;for(var t=pt||vt(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),c=0,l=f.tweens.length;c<l;c++)f.tweens[c].run(r);return h.notifyWith(e,[f,r,n]),r<1&&l?n:(l||h.notifyWith(e,[f,1,0]),h.resolveWith(e,[f]),!1)},f=h.promise({elem:e,props:D.extend({},t),opts:D.extend(!0,{specialEasing:{},easing:D.easing._default},n),originalProperties:t,originalOptions:n,startTime:pt||vt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=D.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)f.tweens[n].run(1);return t?(h.notifyWith(e,[f,1,0]),h.resolveWith(e,[f,t])):h.rejectWith(e,[f,t]),this}}),m=f.props;for(!function(e,t){var n,r,o,c,l;for(n in e)if(o=t[r=ne(n)],c=e[n],Array.isArray(c)&&(o=c[1],c=e[n]=c[0]),n!==r&&(e[r]=c,delete e[n]),(l=D.cssHooks[r])&&"expand"in l)for(n in c=l.expand(c),delete e[r],c)n in e||(e[n]=c[n],t[n]=o);else t[r]=o}(m,f.opts.specialEasing);c<l;c++)if(r=Tt.prefilters[c].call(f,e,m,f.opts))return k(r.stop)&&(D._queueHooks(f.elem,f.opts.queue).stop=r.stop.bind(r)),r;return D.map(m,wt,f),k(f.opts.start)&&f.opts.start.call(e,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),D.fx.timer(D.extend(d,{elem:e,anim:f,queue:f.opts.queue})),f}D.Animation=D.extend(Tt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ge(n.elem,e,he.exec(t),n),n}]},tweener:function(e,t){k(e)?(t=e,e=["*"]):e=e.match(W);for(var n,r=0,o=e.length;r<o;r++)n=e[r],Tt.tweeners[n]=Tt.tweeners[n]||[],Tt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,c,l,h,d,f,m,y="width"in t||"height"in t,v=this,w={},style=e.style,T=e.nodeType&&ye(e),S=oe.get(e,"fxshow");for(r in n.queue||(null==(l=D._queueHooks(e,"fx")).unqueued&&(l.unqueued=0,h=l.empty.fire,l.empty.fire=function(){l.unqueued||h()}),l.unqueued++,v.always((function(){v.always((function(){l.unqueued--,D.queue(e,"fx").length||l.empty.fire()}))}))),t)if(o=t[r],mt.test(o)){if(delete t[r],c=c||"toggle"===o,o===(T?"hide":"show")){if("show"!==o||!S||void 0===S[r])continue;T=!0}w[r]=S&&S[r]||D.style(e,r)}if((d=!D.isEmptyObject(t))||!D.isEmptyObject(w))for(r in y&&1===e.nodeType&&(n.overflow=[style.overflow,style.overflowX,style.overflowY],null==(f=S&&S.display)&&(f=oe.get(e,"display")),"none"===(m=D.css(e,"display"))&&(f?m=f:(we([e],!0),f=e.style.display||f,m=D.css(e,"display"),we([e]))),("inline"===m||"inline-block"===m&&null!=f)&&"none"===D.css(e,"float")&&(d||(v.done((function(){style.display=f})),null==f&&(m=style.display,f="none"===m?"":m)),style.display="inline-block")),n.overflow&&(style.overflow="hidden",v.always((function(){style.overflow=n.overflow[0],style.overflowX=n.overflow[1],style.overflowY=n.overflow[2]}))),d=!1,w)d||(S?"hidden"in S&&(T=S.hidden):S=oe.access(e,"fxshow",{display:f}),c&&(S.hidden=!T),T&&we([e],!0),v.done((function(){for(r in T||we([e]),oe.remove(e,"fxshow"),w)D.style(e,r,w[r])}))),d=wt(T?S[r]:0,r,v),r in S||(S[r]=d.start,T&&(d.end=d.start,d.start=0))}],prefilter:function(e,t){t?Tt.prefilters.unshift(e):Tt.prefilters.push(e)}}),D.speed=function(e,t,n){var r=e&&"object"==typeof e?D.extend({},e):{complete:n||!n&&t||k(e)&&e,duration:e,easing:n&&t||t&&!k(t)&&t};return D.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in D.fx.speeds?r.duration=D.fx.speeds[r.duration]:r.duration=D.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){k(r.old)&&r.old.call(this),r.queue&&D.dequeue(this,r.queue)},r},D.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=D.isEmptyObject(e),c=D.speed(t,n,r),l=function(){var t=Tt(this,D.extend({},e),c);(o||oe.get(this,"finish"))&&t.stop(!0)};return l.finish=l,o||!1===c.queue?this.each(l):this.queue(c.queue,l)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",c=D.timers,data=oe.get(this);if(o)data[o]&&data[o].stop&&r(data[o]);else for(o in data)data[o]&&data[o].stop&&yt.test(o)&&r(data[o]);for(o=c.length;o--;)c[o].elem!==this||null!=e&&c[o].queue!==e||(c[o].anim.stop(n),t=!1,c.splice(o,1));!t&&n||D.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,data=oe.get(this),n=data[e+"queue"],r=data[e+"queueHooks"],o=D.timers,c=n?n.length:0;for(data.finish=!0,D.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<c;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete data.finish}))}}),D.each(["toggle","show","hide"],(function(e,t){var n=D.fn[t];D.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(bt(t,!0),e,r,o)}})),D.each({slideDown:bt("show"),slideUp:bt("hide"),slideToggle:bt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){D.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),D.timers=[],D.fx.tick=function(){var e,i=0,t=D.timers;for(pt=Date.now();i<t.length;i++)(e=t[i])()||t[i]!==e||t.splice(i--,1);t.length||D.fx.stop(),pt=void 0},D.fx.timer=function(e){D.timers.push(e),D.fx.start()},D.fx.interval=13,D.fx.start=function(){ft||(ft=!0,gt())},D.fx.stop=function(){ft=null},D.fx.speeds={slow:600,fast:200,_default:400},D.fn.delay=function(time,e){return time=D.fx&&D.fx.speeds[time]||time,e=e||"fx",this.queue(e,(function(e,t){var r=n.setTimeout(e,time);t.stop=function(){n.clearTimeout(r)}}))},function(){var input=E.createElement("input"),e=E.createElement("select").appendChild(E.createElement("option"));input.type="checkbox",_.checkOn=""!==input.value,_.optSelected=e.selected,(input=E.createElement("input")).value="t",input.type="radio",_.radioValue="t"===input.value}();var St,_t=D.expr.attrHandle;D.fn.extend({attr:function(e,t){return J(this,D.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){D.removeAttr(this,e)}))}}),D.extend({attr:function(e,t,n){var r,o,c=e.nodeType;if(3!==c&&8!==c&&2!==c)return void 0===e.getAttribute?D.prop(e,t,n):(1===c&&D.isXMLDoc(e)||(o=D.attrHooks[t.toLowerCase()]||(D.expr.match.bool.test(t)?St:void 0)),void 0!==n?null===n?void D.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=D.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!_.radioValue&&"radio"===t&&R(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(W);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),St={set:function(e,t,n){return!1===t?D.removeAttr(e,n):e.setAttribute(n,n),n}},D.each(D.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=_t[t]||D.find.attr;_t[t]=function(e,t,r){var o,c,l=t.toLowerCase();return r||(c=_t[l],_t[l]=o,o=null!=n(e,t,r)?l:null,_t[l]=c),o}}));var kt=/^(?:input|select|textarea|button)$/i,Ct=/^(?:a|area)$/i;function Et(e){return(e.match(W)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function It(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(W)||[]}D.fn.extend({prop:function(e,t){return J(this,D.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[D.propFix[e]||e]}))}}),D.extend({prop:function(e,t,n){var r,o,c=e.nodeType;if(3!==c&&8!==c&&2!==c)return 1===c&&D.isXMLDoc(e)||(t=D.propFix[t]||t,o=D.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=D.find.attr(e,"tabindex");return t?parseInt(t,10):kt.test(e.nodeName)||Ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_.optSelected||(D.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),D.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){D.propFix[this.toLowerCase()]=this})),D.fn.extend({addClass:function(e){var t,n,r,o,c,l,h,i=0;if(k(e))return this.each((function(t){D(this).addClass(e.call(this,t,xt(this)))}));if((t=It(e)).length)for(;n=this[i++];)if(o=xt(n),r=1===n.nodeType&&" "+Et(o)+" "){for(l=0;c=t[l++];)r.indexOf(" "+c+" ")<0&&(r+=c+" ");o!==(h=Et(r))&&n.setAttribute("class",h)}return this},removeClass:function(e){var t,n,r,o,c,l,h,i=0;if(k(e))return this.each((function(t){D(this).removeClass(e.call(this,t,xt(this)))}));if(!arguments.length)return this.attr("class","");if((t=It(e)).length)for(;n=this[i++];)if(o=xt(n),r=1===n.nodeType&&" "+Et(o)+" "){for(l=0;c=t[l++];)for(;r.indexOf(" "+c+" ")>-1;)r=r.replace(" "+c+" "," ");o!==(h=Et(r))&&n.setAttribute("class",h)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):k(e)?this.each((function(i){D(this).toggleClass(e.call(this,i,xt(this),t),t)})):this.each((function(){var t,i,o,c;if(r)for(i=0,o=D(this),c=It(e);t=c[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=xt(this))&&oe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":oe.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+Et(xt(n))+" ").indexOf(t)>-1)return!0;return!1}});var At=/\r/g;D.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=k(e),this.each((function(i){var n;1===this.nodeType&&(null==(n=r?e.call(this,i,D(this).val()):e)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=D.map(n,(function(e){return null==e?"":e+""}))),(t=D.valHooks[this.type]||D.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):o?(t=D.valHooks[o.type]||D.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(At,""):null==n?"":n:void 0}}),D.extend({valHooks:{option:{get:function(e){var t=D.find.attr(e,"value");return null!=t?t:Et(D.text(e))}},select:{get:function(e){var t,option,i,n=e.options,r=e.selectedIndex,o="select-one"===e.type,c=o?null:[],l=o?r+1:n.length;for(i=r<0?l:o?r:0;i<l;i++)if(((option=n[i]).selected||i===r)&&!option.disabled&&(!option.parentNode.disabled||!R(option.parentNode,"optgroup"))){if(t=D(option).val(),o)return t;c.push(t)}return c},set:function(e,t){for(var n,option,r=e.options,o=D.makeArray(t),i=r.length;i--;)((option=r[i]).selected=D.inArray(D.valHooks.option.get(option),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),D.each(["radio","checkbox"],(function(){D.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=D.inArray(D(e).val(),t)>-1}},_.checkOn||(D.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),_.focusin="onfocusin"in n;var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};D.extend(D.event,{trigger:function(e,data,t,r){var i,o,c,l,h,d,f,m,y=[t||E],v=w.call(e,"type")?e.type:e,T=w.call(e,"namespace")?e.namespace.split("."):[];if(o=m=c=t=t||E,3!==t.nodeType&&8!==t.nodeType&&!Dt.test(v+D.event.triggered)&&(v.indexOf(".")>-1&&(T=v.split("."),v=T.shift(),T.sort()),h=v.indexOf(":")<0&&"on"+v,(e=e[D.expando]?e:new D.Event(v,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=T.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+T.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=t),data=null==data?[e]:D.makeArray(data,[e]),f=D.event.special[v]||{},r||!f.trigger||!1!==f.trigger.apply(t,data))){if(!r&&!f.noBubble&&!C(t)){for(l=f.delegateType||v,Dt.test(l+v)||(o=o.parentNode);o;o=o.parentNode)y.push(o),c=o;c===(t.ownerDocument||E)&&y.push(c.defaultView||c.parentWindow||n)}for(i=0;(o=y[i++])&&!e.isPropagationStopped();)m=o,e.type=i>1?l:f.bindType||v,(d=(oe.get(o,"events")||Object.create(null))[e.type]&&oe.get(o,"handle"))&&d.apply(o,data),(d=h&&o[h])&&d.apply&&re(o)&&(e.result=d.apply(o,data),!1===e.result&&e.preventDefault());return e.type=v,r||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(y.pop(),data)||!re(t)||h&&k(t[v])&&!C(t)&&((c=t[h])&&(t[h]=null),D.event.triggered=v,e.isPropagationStopped()&&m.addEventListener(v,Nt),t[v](),e.isPropagationStopped()&&m.removeEventListener(v,Nt),D.event.triggered=void 0,c&&(t[h]=c)),e.result}},simulate:function(e,t,n){var r=D.extend(new D.Event,n,{type:e,isSimulated:!0});D.event.trigger(r,null,t)}}),D.fn.extend({trigger:function(e,data){return this.each((function(){D.event.trigger(e,data,this)}))},triggerHandler:function(e,data){var t=this[0];if(t)return D.event.trigger(e,data,t,!0)}}),_.focusin||D.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){D.event.simulate(t,e.target,D.event.fix(e))};D.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,o=oe.access(r,t);o||r.addEventListener(e,n,!0),oe.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=oe.access(r,t)-1;o?oe.access(r,t,o):(r.removeEventListener(e,n,!0),oe.remove(r,t))}}}));var Lt=n.location,Ot={guid:Date.now()},Mt=/\?/;D.parseXML=function(data){var e;if(!data||"string"!=typeof data)return null;try{e=(new n.DOMParser).parseFromString(data,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||D.error("Invalid XML: "+data),e};var Pt=/\[\]$/,Rt=/\r?\n/g,Ft=/^(?:submit|button|image|reset|file)$/i,qt=/^(?:input|select|textarea|keygen)/i;function Vt(e,t,n,r){var o;if(Array.isArray(t))D.each(t,(function(i,t){n||Pt.test(e)?r(e,t):Vt(e+"["+("object"==typeof t&&null!=t?i:"")+"]",t,n,r)}));else if(n||"object"!==A(t))r(e,t);else for(o in t)Vt(e+"["+o+"]",t[o],n,r)}D.param=function(a,e){var t,s=[],n=function(e,t){var n=k(t)?t():t;s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==a)return"";if(Array.isArray(a)||a.jquery&&!D.isPlainObject(a))D.each(a,(function(){n(this.name,this.value)}));else for(t in a)Vt(t,a[t],e,n);return s.join("&")},D.fn.extend({serialize:function(){return D.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=D.prop(this,"elements");return e?D.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!D(this).is(":disabled")&&qt.test(this.nodeName)&&!Ft.test(e)&&(this.checked||!Te.test(e))})).map((function(e,t){var n=D(this).val();return null==n?null:Array.isArray(n)?D.map(n,(function(e){return{name:t.name,value:e.replace(Rt,"\r\n")}})):{name:t.name,value:n.replace(Rt,"\r\n")}})).get()}});var Bt=/%20/g,jt=/#.*$/,Ut=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:GET|HEAD)$/,Wt=/^\/\//,$t={},Kt={},Qt="*/".concat("*"),Gt=E.createElement("a");function Yt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(W)||[];if(k(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Xt(e,t,n,r){var o={},c=e===Kt;function l(h){var d;return o[h]=!0,D.each(e[h]||[],(function(e,h){var f=h(t,n,r);return"string"!=typeof f||c||o[f]?c?!(d=f):void 0:(t.dataTypes.unshift(f),l(f),!1)})),d}return l(t.dataTypes[0])||!o["*"]&&l("*")}function Jt(e,t){var n,r,o=D.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&D.extend(!0,e,r),e}Gt.href=Lt.href,D.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Lt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":D.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jt(Jt(e,D.ajaxSettings),t):Jt(D.ajaxSettings,e)},ajaxPrefilter:Yt($t),ajaxTransport:Yt(Kt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,c,l,h,d,f,m,i,y,s=D.ajaxSetup({},t),v=s.context||s,w=s.context&&(v.nodeType||v.jquery)?D(v):D.event,T=D.Deferred(),S=D.Callbacks("once memory"),_=s.statusCode||{},k={},C={},x="canceled",I={readyState:0,getResponseHeader:function(e){var t;if(f){if(!l)for(l={};t=Ht.exec(c);)l[t[1].toLowerCase()+" "]=(l[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=l[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return f?c:null},setRequestHeader:function(e,t){return null==f&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,k[e]=t),this},overrideMimeType:function(e){return null==f&&(s.mimeType=e),this},statusCode:function(map){var code;if(map)if(f)I.always(map[I.status]);else for(code in map)_[code]=[_[code],map[code]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),A(0,t),this}};if(T.promise(I),s.url=((e||s.url||Lt.href)+"").replace(Wt,Lt.protocol+"//"),s.type=t.method||t.type||s.method||s.type,s.dataTypes=(s.dataType||"*").toLowerCase().match(W)||[""],null==s.crossDomain){d=E.createElement("a");try{d.href=s.url,d.href=d.href,s.crossDomain=Gt.protocol+"//"+Gt.host!=d.protocol+"//"+d.host}catch(e){s.crossDomain=!0}}if(s.data&&s.processData&&"string"!=typeof s.data&&(s.data=D.param(s.data,s.traditional)),Xt($t,s,t,I),f)return I;for(i in(m=D.event&&s.global)&&0==D.active++&&D.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!zt.test(s.type),o=s.url.replace(jt,""),s.hasContent?s.data&&s.processData&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&(s.data=s.data.replace(Bt,"+")):(y=s.url.slice(o.length),s.data&&(s.processData||"string"==typeof s.data)&&(o+=(Mt.test(o)?"&":"?")+s.data,delete s.data),!1===s.cache&&(o=o.replace(Ut,"$1"),y=(Mt.test(o)?"&":"?")+"_="+Ot.guid+++y),s.url=o+y),s.ifModified&&(D.lastModified[o]&&I.setRequestHeader("If-Modified-Since",D.lastModified[o]),D.etag[o]&&I.setRequestHeader("If-None-Match",D.etag[o])),(s.data&&s.hasContent&&!1!==s.contentType||t.contentType)&&I.setRequestHeader("Content-Type",s.contentType),I.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+Qt+"; q=0.01":""):s.accepts["*"]),s.headers)I.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(v,I,s)||f))return I.abort();if(x="abort",S.add(s.complete),I.done(s.success),I.fail(s.error),r=Xt(Kt,s,t,I)){if(I.readyState=1,m&&w.trigger("ajaxSend",[I,s]),f)return I;s.async&&s.timeout>0&&(h=n.setTimeout((function(){I.abort("timeout")}),s.timeout));try{f=!1,r.send(k,A)}catch(e){if(f)throw e;A(-1,e)}}else A(-1,"No Transport");function A(e,t,l,d){var y,k,C,E,x,A=t;f||(f=!0,h&&n.clearTimeout(h),r=void 0,c=d||"",I.readyState=e>0?4:0,y=e>=200&&e<300||304===e,l&&(E=function(s,e,t){for(var n,r,o,c,l=s.contents,h=s.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=s.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in l)if(l[r]&&l[r].test(n)){h.unshift(r);break}if(h[0]in t)o=h[0];else{for(r in t){if(!h[0]||s.converters[r+" "+h[0]]){o=r;break}c||(c=r)}o=o||c}if(o)return o!==h[0]&&h.unshift(o),t[o]}(s,I,l)),!y&&D.inArray("script",s.dataTypes)>-1&&(s.converters["text script"]=function(){}),E=function(s,e,t,n){var r,o,c,l,h,d={},f=s.dataTypes.slice();if(f[1])for(c in s.converters)d[c.toLowerCase()]=s.converters[c];for(o=f.shift();o;)if(s.responseFields[o]&&(t[s.responseFields[o]]=e),!h&&n&&s.dataFilter&&(e=s.dataFilter(e,s.dataType)),h=o,o=f.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(!(c=d[h+" "+o]||d["* "+o]))for(r in d)if((l=r.split(" "))[1]===o&&(c=d[h+" "+l[0]]||d["* "+l[0]])){!0===c?c=d[r]:!0!==d[r]&&(o=l[0],f.unshift(l[1]));break}if(!0!==c)if(c&&s.throws)e=c(e);else try{e=c(e)}catch(e){return{state:"parsererror",error:c?e:"No conversion from "+h+" to "+o}}}return{state:"success",data:e}}(s,E,I,y),y?(s.ifModified&&((x=I.getResponseHeader("Last-Modified"))&&(D.lastModified[o]=x),(x=I.getResponseHeader("etag"))&&(D.etag[o]=x)),204===e||"HEAD"===s.type?A="nocontent":304===e?A="notmodified":(A=E.state,k=E.data,y=!(C=E.error))):(C=A,!e&&A||(A="error",e<0&&(e=0))),I.status=e,I.statusText=(t||A)+"",y?T.resolveWith(v,[k,A,I]):T.rejectWith(v,[I,A,C]),I.statusCode(_),_=void 0,m&&w.trigger(y?"ajaxSuccess":"ajaxError",[I,s,y?k:C]),S.fireWith(v,[I,A]),m&&(w.trigger("ajaxComplete",[I,s]),--D.active||D.event.trigger("ajaxStop")))}return I},getJSON:function(e,data,t){return D.get(e,data,t,"json")},getScript:function(e,t){return D.get(e,void 0,t,"script")}}),D.each(["get","post"],(function(e,t){D[t]=function(e,data,n,r){return k(data)&&(r=r||n,n=data,data=void 0),D.ajax(D.extend({url:e,type:t,dataType:r,data:data,success:n},D.isPlainObject(e)&&e))}})),D.ajaxPrefilter((function(s){var i;for(i in s.headers)"content-type"===i.toLowerCase()&&(s.contentType=s.headers[i]||"")})),D._evalUrl=function(e,t,n){return D.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){D.globalEval(e,t,n)}})},D.fn.extend({wrapAll:function(html){var e;return this[0]&&(k(html)&&(html=html.call(this[0])),e=D(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(html){return k(html)?this.each((function(i){D(this).wrapInner(html.call(this,i))})):this.each((function(){var e=D(this),t=e.contents();t.length?t.wrapAll(html):e.append(html)}))},wrap:function(html){var e=k(html);return this.each((function(i){D(this).wrapAll(e?html.call(this,i):html)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){D(this).replaceWith(this.childNodes)})),this}}),D.expr.pseudos.hidden=function(e){return!D.expr.pseudos.visible(e)},D.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},D.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},en=D.ajaxSettings.xhr();_.cors=!!en&&"withCredentials"in en,_.ajax=en=!!en,D.ajaxTransport((function(e){var t,r;if(_.cors||en&&!e.crossDomain)return{send:function(o,c){var i,l=e.xhr();if(l.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)l[i]=e.xhrFields[i];for(i in e.mimeType&&l.overrideMimeType&&l.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)l.setRequestHeader(i,o[i]);t=function(e){return function(){t&&(t=r=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?c(0,"error"):c(l.status,l.statusText):c(Zt[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=t(),r=l.onerror=l.ontimeout=t("error"),void 0!==l.onabort?l.onabort=r:l.onreadystatechange=function(){4===l.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{l.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),D.ajaxPrefilter((function(s){s.crossDomain&&(s.contents.script=!1)})),D.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){return D.globalEval(text),text}}}),D.ajaxPrefilter("script",(function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET")})),D.ajaxTransport("script",(function(s){var script,e;if(s.crossDomain||s.scriptAttrs)return{send:function(t,n){script=D("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",e=function(t){script.remove(),e=null,t&&n("error"===t.type?404:200,t.type)}),E.head.appendChild(script[0])},abort:function(){e&&e()}}}));var body,tn=[],nn=/(=)\?(?=&|$)|\?\?/;D.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||D.expando+"_"+Ot.guid++;return this[e]=!0,e}}),D.ajaxPrefilter("json jsonp",(function(s,e,t){var r,o,c,l=!1!==s.jsonp&&(nn.test(s.url)?"url":"string"==typeof s.data&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(s.data)&&"data");if(l||"jsonp"===s.dataTypes[0])return r=s.jsonpCallback=k(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,l?s[l]=s[l].replace(nn,"$1"+r):!1!==s.jsonp&&(s.url+=(Mt.test(s.url)?"&":"?")+s.jsonp+"="+r),s.converters["script json"]=function(){return c||D.error(r+" was not called"),c[0]},s.dataTypes[0]="json",o=n[r],n[r]=function(){c=arguments},t.always((function(){void 0===o?D(n).removeProp(r):n[r]=o,s[r]&&(s.jsonpCallback=e.jsonpCallback,tn.push(r)),c&&k(o)&&o(c[0]),c=o=void 0})),"script"})),_.createHTMLDocument=((body=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===body.childNodes.length),D.parseHTML=function(data,e,t){return"string"!=typeof data?[]:("boolean"==typeof e&&(t=e,e=!1),e||(_.createHTMLDocument?((base=(e=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,e.head.appendChild(base)):e=E),r=!t&&[],(n=F.exec(data))?[e.createElement(n[1])]:(n=Ie([data],e,r),r&&r.length&&D(r).remove(),D.merge([],n.childNodes)));var base,n,r},D.fn.load=function(e,t,n){var r,o,c,l=this,h=e.indexOf(" ");return h>-1&&(r=Et(e.slice(h)),e=e.slice(0,h)),k(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),l.length>0&&D.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){c=arguments,l.html(r?D("<div>").append(D.parseHTML(e)).find(r):e)})).always(n&&function(e,t){l.each((function(){n.apply(this,c||[e.responseText,t,e])}))}),this},D.expr.pseudos.animated=function(e){return D.grep(D.timers,(function(t){return e===t.elem})).length},D.offset={setOffset:function(e,t,i){var n,r,o,c,l,h,d=D.css(e,"position"),f=D(e),m={};"static"===d&&(e.style.position="relative"),l=f.offset(),o=D.css(e,"top"),h=D.css(e,"left"),("absolute"===d||"fixed"===d)&&(o+h).indexOf("auto")>-1?(c=(n=f.position()).top,r=n.left):(c=parseFloat(o)||0,r=parseFloat(h)||0),k(t)&&(t=t.call(e,i,D.extend({},l))),null!=t.top&&(m.top=t.top-l.top+c),null!=t.left&&(m.left=t.left-l.left+r),"using"in t?t.using.call(e,m):("number"==typeof m.top&&(m.top+="px"),"number"==typeof m.left&&(m.left+="px"),f.css(m))}},D.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(i){D.offset.setOffset(this,e,i)}));var rect,t,n=this[0];return n?n.getClientRects().length?(rect=n.getBoundingClientRect(),t=n.ownerDocument.defaultView,{top:rect.top+t.pageYOffset,left:rect.left+t.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===D.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===D.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=D(e).offset()).top+=D.css(e,"borderTopWidth",!0),o.left+=D.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-D.css(r,"marginTop",!0),left:t.left-o.left-D.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===D.css(e,"position");)e=e.offsetParent;return e||pe}))}}),D.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;D.fn[e]=function(r){return J(this,(function(e,r,o){var c;if(C(e)?c=e:9===e.nodeType&&(c=e.defaultView),void 0===o)return c?c[t]:e[r];c?c.scrollTo(n?c.pageXOffset:o,n?o:c.pageYOffset):e[r]=o}),e,r,arguments.length)}})),D.each(["top","left"],(function(e,t){D.cssHooks[t]=Je(_.pixelPosition,(function(e,n){if(n)return n=Xe(e,t),Ke.test(n)?D(e).position()[t]+"px":n}))})),D.each({Height:"height",Width:"width"},(function(e,t){D.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){D.fn[r]=function(o,c){var l=arguments.length&&(n||"boolean"!=typeof o),h=n||(!0===o||!0===c?"margin":"border");return J(this,(function(t,n,o){var c;return C(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(c=t.documentElement,Math.max(t.body["scroll"+e],c["scroll"+e],t.body["offset"+e],c["offset"+e],c["client"+e])):void 0===o?D.css(t,n,h):D.style(t,n,o,h)}),t,l?o:void 0,l)}}))})),D.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){D.fn[t]=function(e){return this.on(t,e)}})),D.fn.extend({bind:function(e,data,t){return this.on(e,null,data,t)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,data,n){return this.on(t,e,data,n)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),D.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){D.fn[t]=function(data,e){return arguments.length>0?this.on(t,null,data,e):this.trigger(t)}}));var rn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;D.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),k(e))return r=h.call(arguments,2),(o=function(){return e.apply(t||this,r.concat(h.call(arguments)))}).guid=e.guid=e.guid||D.guid++,o},D.holdReady=function(e){e?D.readyWait++:D.ready(!0)},D.isArray=Array.isArray,D.parseJSON=JSON.parse,D.nodeName=R,D.isFunction=k,D.isWindow=C,D.camelCase=ne,D.type=A,D.now=Date.now,D.isNumeric=function(e){var t=D.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},D.trim=function(text){return null==text?"":(text+"").replace(rn,"")},void 0===(r=function(){return D}.apply(t,[]))||(e.exports=r);var on=n.jQuery,an=n.$;return D.noConflict=function(e){return n.$===D&&(n.$=an),e&&n.jQuery===D&&(n.jQuery=on),D},void 0===o&&(n.jQuery=n.$=D),D}))},43:function(e,t,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,r=t.slots,o=t.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?e(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return e(!1)})):e(!1))}};e.exports=r},72:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return c})),n.d(t,"__rest",(function(){return l})),n.d(t,"__decorate",(function(){return h})),n.d(t,"__param",(function(){return d})),n.d(t,"__metadata",(function(){return f})),n.d(t,"__awaiter",(function(){return m})),n.d(t,"__generator",(function(){return y})),n.d(t,"__exportStar",(function(){return v})),n.d(t,"__values",(function(){return w})),n.d(t,"__read",(function(){return T})),n.d(t,"__spread",(function(){return S})),n.d(t,"__spreadArrays",(function(){return _})),n.d(t,"__await",(function(){return k})),n.d(t,"__asyncGenerator",(function(){return C})),n.d(t,"__asyncDelegator",(function(){return E})),n.d(t,"__asyncValues",(function(){return x})),n.d(t,"__makeTemplateObject",(function(){return I})),n.d(t,"__importStar",(function(){return A})),n.d(t,"__importDefault",(function(){return D}));var r=function(e,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,b){e.__proto__=b}||function(e,b){for(var p in b)b.hasOwnProperty(p)&&(e[p]=b[p])})(e,b)};function o(e,b){function t(){this.constructor=e}r(e,b),e.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}var c=function(){return(c=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)};function l(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function h(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c}function d(e,t){return function(n,r){t(n,r,e)}}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{d(r.next(e))}catch(e){c(e)}}function h(e){try{d(r.throw(e))}catch(e){c(e)}}function d(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(l,h)}d((r=r.apply(e,t||[])).next())}))}function y(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function v(e,t){for(var p in e)t.hasOwnProperty(p)||(t[p]=e[p])}function w(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function T(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function S(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(T(arguments[i]));return e}function _(){for(var s=0,i=0,e=arguments.length;i<e;i++)s+=arguments[i].length;var t=Array(s),n=0;for(i=0;i<e;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)t[n]=a[r];return t}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function C(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(e,t||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(e){g[e]&&(i[e]=function(t){return new Promise((function(a,b){q.push([e,t,a,b])>1||o(e,t)}))})}function o(e,t){try{(n=g[e](t)).value instanceof k?Promise.resolve(n.value.v).then(c,l):h(q[0][2],n)}catch(e){h(q[0][3],e)}var n}function c(e){o("next",e)}function l(e){o("throw",e)}function h(e,t){e(t),q.shift(),q.length&&o(q[0][0],q[0][1])}}function E(e){var i,p;return i={},t("next"),t("throw",(function(e){throw e})),t("return"),i[Symbol.iterator]=function(){return this},i;function t(t,n){i[t]=e[t]?function(r){return(p=!p)?{value:k(e[t](r)),done:"return"===t}:n?n(r):r}:n}}function x(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,t=e[Symbol.asyncIterator];return t?t.call(e):(e=w(e),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(t){i[t]=e[t]&&function(n){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(n=e[t](n)).done,n.value)}))}}}function I(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function D(e){return e&&e.__esModule?e:{default:e}}},77:function(e,t,n){"use strict";var r,o=(r=n(121))&&"object"==typeof r&&"default"in r?r.default:r;o.registerVersion("firebase","7.8.2","app"),e.exports=o},90:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(72),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c=function(e,t){if(!e)throw l(t)},l=function(e){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},h=function(e){for(var t=[],p=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t[p++]=n:n<2048?(t[p++]=n>>6|192,t[p++]=63&n|128):55296==(64512&n)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++i)),t[p++]=n>>18|240,t[p++]=n>>12&63|128,t[p++]=n>>6&63|128,t[p++]=63&n|128):(t[p++]=n>>12|224,t[p++]=n>>6&63|128,t[p++]=63&n|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(input,e){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var n=input[i],r=i+1<input.length,o=r?input[i+1]:0,c=i+2<input.length,l=c?input[i+2]:0,h=n>>2,d=(3&n)<<4|o>>4,f=(15&o)<<2|l>>6,m=63&l;c||(m=64,r||(f=64)),output.push(t[h],t[d],t[f],t[m])}return output.join("")},encodeString:function(input,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(input):this.encodeByteArray(h(input),e)},decodeString:function(input,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(input):function(e){for(var t=[],n=0,r=0;n<e.length;){var o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){var c=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){var u=((7&o)<<18|(63&(c=e[n++]))<<12|(63&(l=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{c=e[n++];var l=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&l)}}return t.join("")}(this.decodeStringToByteArray(input,e))},decodeStringToByteArray:function(input,e){this.init_();for(var t=e?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var n=t[input.charAt(i++)],r=i<input.length?t[input.charAt(i)]:0,o=++i<input.length?t[input.charAt(i)]:64,c=++i<input.length?t[input.charAt(i)]:64;if(++i,null==n||null==r||null==o||null==c)throw Error();var l=n<<2|r>>4;if(output.push(l),64!==o){var h=r<<4&240|o>>2;if(output.push(h),64!==c){var d=o<<6&192|c;output.push(d)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},f=function(e){try{return d.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function m(e,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return source}for(var t in source)source.hasOwnProperty(t)&&(e[t]=m(e[t],source[t]));return e}var y=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function v(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w=function(e){function t(code,n){var r=e.call(this,n)||this;return r.code=code,r.name="FirebaseError",Object.setPrototypeOf(r,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,T.prototype.create),r}return r.__extends(t,e),t}(Error),T=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(code){for(var data=[],e=1;e<arguments.length;e++)data[e-1]=arguments[e];for(var t=data[0]||{},n=this.service+"/"+code,template=this.errors[code],r=template?S(template,t):"Error",o=this.serviceName+": "+r+" ("+n+").",c=new w(n,o),l=0,h=Object.keys(t);l<h.length;l++){var d=h[l];"_"!==d.slice(-1)&&(d in c&&console.warn('Overwriting FirebaseError base field "'+d+'" can cause unexpected behavior.'),c[d]=t[d])}return c},e}();function S(template,data){return template.replace(_,(function(e,t){var n=data[t];return null!=n?n.toString():"<"+t+"?>"}))}var _=/\{\$([^}]+)}/g;function k(e){return JSON.parse(e)}var C=function(e){var header={},t={},data={},n="";try{var r=e.split(".");header=k(f(r[0])||""),t=k(f(r[1])||""),n=r[2],data=t.d||{},delete t.d}catch(e){}return{header:header,claims:t,data:data,signature:n}};var E=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,c,a=this.chain_[0],b=this.chain_[1],l=this.chain_[2],h=this.chain_[3],d=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=h^b&(l^h),c=1518500249):(o=b^l^h,c=1859775393):i<60?(o=b&l|h&(b|l),c=2400959708):(o=b^l^h,c=3395469782);r=(a<<5|a>>>27)+o+d+c+n[i]&4294967295;d=h,h=l,l=4294967295&(b<<30|b>>>2),b=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,o=this.buf_,c=this.inbuf_;r<t;){if(0===c)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(o[c]=e.charCodeAt(r),++r,++c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<t;)if(o[c]=e[r],++r,++c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)e[n]=this.chain_[i]>>r&255,++n;return e},e}();var x=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,o=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o in e&&"function"==typeof e[o])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(e){}})),this.observers.push(r),c},e.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,e)},e.prototype.sendOne=function(i,e){var t=this;this.task.then((function(){if(void 0!==t.observers&&void 0!==t.observers[i])try{e(t.observers[i])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function I(){}function A(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=e+" failed: ";return o+=r+" argument "}t.CONSTANTS=o,t.Deferred=y,t.ErrorFactory=T,t.FirebaseError=w,t.Sha1=E,t.assert=c,t.assertionError=l,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=d,t.base64Decode=f,t.base64Encode=function(e){var t=h(e);return d.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new x(e,t);return n.subscribe.bind(n)},t.decode=C,t.deepCopy=function(e){return m(void 0,e)},t.deepExtend=m,t.errorPrefix=A,t.getUA=v,t.isAdmin=function(e){var t=C(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isElectron=function(){return v().indexOf("Electron/")>=0},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){var e=v();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isUWP=function(){return v().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){var t=C(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=C(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),o=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},t.issuedAtTime=function(e){var t=C(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=k,t.map=function(e,t,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,o=Object.entries(e);r<o.length;r++){var c=o[r];n(c[0],c[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var p=0,i=0;i<e.length;i++){var t=e.charCodeAt(i);t<128?p++:t<2048?p+=2:t>=55296&&t<=56319?(p+=4,i++):p+=3}return p},t.stringToByteArray=function(e){for(var t=[],p=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n>=55296&&n<=56319){var r=n-55296;i++,c(i<e.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(e.charCodeAt(i)-56320)}n<128?t[p++]=n:n<2048?(t[p++]=n>>6|192,t[p++]=63&n|128):n<65536?(t[p++]=n>>12|224,t[p++]=n>>6&63|128,t[p++]=63&n|128):(t[p++]=n>>18|240,t[p++]=n>>12&63|128,t[p++]=n>>6&63|128,t[p++]=63&n|128)}return t},t.stringify=function(data){return JSON.stringify(data)},t.validateArgCount=function(e,t,n,r){var o;if(r<t?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(A(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(A(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(A(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(25))},92:function(e,t,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,r=t.slots,o=t.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?e(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return e(!1)})):e(!1))}};e.exports=r},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ie}));var r={};n.r(r),n.d(r,"linear",(function(){return E})),n.d(r,"easeInQuad",(function(){return x})),n.d(r,"easeOutQuad",(function(){return I})),n.d(r,"easeInOutQuad",(function(){return A})),n.d(r,"easeInCubic",(function(){return D})),n.d(r,"easeOutCubic",(function(){return N})),n.d(r,"easeInOutCubic",(function(){return L})),n.d(r,"easeInQuart",(function(){return O})),n.d(r,"easeOutQuart",(function(){return M})),n.d(r,"easeInOutQuart",(function(){return P})),n.d(r,"easeInQuint",(function(){return R})),n.d(r,"easeOutQuint",(function(){return F})),n.d(r,"easeInOutQuint",(function(){return V}));n(55),n(56);var o=n(3),c=n(13),l=n(0),h=n(23);var d=n(53),f=n(9),m=n(14),y=n(15),v=(n(174),{breakpoint:{scrollBarWidth:16,thresholds:{xs:600,sm:960,md:1280,lg:1920}},icons:{iconfont:"mdi",values:{}},lang:{current:"en",locales:{en:{badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"}}},t:void 0},rtl:!1,theme:{dark:!1,default:"light",disable:!1,options:{cspNonce:void 0,customProperties:void 0,minifyTheme:void 0,themeCache:void 0},themes:{light:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},dark:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}}}}),w=n(10),T=function(){function e(){Object(o.a)(this,e),this.framework={}}return Object(c.a)(e,[{key:"init",value:function(e,t){}}]),e}(),S=function(e){function t(e,n){var r;Object(o.a)(this,t),r=Object(f.a)(this,Object(m.a)(t).call(this));var c=Object(w.n)({},v),l=n.userPreset,y=l.preset,T=void 0===y?{}:y,S=Object(d.a)(l,["preset"]);return null!=T.preset&&Object(h.c)("Global presets do not support the **preset** option, it can be safely omitted"),n.preset=Object(w.n)(Object(w.n)(c,T),S),r}return Object(y.a)(t,e),t}(T);S.property="presets";n(18),n(7),n(175);var _=n(11),k=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(f.a)(this,Object(m.a)(t).apply(this,arguments))).bar=0,e.top=0,e.left=0,e.insetFooter=0,e.right=0,e.bottom=0,e.footer=0,e.application={bar:{},top:{},left:{},insetFooter:{},right:{},bottom:{},footer:{}},e}return Object(y.a)(t,e),Object(c.a)(t,[{key:"register",value:function(e,t,n){this.application[t]=Object(_.a)({},e,n),this.update(t)}},{key:"unregister",value:function(e,t){null!=this.application[t][e]&&(delete this.application[t][e],this.update(t))}},{key:"update",value:function(e){this[e]=Object.values(this.application[e]).reduce((function(e,t){return e+t}),0)}}]),t}(T);k.property="application";n(30);var C=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this))).xs=!1,n.sm=!1,n.md=!1,n.lg=!1,n.xl=!1,n.xsOnly=!1,n.smOnly=!1,n.smAndDown=!1,n.smAndUp=!1,n.mdOnly=!1,n.mdAndDown=!1,n.mdAndUp=!1,n.lgOnly=!1,n.lgAndDown=!1,n.lgAndUp=!1,n.xlOnly=!1,n.name="",n.height=0,n.width=0,n.resizeTimeout=0;var r=e[t.property],c=r.scrollBarWidth,l=r.thresholds;return n.scrollBarWidth=c,n.thresholds=l,n.init(),n}return Object(y.a)(t,e),Object(c.a)(t,[{key:"init",value:function(){"undefined"!=typeof window&&(window.addEventListener("resize",this.onResize.bind(this),{passive:!0}),this.update())}},{key:"onResize",value:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.update.bind(this),200)}},{key:"update",value:function(){var e=this.getClientHeight(),t=this.getClientWidth(),n=t<this.thresholds.xs,r=t<this.thresholds.sm&&!n,o=t<this.thresholds.md-this.scrollBarWidth&&!(r||n),c=t<this.thresholds.lg-this.scrollBarWidth&&!(o||r||n),l=t>=this.thresholds.lg-this.scrollBarWidth;switch(this.height=e,this.width=t,this.xs=n,this.sm=r,this.md=o,this.lg=c,this.xl=l,this.xsOnly=n,this.smOnly=r,this.smAndDown=(n||r)&&!(o||c||l),this.smAndUp=!n&&(r||o||c||l),this.mdOnly=o,this.mdAndDown=(n||r||o)&&!(c||l),this.mdAndUp=!(n||r)&&(o||c||l),this.lgOnly=c,this.lgAndDown=(n||r||o||c)&&!l,this.lgAndUp=!(n||r||o)&&(c||l),this.xlOnly=l,!0){case n:this.name="xs";break;case r:this.name="sm";break;case o:this.name="md";break;case c:this.name="lg";break;default:this.name="xl"}}},{key:"getClientWidth",value:function(){return"undefined"==typeof document?0:Math.max(document.documentElement.clientWidth,window.innerWidth||0)}},{key:"getClientHeight",value:function(){return"undefined"==typeof document?0:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}]),t}(T);C.property="breakpoint";n(41),n(27),n(29);var E=function(e){return e},x=function(e){return Math.pow(e,2)},I=function(e){return e*(2-e)},A=function(e){return e<.5?2*Math.pow(e,2):(4-2*e)*e-1},D=function(e){return Math.pow(e,3)},N=function(e){return Math.pow(--e,3)+1},L=function(e){return e<.5?4*Math.pow(e,3):(e-1)*(2*e-2)*(2*e-2)+1},O=function(e){return Math.pow(e,4)},M=function(e){return 1-Math.pow(--e,4)},P=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},R=function(e){return Math.pow(e,5)},F=function(e){return 1+Math.pow(--e,5)},V=function(e){return e<.5?16*Math.pow(e,5):1+16*Math.pow(--e,5)};function B(e){if("number"==typeof e)return e;var t=H(e);if(!t)throw"string"==typeof e?new Error('Target element "'.concat(e,'" not found.')):new TypeError("Target must be a Number/Selector/HTMLElement/VueComponent, received ".concat(U(e)," instead."));for(var n=0;t;)n+=t.offsetTop,t=t.offsetParent;return n}function j(e){var t=H(e);if(t)return t;throw"string"==typeof e?new Error('Container element "'.concat(e,'" not found.')):new TypeError("Container must be a Selector/HTMLElement/VueComponent, received ".concat(U(e)," instead."))}function U(e){return null==e?e:e.constructor.name}function H(e){return"string"==typeof e?document.querySelector(e):e&&e._isVue?e.$el:e instanceof HTMLElement?e:null}function z(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function W(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(t){Object(_.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=W({container:document.scrollingElement||document.body||document.documentElement,duration:500,offset:0,easing:"easeInOutCubic",appOffset:!0},t),o=j(n.container);if(n.appOffset&&$.framework.application){var c=o.classList.contains("v-navigation-drawer"),l=o.classList.contains("v-navigation-drawer--clipped"),h=$.framework.application,d=h.bar,f=h.top;n.offset+=d,c&&!l||(n.offset+=f)}var m,y=performance.now();m="number"==typeof e?B(e)-n.offset:B(e)-B(o)-n.offset;var v=o.scrollTop;if(m===v)return Promise.resolve(m);var w="function"==typeof n.easing?n.easing:r[n.easing];if(!w)throw new TypeError('Easing function "'.concat(n.easing,'" not found.'));return new Promise((function(e){return requestAnimationFrame((function t(r){var c=r-y,progress=Math.abs(n.duration?Math.min(c/n.duration,1):1);o.scrollTop=Math.floor(v+(m-v)*w(progress));var l=o===document.body?document.documentElement.clientHeight:o.clientHeight;if(1===progress||l+o.scrollTop===o.scrollHeight)return e(m);requestAnimationFrame(t)}))}))}$.framework={},$.init=function(){};var K=function(e){function t(){var e;return Object(o.a)(this,t),e=Object(f.a)(this,Object(m.a)(t).call(this)),Object(f.a)(e,$)}return Object(y.a)(t,e),t}(T);K.property="goTo";n(120);var Q={complete:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",cancel:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",close:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",delete:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",clear:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",success:"M12,2C17.52,2 22,6.48 22,12C22,17.52 17.52,22 12,22C6.48,22 2,17.52 2,12C2,6.48 6.48,2 12,2M11,16.5L18,9.5L16.59,8.09L11,13.67L7.91,10.59L6.5,12L11,16.5Z",info:"M13,9H11V7H13M13,17H11V11H13M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",warning:"M11,4.5H13V15.5H11V4.5M13,17.5V19.5H11V17.5H13Z",error:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z",prev:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",next:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",checkboxOn:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",checkboxOff:"M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",checkboxIndeterminate:"M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",delimiter:"M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",sort:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",expand:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",menu:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",subgroup:"M7,10L12,15L17,10H7Z",dropdown:"M7,10L12,15L17,10H7Z",radioOn:"M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,7C9.24,7 7,9.24 7,12C7,14.76 9.24,17 12,17C14.76,17 17,14.76 17,12C17,9.24 14.76,7 12,7Z",radioOff:"M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",edit:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",ratingEmpty:"M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",ratingFull:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",ratingHalf:"M12,15.4V6.1L13.71,10.13L18.09,10.5L14.77,13.39L15.76,17.67M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",loading:"M19,8L15,12H18C18,15.31 15.31,18 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20C16.42,20 20,16.42 20,12H23M6,12C6,8.69 8.69,6 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4C7.58,4 4,7.58 4,12H1L5,16L9,12",first:"M18.41,16.59L13.82,12L18.41,7.41L17,6L11,12L17,18L18.41,16.59M6,6H8V18H6V6Z",last:"M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z",unfold:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z",file:"M16.5,6V17.5C16.5,19.71 14.71,21.5 12.5,21.5C10.29,21.5 8.5,19.71 8.5,17.5V5C8.5,3.62 9.62,2.5 11,2.5C12.38,2.5 13.5,3.62 13.5,5V15.5C13.5,16.05 13.05,16.5 12.5,16.5C11.95,16.5 11.5,16.05 11.5,15.5V6H10V15.5C10,16.88 11.12,18 12.5,18C13.88,18 15,16.88 15,15.5V5C15,2.79 13.21,1 11,1C8.79,1 7,2.79 7,5V17.5C7,20.54 9.46,23 12.5,23C15.54,23 18,20.54 18,17.5V6H16.5Z",plus:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",minus:"M19,13H5V11H19V13Z"},G={complete:"check",cancel:"cancel",close:"close",delete:"cancel",clear:"clear",success:"check_circle",info:"info",warning:"priority_high",error:"warning",prev:"chevron_left",next:"chevron_right",checkboxOn:"check_box",checkboxOff:"check_box_outline_blank",checkboxIndeterminate:"indeterminate_check_box",delimiter:"fiber_manual_record",sort:"arrow_upward",expand:"keyboard_arrow_down",menu:"menu",subgroup:"arrow_drop_down",dropdown:"arrow_drop_down",radioOn:"radio_button_checked",radioOff:"radio_button_unchecked",edit:"edit",ratingEmpty:"star_border",ratingFull:"star",ratingHalf:"star_half",loading:"cached",first:"first_page",last:"last_page",unfold:"unfold_more",file:"attach_file",plus:"add",minus:"remove"},Y={complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-exclamation",error:"mdi-alert",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sort:"mdi-arrow-up",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},X={complete:"fas fa-check",cancel:"fas fa-times-circle",close:"fas fa-times",delete:"fas fa-times-circle",clear:"fas fa-times-circle",success:"fas fa-check-circle",info:"fas fa-info-circle",warning:"fas fa-exclamation",error:"fas fa-exclamation-triangle",prev:"fas fa-chevron-left",next:"fas fa-chevron-right",checkboxOn:"fas fa-check-square",checkboxOff:"far fa-square",checkboxIndeterminate:"fas fa-minus-square",delimiter:"fas fa-circle",sort:"fas fa-sort-up",expand:"fas fa-chevron-down",menu:"fas fa-bars",subgroup:"fas fa-caret-down",dropdown:"fas fa-caret-down",radioOn:"far fa-dot-circle",radioOff:"far fa-circle",edit:"fas fa-edit",ratingEmpty:"far fa-star",ratingFull:"fas fa-star",ratingHalf:"fas fa-star-half",loading:"fas fa-sync",first:"fas fa-step-backward",last:"fas fa-step-forward",unfold:"fas fa-arrows-alt-v",file:"fas fa-paperclip",plus:"fas fa-plus",minus:"fas fa-minus"},J={complete:"fa fa-check",cancel:"fa fa-times-circle",close:"fa fa-times",delete:"fa fa-times-circle",clear:"fa fa-times-circle",success:"fa fa-check-circle",info:"fa fa-info-circle",warning:"fa fa-exclamation",error:"fa fa-exclamation-triangle",prev:"fa fa-chevron-left",next:"fa fa-chevron-right",checkboxOn:"fa fa-check-square",checkboxOff:"fa fa-square-o",checkboxIndeterminate:"fa fa-minus-square",delimiter:"fa fa-circle",sort:"fa fa-sort-up",expand:"fa fa-chevron-down",menu:"fa fa-bars",subgroup:"fa fa-caret-down",dropdown:"fa fa-caret-down",radioOn:"fa fa-dot-circle-o",radioOff:"fa fa-circle-o",edit:"fa fa-pencil",ratingEmpty:"fa fa-star-o",ratingFull:"fa fa-star",ratingHalf:"fa fa-star-half-o",loading:"fa fa-refresh",first:"fa fa-step-backward",last:"fa fa-step-forward",unfold:"fa fa-angle-double-down",file:"fa fa-paperclip",plus:"fa fa-plus",minus:"fa fa-minus"};n(44);var Z=function(component,e){var t={};for(var n in e)t[n]={component:component,props:{icon:e[n].split(" fa-")}};return t}("font-awesome-icon",X),ee=Object.freeze({mdiSvg:Q,md:G,mdi:Y,fa:X,fa4:J,faSvg:Z}),te=function(e){function t(e){var n;Object(o.a)(this,t),n=Object(f.a)(this,Object(m.a)(t).call(this));var r=e[t.property],c=r.iconfont,l=r.values;return n.iconfont=c,n.values=Object(w.n)(ee[c],l),n}return Object(y.a)(t,e),t}(T);te.property="icons";n(52),n(42),n(79);var ne=Symbol("Lang fallback");var re=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this))).defaultLocale="en";var r=e[t.property],c=r.current,l=r.locales,h=r.t;return n.current=c,n.locales=l,n.translator=h||n.defaultTranslator,n}return Object(y.a)(t,e),Object(c.a)(t,[{key:"currentLocale",value:function(e){return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,c=n.replace("$vuetify.",""),l=Object(w.i)(t,c,ne);return l===ne&&(r?(Object(h.b)('Translation key "'.concat(c,'" not found in fallback')),l=n):(Object(h.c)('Translation key "'.concat(c,'" not found, falling back to default')),l=e(o,n,!0,o))),l}(this.locales[this.current],e,!1,this.locales[this.defaultLocale])}},{key:"t",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.startsWith("$vuetify.")?this.translator.apply(this,[e].concat(n)):this.replace(e,n)}},{key:"defaultTranslator",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.replace(this.currentLocale(e),n)}},{key:"replace",value:function(e,t){return e.replace(/\{(\d+)\}/g,(function(e,n){return String(t[+n])}))}}]),t}(T);re.property="lang";n(131);var ie=n(22),oe=n(21),ae=(n(180),n(71),n(57),n(58),[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]]),se=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},ue=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],ce=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function le(e){for(var t=Array(3),n=se,r=ae,i=0;i<3;++i)t[i]=Math.round(255*Object(w.e)(n(r[i][0]*e[0]+r[i][1]*e[1]+r[i][2]*e[2])));return(t[0]<<16)+(t[1]<<8)+(t[2]<<0)}function he(e){for(var t=[0,0,0],n=ce,r=ue,o=n((e>>16&255)/255),g=n((e>>8&255)/255),b=n((e>>0&255)/255),i=0;i<3;++i)t[i]=r[i][0]*o+r[i][1]*g+r[i][2]*b;return t}function de(e){var t;if("number"==typeof e)t=e;else{if("string"!=typeof e)throw new TypeError("Colors can only be numbers or strings, recieved ".concat(null==e?e:e.constructor.name," instead"));var n="#"===e[0]?e.substring(1):e;3===n.length&&(n=n.split("").map((function(e){return e+e})).join("")),6!==n.length&&Object(h.c)("'".concat(e,"' is not a valid rgb color")),t=parseInt(n,16)}return t<0?(Object(h.c)("Colors cannot be negative: '".concat(e,"'")),t=0):(t>16777215||isNaN(t))&&(Object(h.c)("'".concat(e,"' is not a valid rgb color")),t=16777215),t}function pe(e){var t=e.toString(16);return t.length<6&&(t="0".repeat(6-t.length)+t),"#"+t}function fe(e){return pe(de(e))}n(181);var me=.20689655172413793,ye=function(e){return e>Math.pow(me,3)?Math.cbrt(e):e/(3*Math.pow(me,2))+4/29},ge=function(e){return e>me?Math.pow(e,3):3*Math.pow(me,2)*(e-4/29)};function ve(e){var t=ye,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function be(e){var t=ge,n=(e[0]+16)/116;return[.95047*t(n+e[1]/500),t(n),1.08883*t(n-e[2]/200)]}var we=function(e,t){return"\n.v-application .".concat(e," {\n  background-color: ").concat(t," !important;\n  border-color: ").concat(t," !important;\n}\n.v-application .").concat(e,"--text {\n  color: ").concat(t," !important;\n  caret-color: ").concat(t," !important;\n}")},Te=function(e,t,n){var r=t.split(/(\d)/,2),o=Object(ie.a)(r,2),c=o[0],l=o[1];return"\n.v-application .".concat(e,".").concat(c,"-").concat(l," {\n  background-color: ").concat(n," !important;\n  border-color: ").concat(n," !important;\n}\n.v-application .").concat(e,"--text.text--").concat(c,"-").concat(l," {\n  color: ").concat(n," !important;\n  caret-color: ").concat(n," !important;\n}")},Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base";return"--v-".concat(e,"-").concat(t)},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base";return"var(".concat(Se(e,t),")")};function ke(e,t){for(var n={base:pe(t)},i=5;i>0;--i)n["lighten".concat(i)]=pe(Ce(t,i));for(var r=1;r<=4;++r)n["darken".concat(r)]=pe(Ee(t,r));return n}function Ce(e,t){var n=ve(he(e));return n[0]=n[0]+10*t,le(be(n))}function Ee(e,t){var n=ve(he(e));return n[0]=n[0]-10*t,le(be(n))}var xe=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this))).disabled=!1,n.isDark=null,n.vueInstance=null,n.vueMeta=null;var r=e[t.property],c=r.dark,l=r.disable,h=r.options,d=r.themes;return n.dark=Boolean(c),n.defaults=n.themes=d,n.options=h,l?(n.disabled=!0,Object(f.a)(n)):(n.themes={dark:n.fillVariant(d.dark,!0),light:n.fillVariant(d.light,!1)},n)}return Object(y.a)(t,e),Object(c.a)(t,[{key:"applyTheme",value:function(){if(this.disabled)return this.clearCss();this.css=this.generatedStyles}},{key:"clearCss",value:function(){this.css=""}},{key:"init",value:function(e,t){this.disabled||(e.$meta?this.initVueMeta(e):t&&this.initSSR(t),this.initTheme())}},{key:"setTheme",value:function(e,t){this.themes[e]=Object.assign(this.themes[e],t),this.applyTheme()}},{key:"resetThemes",value:function(){this.themes.light=Object.assign({},this.defaults.light),this.themes.dark=Object.assign({},this.defaults.dark),this.applyTheme()}},{key:"checkOrCreateStyleElement",value:function(){return this.styleEl=document.getElementById("vuetify-theme-stylesheet"),!!this.styleEl||(this.genStyleElement(),Boolean(this.styleEl))}},{key:"fillVariant",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=this.themes[t?"dark":"light"];return Object.assign({},n,e)}},{key:"genStyleElement",value:function(){if("undefined"!=typeof document){var e=this.options||{};this.styleEl=document.createElement("style"),this.styleEl.type="text/css",this.styleEl.id="vuetify-theme-stylesheet",e.cspNonce&&this.styleEl.setAttribute("nonce",e.cspNonce),document.head.appendChild(this.styleEl)}}},{key:"initVueMeta",value:function(e){var t=this;if(this.vueMeta=e.$meta(),this.isVueMeta23)e.$nextTick((function(){t.applyVueMeta23()}));else{var n="function"==typeof this.vueMeta.getOptions?this.vueMeta.getOptions().keyName:"metaInfo",r=e.$options[n]||{};e.$options[n]=function(){r.style=r.style||[];var e=r.style.find((function(s){return"vuetify-theme-stylesheet"===s.id}));return e?e.cssText=t.generatedStyles:r.style.push({cssText:t.generatedStyles,type:"text/css",id:"vuetify-theme-stylesheet",nonce:(t.options||{}).cspNonce}),r}}}},{key:"applyVueMeta23",value:function(){(0,this.vueMeta.addApp("vuetify").set)({style:[{cssText:this.generatedStyles,type:"text/css",id:"vuetify-theme-stylesheet",nonce:(this.options||{}).cspNonce}]})}},{key:"initSSR",value:function(e){var t=this.options||{},n=t.cspNonce?' nonce="'.concat(t.cspNonce,'"'):"";e.head=e.head||"",e.head+='<style type="text/css" id="vuetify-theme-stylesheet"'.concat(n,">").concat(this.generatedStyles,"</style>")}},{key:"initTheme",value:function(){var e=this;"undefined"!=typeof document&&(this.vueInstance&&this.vueInstance.$destroy(),this.vueInstance=new l.a({data:{themes:this.themes},watch:{themes:{immediate:!0,deep:!0,handler:function(){return e.applyTheme()}}}}))}},{key:"css",set:function(e){this.vueMeta?this.isVueMeta23&&this.applyVueMeta23():this.checkOrCreateStyleElement()&&(this.styleEl.innerHTML=e)}},{key:"dark",set:function(e){var t=this.isDark;this.isDark=e,null!=t&&this.applyTheme()},get:function(){return Boolean(this.isDark)}},{key:"currentTheme",get:function(){var e=this.dark?"dark":"light";return this.themes[e]}},{key:"generatedStyles",get:function(){var e,t=this.parsedTheme,n=this.options||{};return null!=n.themeCache&&null!=(e=n.themeCache.get(t))?e:(e=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.anchor,r=Object(d.a)(e,["anchor"]),o=Object.keys(r);if(!o.length)return"";var c="",l="",h=t?_e("anchor"):n;l+=".v-application a { color: ".concat(h,"; }"),t&&(c+="  ".concat(Se("anchor"),": ").concat(n,";\n"));for(var i=0;i<o.length;++i){var f=o[i],m=e[f];l+=we(f,t?_e(f):m.base),t&&(c+="  ".concat(Se(f),": ").concat(m.base,";\n"));for(var y=Object.keys(m),v=0;v<y.length;++v){var w=y[v],T=m[w];"base"!==w&&(l+=Te(f,w,t?_e(f,w):T),t&&(c+="  ".concat(Se(f,w),": ").concat(T,";\n")))}}return t&&(c=":root {\n".concat(c,"}\n\n")),c+l}(t,n.customProperties),null!=n.minifyTheme&&(e=n.minifyTheme(e)),null!=n.themeCache&&n.themeCache.set(t,e),e)}},{key:"parsedTheme",get:function(){return function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.anchor,o=Object(d.a)(t,["anchor"]),c=Object.keys(o),l={},i=0;i<c.length;++i){var h=c[i],f=t[h];null!=f&&(n?("base"===h||h.startsWith("lighten")||h.startsWith("darken"))&&(l[h]=fe(f)):"object"===Object(oe.a)(f)?l[h]=e(f,!0):l[h]=ke(h,de(f)))}return n||(l.anchor=r||l.base||l.primary.base),l}(this.currentTheme||{})}},{key:"isVueMeta23",get:function(){return"function"==typeof this.vueMeta.addApp}}]),t}(T);xe.property="theme";var Ie=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.framework={},this.installed=[],this.preset={},this.userPreset={},this.userPreset=t,this.use(S),this.use(k),this.use(C),this.use(K),this.use(te),this.use(re),this.use(xe)}return Object(c.a)(e,[{key:"init",value:function(e,t){var n=this;this.installed.forEach((function(r){var o=n.framework[r];o.framework=n.framework,o.init(e,t)})),this.framework.rtl=Boolean(this.preset.rtl)}},{key:"use",value:function(e){var t=e.property;this.installed.includes(t)||(this.framework[t]=new e(this.preset,this),this.installed.push(t))}}]),e}();Ie.install=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.installed){e.installed=!0,l.a!==t&&Object(h.b)("Multiple instances of Vue detected\nSee https://github.com/vuetifyjs/vuetify/issues/4068\n\nIf you're seeing \"$attrs is readonly\", it's caused by this");var r=n.components||{},o=n.directives||{};for(var c in o){var d=o[c];t.directive(c,d)}!function e(n){if(n){for(var r in n){var component=n[r];component&&!e(component.$_vuetify_subcomponents)&&t.component(r,component)}return!0}return!1}(r),t.$_vuetify_installed||(t.$_vuetify_installed=!0,t.mixin({beforeCreate:function(){var e=this.$options;e.vuetify?(e.vuetify.init(this,e.ssrContext),this.$vuetify=t.observable(e.vuetify.framework)):this.$vuetify=e.parent&&e.parent.$vuetify||this}}))}},Ie.installed=!1,Ie.version="2.2.24"}}]);